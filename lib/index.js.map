{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./.config.js","webpack:///./includes/globals.js","webpack:///./includes/routes.js","webpack:///./includes/tasks.js","webpack:///./includes/tasksHandlers.js","webpack:///./lib/anzii.js","webpack:///./lib/base.js","webpack:///./lib/base/activate.js","webpack:///./lib/base/core.js","webpack:///./lib/base/pao.js","webpack:///./lib/esm/anziiloger/anziiloger.js","webpack:///./lib/esm/anziiloger/index.js","webpack:///./lib/esm/anziiloger/methods.js","webpack:///./lib/esm/config/config.js","webpack:///./lib/esm/config/index.js","webpack:///./lib/esm/config/methods.js","webpack:///./lib/esm/dao/dao.js","webpack:///./lib/esm/dao/index.js","webpack:///./lib/esm/dao/methods.js","webpack:///./lib/esm/dman/dman.js","webpack:///./lib/esm/dman/index.js","webpack:///./lib/esm/dman/methods.js","webpack:///./lib/esm/esm.js","webpack:///./lib/esm/global/global.js","webpack:///./lib/esm/global/index.js","webpack:///./lib/esm/global/methods.js","webpack:///./lib/esm/middleware/index.js","webpack:///./lib/esm/middleware/methods.js","webpack:///./lib/esm/middleware/middleware.js","webpack:///./lib/esm/mysql/index.js","webpack:///./lib/esm/mysql/methods.js","webpack:///./lib/esm/mysql/mysql.js","webpack:///./lib/esm/parsers/index.js","webpack:///./lib/esm/parsers/methods.js","webpack:///./lib/esm/parsers/parsers.js","webpack:///./lib/esm/request/index.js","webpack:///./lib/esm/request/methods.js","webpack:///./lib/esm/request/request.js","webpack:///./lib/esm/router/index.js","webpack:///./lib/esm/router/methods.js","webpack:///./lib/esm/router/router.js","webpack:///./lib/esm/server/index.js","webpack:///./lib/esm/server/methods.js","webpack:///./lib/esm/server/server.js","webpack:///./lib/esm/system/index.js","webpack:///./lib/esm/system/methods.js","webpack:///./lib/esm/system/system.js","webpack:///./lib/pillar/pillar.js","webpack:///./lib/start.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"async\"","webpack:///external \"body-parser\"","webpack:///external \"cluster\"","webpack:///external \"config\"","webpack:///external \"debug\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"http\"","webpack:///external \"jsonfile\"","webpack:///external \"mysql\"","webpack:///external \"node.extend\"","webpack:///external \"os\"","webpack:///external \"path\"","webpack:///external \"supports-color\"","webpack:///external \"util\"","webpack:///external \"uuid\"","webpack:///external \"winston\"","webpack:///external \"winston/lib/winston/transports\""],"names":["middleware","ppublic","addMiddleware","middlewares","pprivate","all","router","routes","kronjo","tasks","logger","level","trans","path","cluster","workers","spawn","server","type","value","req","res","next","console","log","originalUrl","header","method","taskRule","dayOfWeek","hour","minute","taskHandler","tasksHandlers","sendJobAlerts","frequency","self","emit","data","sendDailyReports","Anzii","ANZII","Base","ESM","Esm","Activate","Activator","CORE","PAO","PILLAR","libs","core","pao","anziiloger","Anziiloger","PROMPT","unshift","push","forEach","lib","moco","moduId","toLowerCase","modInstId","createModule","create","startModule","modules","globalModules","prototype","module","moduleId","sanna","runForModules","Object","keys","length","mod","events","addEventHandler","el","ev","handler","window","ev_addHandler","removeEventHandler","ev_removeHandler","getEvent","getTarget","preventNormal","preventDefault","stopEventBubble","stopPropagation","ajax","get","url","success","failure","ajax_get","post","ajax_post","validators","isFunction","x","is_function","isArray","is_array","isDate","is_date","isObject","is_object","isString","is_string","isValue","is_value","isNotFalsey","is_not_falsey","trimSpaces","trim_spaces","isEqualab","a","b","f","is_equal_ab","isSameValue","y","is_same_value","isValidEmail","e","is_valid_email","isValidPassword","p","is_valid_password","unlikeProps","unlike_props","contains","o","v","forOf","action","no","for_of","addValuesTo","k","add_values_to","findIn","i","find_in","util","makeDirs","isFileName","callback","p_mkdirs","mkdirsSync","abs","getFiles","opts","p_getFiles","getFile","p_getFile","getDirectories","p_getDirectories","getExtension","p_getExtension","generateUniqueID","p_generateUniqueID","unikify","p_unikify","registerEvents","evts","module_id","mod_inst_id","triggerEvent","evt","hasOwnProperty","modInst","moduleID","setDebugger","constructor","name","init","globals","startAllModules","modu","modSuper","stopModule","destroy","stopAllModules","converts","jsToJson","jsObject","js_to_json","jsonToJs","json","json_to_js","clone","c","objectToArray","key","object_to_array","stringToArray","str","sep","string_to_array","comp","addiks","bind","Error","listens","logSync","query","pa_notifyEvent","evehandles","mId","moduleMeta","mInsId","pa_notifyListen","message","source","sync","model","document","modelFrags","pa_isString","pa_stringToArray","mo","vendor","table","operation","trim","appPillar","pa_core","meta","winston","require","debugr","winlo","debugas","defaultTransports","handleExceptions","label","maxsize","maxFiles","timestamp","colorize","methods","handleLogRequest","handleAnziilogerConfig","info","warn","error","debug","now","Date","createLogger","transports","Console","pa_contains","config","conif","envObserver","supportsColor","Config","env","aliases","development","production","staging","configure","enviroment","views","handlers","stdout","has256","stderr","has16m","has","envCofig","clients","db","database","connect","appOrphic","flaDev","Dao","DBS","handleDataHiveRequest","handleDaoTakeDbs","conn","opi","outComehandler","Dman","supportedClients","mysql","protocol","connectMethod","handleConfigureDBMan","connectToClient","getClientDriver","pa_isObject","pa_isArray","supported","throwError","dbs","client","driver","stack","sclient","host","user","password","pass","err","Mysql","System","Middleware","Parsers","Router","Request","Server","Global","handleRequestGlobalRequest","indexOf","handleConfigMiddleware","handleAddExternalMiddleware","handleAttachMiddleware","attachMiddleware","m","funk","ext","len","app","xpress","allWares","use","w","call","bodyParser","handleMysqlDataRequest","deleteandtake","insertOne","insert","sql","queryAttributes","fields","values","format","r","insertMany","result","fullImplement","bulk","insertItem","find","findiks","multiple","toUpperCase","q","attribs","sqliks","queryTemplate","queryOptions","from","statement","updateOne","updatiks","update","updateMany","updateItem","condition","updateandtake","updateAndTake","updateTake","searchOptions","options","multiTableUpdate","then","updated","changedRows","take","conditions","taken","insertandtake","insertAndTake","takeQuery","insertTakeHandle","inserted","SEARCH","insertId","search","deleteAndTake","remove","deleteTakeHandle","deleted","removeJoin","updateJoinTemplate","sqlAttribs","tables","joinPoints","set","Promise","resolve","reject","takeFrom","takeSql","resultset","searchConditionsFormat","takeOptions","searchStatement","removiks","searchFieldsFormat","opiks","returnFields","range","sort","limit","transaction","TRANSACTION","procedure","PROCEDURE","join","JOIN","collections","collectionsIds","breakOut","sources","own","combineFields","failedInsert","rollback","username","email","inset","findOne","id","lastInsert","collection","joinExek","failedRequest","searchExek","resultSet","batch","s","item","errorMessage","ids","co","vv","ii","fieldValuePair","split","rolbacks","roll","deleteOne","joinConditionsFormat","splice","joins","joinStatement","cons","con","conList","operand","parseFormatCondition","parseGroup","multiSet","setTables","soundex","Array","rFields","fis","keyword","otherFields","fieldstatement","multiFields","allFields","lastCondition","fi","formated","fieldFormat","field","nestedIntFuxin","last","lastIndexOf","slice","substr","fieldList","as","option","stripedOption","args","sortArgs","sortFields","sortStatement","limitStatement","ranges","offset","count","fullCon","connector","conditionsConnector","condixion","exStr","replace","groupLen","startStr","conStr","parseInt","groupCons","grouped","map","kon","match","leftoperand","multiCon","conFuxin","whiteSpace","oCon","matchFields","matchKeys","op","mode","fuxinIndex","splicedFuxinArr","stripedSqBkts","operator","functionalStr","gotOperand","getOperand","bakedFuxin","firstStrItem","multiSets","pa_objectToArray","setStrings","setString","modSet","col","pos","handleShareMiddleware","body","dependiks","jsonfile","handleConfigRequest","handleRequestHandOver","handleRequestGlobalResponse","handleRequestGlobalError","handleHandlerError","handleRouterAliasList","route","view","request","aliasList","routesAliasList","aliatikHandlers","parsed","parseRequest","uploads","requestData","isView","payload","taskerHandler","handlePathError","params","requiredData","isPath","urlFragments","pathFrags","writeResponse","code","handleByHandlerError","derivedUrl","parasList","parasString","para","viewPath","comparePath","handleBadRequestError","handleHandlerNotFound","pa_jsToJson","text","fail","failureHandle","successfullHandle","handleConfigRouter","handleRouterMiddleware","handleAttachRoutes","routerMiddleware","attachRoutes","defaultRoutes","alias","renderRoute","routy","handOver","middlewareType","appendRouter","filterCallback","outOfRouterContext","filterType","moduleMiddleware","filteredpublicMiddlewares","filteredprivateMiddlewares","handleConfigServer","handleDomainResources","handleWriteServerRequestResponse","http","startServer","runServer","startPreRoutes","startRouting","renderHtml","streamResponse","getHtml","html","status","send","accepts","title","mimeTypes","rStream","on","pipe","end","viewda","viewData","render","express","componentCount","componentId","ssrComponentLen","componentRefLen","fixedCompS","before","after","compData","txt","css","gif","jpg","png","svg","js","handleConfigureSystem","handleRegisterShutDownCandidate","handleDistributeSystemResources","handleServerAttachWorkers","systemBase","DOCUMENT_ROOT","handleShutDowns","clusterCustomConfig","pa_getFiles","getDirs","pa_getDirectories","pa_getFile","pa_makeDirs","pa_getExtension","dirPath","filePath","createPath","shutDown","systemIsShuttingDown","shutDownServices","sd","shutDownOrder","context","kill","masterWorker","isMaster","pid","slaves","os","cpus","fork","worker","mainWorkerId","address","singleProcessTasks","signal","process","trace","listen","PORT","folkSlaveWorkers","mainWorker","pa_isFunction","candidate","numOfDBSD","allowedDBSTR","cwd","async","extend","fs","uuid","exports","EMAIL","PASSWORD","argv","p_o_freeze","freeze","p_clone","JSON","parse","stringify","p_deepMerge","to","p_ane","obj","isError","p_initArray","cnt","val","isFunc","p_isFunction","p_escapeRegExp","RegExpUtils","escape","p_merge","p_forEach","propName","p_union","union","p_getTasks","iterable","getTaskFunction","p_wrapTask","func","argArray","apply","p_wrapTimedTask","p_isString","task","start","time","internalHandler","internalIterable","p_isObject","getOwnPropertyNames","p_arrayToHash","array","defaultVal","p_isNullOrUndefined","hash","concat","j","p_arrayToObj","keyFieldOrTransform","valFieldOrTransform","keyIsString","keyIsFunc","valIsString","valIsFunc","p_objArrayToHash","hashProp","p_hashToArray","hashKeyProp","doHashKeyTransform","reduce","prev","prop","p_invertHash","new_obj","p_copyArray","p_dedupeArray","p_arrayPushAll","p_cb","v4","that","p_isBoolean","dirs","readdir","files","index","fullPath","stat","isDirectory","parallel","fileName","recursive","filter","filePaths","whilst","shift","meetsCriteria","childFiles","filePathCont","file","createReadStream","p_isDirectory","absoluteDirPath","cb","pieces","curr","isWindows","exists","mkdir","series","p_mkdirsSync","existsSync","mkdirSync","pathPartIndex","substring","lower","p_getFileExtensionFilter","extension","p_inherits","Type1","Type2","inherits","indent","jsonString","newA","n","castObj","arr","throwErrors","array_to_object","castArr","property","string","set_deeply","deep","get_deeply","toString","String","compare_values","value1","value2","getTime","flag","akeys","bKeys","aKeys","isBrowserSupported","is","polyFills","objectIs","bkeys","unlike","outcome","newX","vItemKeys","sb","sb_contains"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import routes from './includes/routes'\r\nimport tasks from './includes/tasks'\r\nimport * as middlewares from './includes/globals'\r\n\r\nexport default  {\r\n\r\n    // domain: [{name: 'view engine',set: 'pug'},{name:'views',set: 'resources/views'},{name: 'static',set: 'public'}],\r\n    middleware: {\r\n\r\n        ppublic:{\r\n\r\n            addMiddleware: middlewares.ppublic\r\n        },\r\n        pprivate: {\r\n\r\n            addMiddleware: middlewares.pprivate\r\n\r\n        },\r\n        all: {\r\n\r\n            addMiddleware: middlewares.all\r\n        }\r\n        \r\n    },\r\n    router: routes,\r\n    kronjo: tasks,\r\n    logger: {level: 'info',trans:['file',{path: 'http://www.iiprodakts/logger'}]},\r\n    cluster:{workers: 3,spawn: true,} ,\r\n    server: 'server'\r\n\r\n\r\n\r\n}","\r\n\r\nexport const ppublic = [\r\n\r\n    {\r\n\r\n        type: 'function',\r\n        value: function(req,res,next){\r\n\r\n            console.log(`This is the public middleware`)\r\n            next()\r\n\r\n        },\r\n\r\n    },\r\n\r\n    {\r\n\r\n        type: 'function',\r\n        value: function(req,res,next){\r\n\r\n            console.log('THE originalUrl: public 2')\r\n             console.log(req.originalUrl)\r\n            next()\r\n\r\n        },\r\n\r\n    }\r\n   \r\n   \r\n]\r\n\r\nexport const pprivate = [\r\n\r\n    {\r\n\r\n        type: 'function',\r\n        value: function(req,res,next){\r\n\r\n            console.log(`This is the PRIVATE middleware`)\r\n            next()\r\n\r\n        }\r\n\r\n    },\r\n\r\n    {\r\n\r\n        type: 'function',\r\n        value: function(req,res,next){\r\n\r\n            console.log('THE originalUrl: ANOTHER PRIVATE')\r\n             console.log(req.originalUrl)\r\n            next()\r\n\r\n        },\r\n\r\n    },\r\n\r\n]\r\n\r\n\r\nexport const all = [\r\n\r\n    {\r\n        type: 'function', \r\n        value: (req,res,next)=>{\r\n                console.log('I AM THE MIDDLEWARE THAT RUNS ON EVERY REQUEST')\r\n                res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n                res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\r\n                // console.log(req)\r\n                next()\r\n        }\r\n    }\r\n\r\n]\r\n\r\n\r\n","\r\n// import * as middlewares from './middlewares'\r\n\r\nexport default  [\r\n\r\n    \r\n    {\r\n        path: '/test',\r\n        method: 'POST',\r\n        type: 'public'\r\n    },\r\n    {\r\n        path: '/test',\r\n        method: 'GET',\r\n        type: 'public'\r\n    },\r\n    {\r\n        path: '/',\r\n        method: 'GET',\r\n        type: 'public'\r\n    },\r\n    \r\n]\r\n\r\n\r\n","\r\nimport * as tasksHandlers from './tasksHandlers'\r\n\r\nexport default  [\r\n\r\n    {\r\n        taskRule: {dayOfWeek: 0,hour: 17,minute: 19},\r\n        taskHandler: tasksHandlers.sendJobAlerts,\r\n       \r\n    },\r\n    // {\r\n    //     taskSchedule: 'once every-monday of every-week @5:00:am ',\r\n    //     taskHandler: taskHandlers.sendWeeklyJobAlerts,\r\n    //     type: 'public'\r\n    // },\r\n    // {\r\n    //     taskSchedule: 'once every-first-day of every-month @6:00:am',\r\n    //     method: 'post',\r\n    //     type: 'public'\r\n    // },\r\n    // {\r\n    //     taskSchedule: 'twice every-month @6:30:am',\r\n    //     method: 'GET',\r\n    //     type: 'private'\r\n    // }\r\n   \r\n]\r\n","\r\n export const sendJobAlerts = function(frequency){\r\n\r\n    const self = this \r\n     self.emit({type:\"get-new-jobs\",data:''})\r\n\r\n } \r\n \r\n export const sendDailyReports = function(){\r\n \t\r\n \t self.emit({type:\"get-reports\",data:frequency})\r\n }\r\n\r\n\r\n\r\n   \r\n  \r\n    \r\n","\r\n\r\nimport Base from './base'\r\nimport Esm from './esm/esm'\r\nimport * as Activator from './base/activate'\r\n\r\n\r\nclass Anzii{\r\n\r\n    constructor(){\r\n\r\n\t\t// console.log(Activator.Activate)\r\n\t\t\r\n\t\tconst self = self\r\n\r\n\t\tthis.ANZII = Base\r\n\t\tthis.ESM = Esm\r\n\t\tthis.Activate = Activator.Activate\r\n\t\t// this.DomLoaded = Base.SUKU.domLoaded.bind(this.SANA.SUKU)\r\n\t\t// this.Html = Base.SUKUS.html.bind(this.SANA.SUKUS)\r\n\t\t\r\n        \r\n    }\r\n    \r\n}\r\n\r\nexport default new Anzii()\r\n\r\n\r\n","\n\nimport PILLAR from \"./pillar/pillar\"\nimport CORE from \"./base/core\"\nimport PAO from \"./base/pao\"\n\n\n\n \n\n\nclass Base{\n\n    constructor(){\n\n        this.CORE = CORE,\n        this.PAO = PAO,\n        this.PILLAR = PILLAR\n      \n       \n    }\n    \n}\n\nexport default new Base()","\r\n\r\nexport const  Activate =  function(libs = []){\r\n\r\n\t\r\n\t// let pao = ''\r\n\t// let core = ''\r\n\r\n\t\r\n\t   \r\n\t\t// console.log('The Server')\r\n\t\tconst core = new this.ANZII.CORE(this.ANZII.PILLAR)\r\n\t\tconst pao = new this.ANZII.PAO(core) \r\n\t\tlet anziiloger = {Anziiloger: this.ESM.Esm.Anziiloger} \r\n\t\tconsole.log('ANZII PILLAR PROMPT')\r\n\t\tconsole.log(pao.PROMPT)\r\n\r\n\t\t\r\n\t\tdelete this.ESM.Esm.Anziiloger\r\n        // console.log(anziiloger)\r\n\t\t// console.log(this.ESM.Esm)\r\n\t\r\n\t\r\n\t// console.log('The core before modules')\r\n\t// console.log(pao.sb_jsToJson(core))\r\n\t\r\n\t// console.log(libs.length)\r\n\t// console.log('The ESM MODULES SHOULD BE IN PLACE RIGHT NOw')\r\n\t// console.log(this.ESM)\r\n\t// console.log(pao)\r\n\r\n\t// let global = pao.pa_clone(this.ESM.Esm.Global) \r\n\t// delete this.ESM.Esm.Global\r\n\tlibs.unshift(anziiloger)\r\n\tconsole.log('THE CORE')\r\n\t\tconsole.log(libs)\r\n\tlibs.push(this.ESM.Esm)\r\n\r\n\t// libs.push(global) \r\n\r\n\tlibs.forEach( lib => {\r\n\r\n\r\n\t\r\n\t\tfor (let moco in lib) {\r\n\t\t\r\n\t\t\t// console.log('Inside activate')\r\n\t\t\t// console.log(moco)\r\n\t\t\tconsole.log('THE LIB MOCO')\r\n\t\t\tconsole.log(typeof lib[moco])\r\n\t\t\tconsole.log(lib[moco])\r\n\t\r\n            \r\n\t\t\tlet moduId = moco.toLowerCase()\r\n\r\n\t\t\t// console.log('THE V')\r\n\t\t\t// console.log(v)\r\n\t\t\t// console.log(`Currently executing module: ${moco}`)\r\n\r\n\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\t\tlet modInstId = moduId\r\n\t\t\t\t\t\t\r\n\t\t\t\t// console.log('Executing module without view')\r\n\r\n\t\t\t\tcore.createModule(\r\n\t\t\t\r\n\t\t\t\t\tnew lib[moco](pao.create(moduId,null)),\r\n\t\t\t\t\tmoduId,modInstId\r\n\t\r\n\t\t\t\t);\r\n\t\r\n\t\t\t\t// console.log(`Currently starting module: ${moco}`)\r\n\t\t\t\tcore.startModule(moduId,modInstId);\r\n\t\r\n\t\t\t\t// console.log('Dependicies')\r\n\t\t\t\t// console.log(typeof this.ANDZIIY.core)\r\n\t\t\t\t// let moduId = mod.name.toLowerCase();\r\n\t\t\t\r\n\t\r\n\r\n\t\t}\r\n\r\n\r\n\t\t\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\r\n}","import { Console } from \"winston/lib/winston/transports\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction CORE(lib){\r\n\r\n   \r\n\tthis.PILLAR = lib\r\n\tthis.modules = {}; \r\n\tthis.globalModules = [] \r\n\tthis.PROMPT = this.PILLAR.PROMPT\r\n\t// this.parent = this\r\n\r\n\r\n}// End of the CORE class\r\n\r\n\r\n\r\nCORE.prototype.createModule = function(module,moduleId,modInstId){\r\n\r\n\tvar modules = this.modules;\r\n\tthis.sanna().runForModules(module)\r\n\r\n\t\r\n\r\n\t// console.log('THe modules Object')\r\n\t// console.log(modules)\r\n\r\n\r\n\tif(Object.keys(modules).length > 0){\r\n\r\n\r\n\t\t\r\n\t\tfor(let mod in modules){\r\n\r\n\t\t\t//console.log(modules[mod]);\r\n\r\n\t\t\r\n\r\n\t\t\tif(mod === moduleId){\r\n\r\n\t\t\t\t this.modules[moduleId][modInstId] = module;\r\n\r\n\t\t\t}else{\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis.modules[moduleId] = {};\r\n\t\t\t\tthis.modules[moduleId][modInstId] = module;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}// End of for loop\r\n\r\n\t\t\r\n\r\n\r\n\t}else{\r\n\r\n\t\r\n\t\tthis.modules[moduleId] = {};\r\n\t\tthis.modules[moduleId][modInstId] = module;\r\n\r\n\r\n\t}// End of ifesleif test\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n}// End of store modules method\r\n\r\n// CORE.prototype.PROMPT = this.PILLAR.PROMPT\r\n\r\nCORE.prototype.events = function() {\r\n\r\n\t\t const PILLAR = this.PILLAR \r\n\t\t//  const parent = this.parent\r\n\r\n\r\n\t\treturn{\r\n\r\n\t\t\t\taddEventHandler: function(el,ev,handler){\r\n\r\n\r\n\t\t\t\t\tif(typeof window === \"undefined\"){\r\n\r\n\t\t\t\t\t\treturn PILLAR.ev_addHandler(el,ev,handler);\r\n\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t PILLAR.ev_addHandler(el,ev,handler);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\r\n\t\t\t\t},// End of addEventHandler() method\r\n\r\n\t\t\t\tremoveEventHandler: function(el,ev,handler){\r\n\r\n\r\n\t\t\t\t\tPILLAR.ev_removeHandler(el,ev,handler);\r\n\r\n\r\n\t\t\t\t},// End of addEventHandler() method\r\n\r\n\t\t\t\tgetEvent: function(ev){\r\n\r\n\r\n\t\t\t\t\treturn PILLAR.getEvent(ev);\r\n\r\n\r\n\t\t\t\t},// End of addEventHandler() method\r\n\r\n\t\t\t\tgetTarget: function(ev){\r\n\r\n\r\n\t\t\t\t\treturn PILLAR.getTarget(ev);\r\n\r\n\r\n\t\t\t\t},// End of addEventHandler() method\r\n\r\n\t\t\t\tpreventNormal: function(ev){\r\n\r\n\r\n\t\t\t\t\tPILLAR.preventDefault(ev);\r\n\r\n\r\n\t\t\t\t},// End of addEventHandler() method\r\n\r\n\t\t\t\tstopEventBubble: function(ev){\r\n\r\n\r\n\t\t\t\t\tPILLAR.stopPropagation(ev);\r\n\r\n\r\n\t\t\t\t},// End of addEventHandler() method\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\r\n};// End of CORE EVENTS manipulation object\r\n\r\n\r\n\r\nCORE.prototype.ajax = function() {\r\n\r\n\r\n\t    const PILLAR = this.PILLAR\r\n\t\treturn {\r\n\r\n\t\t\t\tget: function(url,data,success,failure,type){\r\n\r\n\r\n\r\n\t\t\t\t\tPILLAR.ajax_get(url,data,success,failure,type);\r\n\r\n\r\n\r\n\t\t\t\t},// End of ajax get() method\r\n\r\n\t\t\t\tpost: function(url,data,success,failure,type){\r\n\r\n\r\n\r\n\t\t\t\t\tPILLAR.ajax_post(url,data,success,failure,type);\r\n\r\n\r\n\r\n\t\t\t\t},// End of ajax post() method\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t\t}\r\n\r\n};// End of CORE AJAX manipulation object\r\n\r\n\r\nCORE.prototype.validators = function(){\r\n\r\n\tconst PILLAR = this.PILLAR\r\n\treturn {\r\n\r\n\t\t isFunction: function (x) {\r\n\t\t\treturn PILLAR.is_function(x)\r\n\t\t  },\r\n\t\t  isArray: function (x) {\r\n\t\t\treturn PILLAR.is_array(x)\r\n\t\t  },\r\n\t\t  isDate: function (x) {\r\n\r\n\t\t\treturn PILLAR.is_date(x)\r\n\t\t  },\r\n\t\t  isObject: function (x) {\r\n\t\t\treturn PILLAR.is_object(x)\r\n\t\t  },\r\n\t\t  isString: function(x){\r\n\t\r\n\t\t\treturn PILLAR.is_string(x)\r\n\t\t  },\r\n\t\t  isValue: function (x) {\r\n\t\t\treturn PILLAR.is_value(x)\r\n\t\t  },\r\n\t\t  isNotFalsey: function(x) {\r\n\t\r\n\t\t\treturn PILLAR.is_not_falsey(x)\r\n\t\t  },\r\n\t\r\n\t\t  trimSpaces: function(x){\r\n\t\r\n\t\t\treturn PILLAR.trim_spaces(x)\r\n\t\t  },\r\n\t\t  isEqualab: function(a,b,f = null){\r\n\r\n\t\t\t return PILLAR.is_equal_ab(a,b,f)\r\n\t\t\t\r\n\t\t  },\r\n\r\n\t\t  isSameValue: function(x,y){\r\n\r\n\t\t\t\t\r\n\t\t\t\treturn PILLAR.is_same_value(x,y)\r\n\r\n\t\t  },\r\n\t\t  isValidEmail: function(e){\r\n\r\n\t\t\t\r\n\t\t\treturn PILLAR.is_valid_email(e)\r\n\r\n\r\n\t  \t},\r\n\t  \tisValidPassword: function(p){\r\n\r\n\t\treturn PILLAR.is_valid_password(p)\r\n\r\n  \t\t},\r\n\t\t  unlikeProps: function(a,b){\r\n\r\n\t\t\t return PILLAR.unlike_props(a,b)\t\t\t\t\r\n\r\n\t\t  },\r\n\t\t  contains: function(o,v){\r\n\r\n\t\t\treturn PILLAR.contains(o,v)\r\n\t\t  },\r\n\t\t  forOf: function(o,action,no){\r\n\r\n\t\t\t return  PILLAR.for_of(o,action,no)\r\n\t\t  },\r\n\t\t  addValuesTo: function(o,k,v){\r\n\r\n\t\t\treturn PILLAR.add_values_to(o,k,v)\r\n\r\n\t\t  },\r\n\t\t  findIn: function(x,i,f){\r\n\r\n\t\t\treturn PILLAR.find_in(x,i,f)\r\n\t\t  }\r\n\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nCORE.prototype.util = function(){\r\n\r\n\r\n\tconst PILLAR = this.PILLAR \r\n\r\n\t\r\n\treturn {\r\n\r\n\t\tmakeDirs: function(p,isFileName,callback){\r\n\r\n\t\t\treturn PILLAR.p_mkdirs(p, isFileName, callback);\r\n\t\t},\r\n\t\tmkdirsSync: function(abs, isFileName,callback){\r\n\r\n\t\t\treturn PILLAR.p_mkdirs(abs, isFileName, callback)\r\n\t\t},\r\n\t\tgetFiles: function(p,opts,callback){\r\n\r\n\t\t\treturn PILLAR.p_getFiles(p, opts, callback)\r\n\t\t},\r\n\t\tgetFile: function(f){\r\n\r\n\t\t\treturn PILLAR.p_getFile(f)\r\n\t\t},\r\n\t\tgetDirectories: function(p){\r\n\r\n\t\t\treturn PILLAR.p_getDirectories(p)\r\n\r\n\t\t},\r\n\t\tgetExtension: function(f,callback){\r\n\r\n\t\t\treturn PILLAR.p_getExtension(f,callback)\r\n\t\t},\r\n\t\tgenerateUniqueID: function(){\r\n\r\n\t\t\treturn PILLAR.p_generateUniqueID()\r\n\t\t},\r\n\t\tunikify: function(a){\r\n\r\n\t\t\treturn PILLAR.p_unikify(a)\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\r\n\t}\r\n\r\n}\r\n\r\n/*\r\n\r\n\tThe methods immediately after this method will be used for module inter communication, which is\r\n\ta way that modules communicate with each other indirectly.\r\n\t\r\n\r\n*/\r\n\r\nCORE.prototype.registerEvents = function(evts = {},module_id = '',mod_inst_id = ''){\r\n\r\n\tconsole.log('THE REGISTER MODULES METHOD')\r\n\tconsole.log(evts)\r\n\tconsole.log(module_id,mod_inst_id)\r\n\t\r\n\tif(evts && module_id && mod_inst_id){\r\n\r\n\r\n\t\tif(this.modules[module_id][mod_inst_id]){\r\n\t\t\t\r\n\t\t\tthis.modules[module_id][mod_inst_id].events = evts;\r\n\t\t\t\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n}// End of registerEvents method\r\n\r\n\r\nCORE.prototype.triggerEvent = function(evt){\r\n\r\n\t\r\n\t\r\n\r\n\tvar moduId = null;\r\n\r\n\tif(evt){\r\n\r\n\t\t// console.log('Event contains data')\r\n\t\tfor(let moduId in this.modules){\r\n\r\n\t\t\t// console.log('Modules contains modules')\r\n\r\n\t\t\tif(this.modules.hasOwnProperty(moduId)){\r\n\r\n\t\t\t\t// console.log('given module belongs to modules object')\r\n\t\t\t\tmoduId = this.modules[moduId];\r\n\r\n\t\t\t\tfor(let modInst in moduId){\r\n\r\n\t\t\t\t\t// console.log('Instances of a given moduleS')\r\n\t\t\t\t\t// console.log(moduId[modInst].events.type)\r\n\t\t\t\t\t// console.log(evt.type)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(moduId[modInst].events && moduId[modInst].events[evt.type]){\r\n\r\n\t\t\t\t\t\tmoduId[modInst].events[evt.type](evt.data);\r\n\r\n\t\t\t\t\t}// End of inner if statement\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}// End of for in statement\r\n\r\n\t}// End of outer evt object check\r\n\r\n\r\n\r\n\r\n\r\n\r\n}// End of triggerEvent method\r\n\r\n\r\nCORE.prototype.startModule = function(moduleId,modInstId){\r\n\r\n\r\n\r\n\r\n\t\tvar moduleID = moduleId;\r\n\r\n\t\tconsole.log('THE START MODULE') \r\n\t\tconsole.log(moduleId)\r\n\r\n\t\tif(this.modules[moduleID][modInstId]){\r\n\r\n\r\n\t\t\tif(moduleID !== 'anziiloger'){\r\n\r\n\t\t\t\tthis.modules['anziiloger']['anziiloger'].setDebugger(this.modules[moduleID][modInstId].constructor.name)\r\n\t\t\t}\r\n\t\t\tthis.modules[moduleID][modInstId].init(); \r\n\t\t\tif(moduleID === 'global'){\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('THE GLOBAL MODULES IS ABOUT TO RECEIVE MODULES')\r\n\t\t\t\t// console.log(Object.keys(this.modules))\r\n\t\t\t\r\n\t\t\t\tthis.modules[moduleID][modInstId].globals = Object.keys(this.modules)\r\n\t\t\t}\r\n\t\t}\r\n\r\n}// End of startModule() core method\r\n\r\n\r\n\r\nCORE.prototype.startAllModules = function(){\r\n\r\n\r\n\tfor(let modu in this.modules){\r\n\r\n\t\tvar modSuper = this.modules[mod];\r\n\r\n\t\tfor(let modInstId in modSuper){\r\n\r\n\r\n\r\n\t\t\ttry{\r\n\r\n\r\n\t\t\t\tthis.modules[modSuper][modInstId].init();\r\n\r\n\r\n\t\t\t}catch(e){\r\n\r\n\r\n\t\t\t\tconsole.log(e);\r\n\r\n\r\n\t\t\t}// End of try catch\r\n\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t}\r\n\r\n\r\n}// End of startAllModules() core method\r\n\r\n\r\nCORE.prototype.stopModule = function(moduleId,modInstId){\r\n\r\n\r\n\t\tvar moduleID = moduleId;\r\n\r\n\t\tif(this.modules[moduleID][modInstId]){\r\n\r\n\r\n\t\t\tthis.modules[moduleID][modInstId].destroy();\r\n\t\t}\r\n\r\n}// End of stopModule() core method\r\n\r\n\r\nCORE.prototype.stopAllModules = function(){\r\n\r\n\r\n\tfor(let modu in this.modules){\r\n\r\n\r\n\t\tvar modSuper = this.modules[mod];\r\n\r\n\t\tfor(let modInstId in modSuper){\r\n\r\n\r\n\r\n\t\t\ttry{\r\n\r\n\r\n\t\t\t\tthis.modules[modSuper][modInstId].destroy();\r\n\r\n\r\n\t\t\t}catch(e){\r\n\r\n\r\n\t\t\t\tconsole.log(e);\r\n\r\n\r\n\t\t\t}// End of try catch\r\n\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\r\n\t}\r\n\r\n\r\n}// End of stopAllModules() core method\r\n\r\n\r\n\r\nCORE.prototype.converts = function(){\r\n\r\n\t\tconst PILLAR = this.PILLAR\r\n\t\r\n\t\treturn {\r\n\r\n\t\t\tjsToJson: function(jsObject){\r\n\r\n\r\n\t\t\t\treturn PILLAR.js_to_json(jsObject);\r\n\t\t\t},\r\n\r\n\t\t\tjsonToJs: function(json){\r\n\r\n\r\n\t\t\t\treturn PILLAR.json_to_js(json);\r\n\r\n\t\t\t},\r\n\t\t\tclone: function(c){\r\n\r\n\r\n\t\t\t\treturn PILLAR.clone(c);\r\n\r\n\t\t\t},\r\n\t\t\tobjectToArray: function(o={},key=false){\r\n\r\n\t\t\t\treturn PILLAR.object_to_array(o,key)\r\n\t\t\t},\r\n\t\t\tstringToArray: function(str,sep){\r\n\r\n\t\t\t\treturn PILLAR.string_to_array(str,sep)\r\n\t\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n}\r\n\r\nCORE.prototype.sanna = function(){\r\n\t\r\n\r\n\tconst self = this\r\n\t   \r\n\treturn {\r\n\r\n\t\t\t\r\n\t\t\tmodules: {\r\n\r\n\t\t\t\tvalidators: {\r\n\r\n\t\t\t\t\temit: function(comp){\r\n\r\n\t\t\t\t\t\tif(!(comp.hasOwnProperty('emit'))){\r\n\r\n\t\t\t\t\t\t\t// console.log(self.sanna().modules)\r\n\t\t\t\t\t\t\tcomp.emit = self.sanna().modules.addiks.emit.bind(comp)\r\n\r\n\t\t\t\t\t\t}else if((typeof comp.emit !== 'function')){\r\n\r\n\t\t\t\t\t\t\tthrow new Error('Emit is a reserved Akii method')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlistens: function(comp){\r\n\r\n\t\t\t\t\t\t// console.log('THE COMPONENT RUNS')\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!(comp.hasOwnProperty('listens'))){\r\n\r\n\t\t\t\t\t\t\t// console.log('THE LISTENS COMP PROP')\r\n\t\t\t\t\t\t\tcomp.listens = self.sanna().modules.addiks.listens.bind(comp)\r\n\t\t\t\t\t\t\t// console.log(comp)\r\n\r\n\t\t\t\t\t\t}else if((typeof comp.listens !== 'function')){\r\n\r\n\t\t\t\t\t\t\tthrow new Error('Listens is a reserved ANZii method')\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlog: function(comp){\r\n\r\n\t\t\t\t\t\tcomp.log = self.sanna().modules.addiks.log.bind(comp)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogSync: function(comp){\r\n\r\n\t\t\t\t\t\tcomp.logSync = self.sanna().modules.addiks.log.bind(comp)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tquery: function(comp){\r\n\r\n\t\t\t\t\t\tcomp.query = self.sanna().modules.addiks.query.bind(comp)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\taddiks: {\r\n\r\n\t\t\t\t\temit:  function(data){\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tconst self = this \r\n\t\t\t\t\t\tconst pao = this.pao \r\n\t\t\t\t\t\t// self.log(self.constructor.name,'is emitting event:',data.type,'with data: ')\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpao.pa_notifyEvent({\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\ttype: data.type,\r\n\t\t\t\t\t\t\t\tdata: data.data\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t})\t   \t  \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlistens: function(evehandles){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst self = this \r\n\t\t\t\t\t\tconst pao = this.pao \r\n\r\n\t\t\t\t\t\tconsole.log('THE VALUE OF SELF')\r\n\t\t\t\t\t\tconsole.log(self)\r\n\r\n\t\t\t\t\t\tself.log('MODULE',self.constructor.name, 'listens to event(s):',evehandles)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// const mId = self.constructor.name.toLowerCase()\r\n\t\t\t\t\t\t// const mInsId = self.constructor.name.toLowerCase() \r\n\t\t\t\t\t\tconst mId = pao.moduleMeta.moduleId\r\n\t\t\t\t\t\tconst mInsId = pao.moduleMeta.modInstId \r\n\t\t\t\t\t\tconsole.log('LISTENS METHOD RECEIVED A CALL')\r\n\t\t\t\t\t\tconsole.log(pao.moduleMeta)\r\n\t\t\t\t\t\tconsole.log(pao.moduleMeta.modInstId)\r\n\t\t\t\t\t\t// console.log(mInsId)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpao.pa_notifyListen(\r\n\t\t\t\t\t\t\t\tevehandles\r\n\t\t\t\t\t\t\t,mId,mInsId)\t   \t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlog: function(message= 'No message provided',type = 'console'){\r\n\r\n\t\t\t\t\t\tconst self = this \r\n\t\t\t\t\t\tconst pao = this.pao \r\n\t\t\t\t\t\tlet data = {message: message,type: type}\r\n\t\t\t\t\t\tdata.source = self.constructor.name\r\n\t\t\t\t\t\tself.emit({type:'anziiloger-log',data: data})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogSync: function(message= 'No message provided',type = 'console'){\r\n\r\n\t\t\t\t\t\tconst self = this \r\n\t\t\t\t\t\tconst pao = this.pao \r\n\t\t\t\t\t\tlet data = {message: message,type: type}\r\n\t\t\t\t\t\tdata.source = self.constructor.name \r\n\t\t\t\t\t\tdata.sync = true\r\n\t\t\t\t\t\tself.emit({type:'anziiloger-log',data: data})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tquery: function(model=null,document = null,handler= null){\r\n\r\n\t\t\t\t\t\tconst self = this \r\n\t\t\t\t\t\tconst pao = self.pao \r\n\r\n\r\n\t\t\t\t\t\tif(!model || !document){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthrow new Error('Query method missing required parameters')\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlet modelFrags = pao.pa_isString(model) ? pao.pa_stringToArray(model,'.') : model \r\n\t\t\t\t\t\t\t\tconsole.log(pao.pa_stringToArray)\r\n\t\t\t\t\t\t\t\tconsole.log(modelFrags)\r\n\t\t\t\t\t\t\t\tif(modelFrags.length === 3){\r\n\r\n\t\t\t\t\t\t\t\t\tlet mo = {vendor: modelFrags[0],table: modelFrags[1],operation: modelFrags[2]}\r\n\t\t\t\t\t\t\t\t\tself.emit({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'data-hive-request',\r\n\t\t\t\t\t\t\t\t\t\tdata: {model: mo,document,handler}\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t}else if(model[1].trim() === 'PROCEDURE' || 'JOIN' || 'SEARCH' || 'TRANSACTION' || 'UPDATEANDTAKE' || 'INSERTANDTAKE' || 'DELETEANDTAKE' || 'DELETEMULTIPLE'){\r\n\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlet mo = {vendor: modelFrags[0],table: modelFrags[1].toLowerCase(),operation: modelFrags[1].toLowerCase()}\r\n\t\t\t\t\t\t\t\t\tself.emit({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'data-hive-request',\r\n\t\t\t\t\t\t\t\t\t\tdata: {model: mo,document,handler}\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tconsole.log('THE ARRAY')\r\n\t\t\t\t\t\t\t\t\tconsole.log(modelFrags)\r\n\t\t\t\t\t\t\t\t\tthrow new Error('Query method requires database vendor,table and operation')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\trunForModules: function(comp){\r\n\r\n\t\r\n\t\t\t\tlet validators = this.modules.validators\r\n\t\t\t\t\r\n\t\t\t\t\tfor(let v in validators){\r\n\r\n\t\t\t\t\t\tvalidators[v](comp)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t},\r\n\t\t\r\n\r\n\t}\r\n\r\n\t\r\n \r\n \r\n \r\n \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\nexport default CORE;","\r\n\r\nfunction PAO(appPillar){\r\n\r\n\r\n\tthis.core = appPillar; \r\n\tthis.PROMPT = appPillar.PROMPT\r\n\r\n\r\n\r\n}// End of PAO\r\n\r\nPAO.prototype.create = function(moduleID,modInstId){\r\n\r\n\tconst pa_core = this.core;\r\n\t// const util = pa_core.util\r\n\t// var events = pa_core.events()\r\n\t// var ajax = pa_core.ajax()\r\n\t// const validators = pa_core.validators()\r\n\tconst util = pa_core.validators().forOf(pa_core.util(),(p,a)=>{ return {p: [`pa_${p}`],v : a}})\r\n\tconst converts = pa_core.validators().forOf(pa_core.converts(),(p,a)=>{ return {p: [`pa_${p}`],v : a}})\r\n\tconst validators = pa_core.validators().forOf(pa_core.validators(),(p,a)=>{ return {p: [`pa_${p}`],v : a}})\r\n\t// console.log('THE VALIDATORS')\r\n\t// console.log(validators)\r\n\r\n\t// console.log('The value of Instance Id')\r\n\t// console.log(modInstId)\r\n\r\n\tif(modInstId){\r\n\r\n\t\t// console.log('The module has a view')\r\n\r\n\t\t// var CONTAINER = dom.queryCont('data-'+moduleID, modInstId);\r\n\t\r\n\t\tvar meta = {\r\n\t\t\tmoduleId: moduleID,\r\n\t\t\tmodInstId: modInstId\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t}else{\r\n\r\n\t\t// console.log('The module has no view')\r\n\t\tvar meta = {\r\n\t\t\tmoduleId: moduleID,\r\n\t\t\tmodInstId: moduleID\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\r\n\r\n\r\n\treturn {\r\n\r\n\r\n\t\t\t// DOM manipulations\r\n\r\n\t\t\t// view: CONTAINER,\r\n\t\t\tmoduleMeta: meta,\r\n\t\t\t...util,\r\n\t\t\t...validators,\r\n\t\t\t...converts,\r\n\r\n\r\n\t\t// \tpa_getChildByClass: function(selector){\r\n\t\t\t\t\t\r\n\t\t// \t\tif(CONTAINER){\r\n\r\n\t\t// \t\t\treturn CONTAINER.queryChildByClass(selector);\r\n\t\t// \t\t}\r\n\t\t\t\r\n\t\t\t\t\t\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\r\n\t\t// \tpa_getAllChildByClass: function(selector){\r\n\t\t\t\t\t\r\n\t\t// \t\t\tif(CONTAINER){\r\n\r\n\t\t// \t\t\t\treturn CONTAINER.queryAllChildByClass(selector);\r\n\r\n\r\n\t\t// \t\t\t}\r\n\t\t\t\t\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getById: function(selector){\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\t\treturn dom.queryById(selector);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getByTag: function(parent,selector){\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\treturn dom.queryByTag(parent,selector);\r\n\r\n\r\n\r\n\t\t// },\r\n\r\n\t\t// \tpa_getByAttribute: function(attrib){\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\treturn dom.queryByAttribute(attrib);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\r\n\t\t// \tpa_getAllChildByAttribute: function(attrib){\r\n\t\t\t\t\t\r\n\t\t// \t\t\treturn CONTAINER.queryAllChildByAttribute(attrib);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getChildByAttribute: function(attrib){\r\n\t\t\t\t\t\r\n\t\t// \t\t\treturn CONTAINER.queryChildByAttribute(attrib);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\r\n\r\n\t\t// \tpa_getNodeType: function(node){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\r\n\t\t// \t\treturn dom.queryNodeType(node);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\r\n\t\t// \tpa_createElement: function(selector){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\tvar el = dom.createElement(selector);\r\n\r\n\t\t// \t\treturn el;\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_isEqualNode: function(node1,node2){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\treturn dom.isEqualNode(node1,node2);\r\n\r\n\t\t// \t\t// return el;\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_copyDeep: function(el){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\tvar el = dom.copyDeep(el);\r\n\r\n\t\t// \t\treturn el;\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_copyShallow: function(el){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\tvar el = dom.copyShallow(el);\r\n\r\n\t\t// \t\treturn el;\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_addProperty: function(el,attrib,attribValue){\r\n\r\n\r\n\t\t// \t\tif(typeof window === \"undefined\"){\r\n\r\n\t\t// \t\t\treturn dom.addProperty(el,attrib,attribValue);\r\n\r\n\t\t// \t\t}else{\r\n\r\n\t\t// \t\t\t dom.addProperty(el,attrib,attribValue);\r\n\r\n\t\t// \t\t}\r\n\t\t\t\t\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_removeProperty: function(el,attrib){\r\n\r\n\r\n\t\t// \t\tdom.removeProperty(el,attrib);\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_insertInner: function(el,content){\r\n\r\n\t\t// \t\tif(typeof window === \"undefined\"){\r\n\r\n\t\t// \t\t\treturn dom.insertInner(el,content);\r\n\r\n\t\t// \t\t}else{\r\n\r\n\t\t// \t\t\tdom.insertInner(el,content);\r\n\r\n\t\t// \t\t}\r\n\t\t\t\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_addChild: function(parent,child){\r\n\r\n\r\n\t\t// \t\tif(typeof window === \"undefined\"){\r\n\r\n\t\t// \t\t\treturn dom.addChild(parent,child);\r\n\r\n\t\t// \t\t}else{\r\n\r\n\t\t// \t\t\t dom.addChild(parent,child);\r\n\r\n\t\t// \t\t}\r\n\t\t\t\t\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getClasses: function(element){\r\n\r\n\r\n\t\t// \t\treturn dom.getClasses(element);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_addClass: function(classlist,classname){\r\n\r\n\r\n\t\t//  \t\tdom.addClass(classlist,classname);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_removeClass: function(classlist,classname){\r\n\r\n\r\n\t\t// \t\t dom.removeClass(classlist,classname);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_toggleClass: function(classlist,classname){\r\n\r\n\r\n\t\t// \t\t dom.toggleClass(classlist,classname);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_hasClass: function(classlist,classname){\r\n\r\n\r\n\t\t// \t\t return dom.hasClass(classlist,classname);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getStyles: function(element){\r\n\r\n\r\n\t\t// \t\t return dom.getStyles(element);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getAttributes: function(element){\r\n\r\n\r\n\t\t// \t\t return dom.getAttributes(element);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_getParent: function(child){\r\n\r\n\r\n\t\t// \t\treturn dom.getParent(child);\r\n\r\n\r\n\t\t//    },\r\n\r\n\r\n\r\n\r\n\r\n\t\t// \t// EVENTS manipulations\r\n\r\n\t\t// \tpa_addEvent: function(el,ev,handler){\r\n\t\t\t\t\t\r\n\t\t// \t    if(typeof window === \"undefined\"){\r\n\r\n\t\t// \t\t\treturn\tevents.addEventHandler(el,ev,handler);\r\n\r\n\t\t// \t\t}else{\r\n\r\n\t\t// \t\t\tevents.addEventHandler(el,ev,handler);\r\n\r\n\t\t// \t\t}\r\n\t\t\t\t\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_removeEvent: function(el,ev,handler){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\t\tevents.addEventHandler(el,ev,handler);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\r\n\t\t// \tpa_getEvent: function(ev){\r\n\r\n\r\n\t\t// \t\treturn events.getEvent(ev);\r\n\r\n\r\n\t\t// \t},// End of addEventHandler() method\r\n\r\n\t\t// \tpa_getTarget: function(ev){\r\n\r\n\r\n\t\t// \t\treturn events.getTarget(ev);\r\n\r\n\r\n\t\t// \t},// End of addEventHandler() method\r\n\r\n\r\n\t\t// \tpa_preventNormal: function(ev){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\t\tevents.preventNormal(ev);\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_stopEventBubble: function(ev){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\tevents.stopEventBubble(ev);\r\n\r\n\r\n\t\t// },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t// \t// AJAX communications\r\n\t\t\t\r\n\r\n\r\n\t\t// \tpa_ajaxGet: function(url,data,success,failure,type){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\tajax.get(url,data,success,failure,type);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_ajaxPost: function(url,data,success,failure,type){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t// \t\tajax.post(url,data,success,failure,type);\r\n\r\n\r\n\r\n\t\t// \t},\r\n\r\n\r\n\t\t// \t// MODULE communications\r\n\r\n\r\n\t\t\tpa_notifyListen: function(evts={},moduleID='',modInstId=''){\r\n\r\n\t\t\t\tconsole.log('The notifyListen event has been successfuly invoked') \r\n\t\t\t\tconsole.log(evts) \r\n\t\t\t\tconsole.log(moduleID)\r\n\t\t\t\tconsole.log(modInstId)\r\n\t\t\t\tpa_core.registerEvents(evts,moduleID,modInstId);\r\n\r\n\t\t\t},// End of notifyListen() for events to listen to\r\n\r\n\r\n\t\t\tpa_notifyEvent: function(evt = {}){\r\n\r\n\t\t\t\t\t// console.log('The notify event has been successfuly invoked')\r\n\t\t\t\t\tpa_core.triggerEvent(evt);\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t},// end of notifyEvent() occurence\r\n\r\n\t\t// \tpa_validate: function(data){\r\n\r\n\r\n\t\t// \t\tvar validateResult = pa_core.validator.validate(data);\r\n\r\n\t\t// \t\treturn validateResult;\r\n\r\n\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_jsToJson: function(jsObject){\r\n\r\n\r\n\t\t// \t\treturn converts.jsToJson(jsObject);\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_jsonToJs: function(json){\r\n\r\n\t\t\t\t\r\n\t\t// \t\treturn converts.jsonToJs(json);\r\n\t\t// \t},\r\n\r\n\t\t// \tpa_clone: function(c){\r\n\r\n\t\t\t\t\r\n\t\t// \t\treturn converts.clone(c);\r\n\t\t// \t},\r\n\t\t// \tpa_objectToArray: function(o){\r\n\r\n\t\t// \t\treturn converts.objectToArray(o)\r\n\t\t// \t}\r\n\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\r\n\r\n\r\n\r\n\t}// End OF return\r\n\r\n\r\n\r\n\t\r\n\r\n}// End of PAO create() method\r\n\r\nexport default PAO\r\n\r\n","\nimport * as methods from \"./methods\"\n\n // Dependecies \n \n const winston = require('winston') \n const debugr = require('debug')\n\n\n\nclass Anziiloger{\n  \n  \n  constructor(pao){\n\n    this.pao = pao\n    this.winlo = winston \n    this.debugr = debugr\n    this.logger = null\n    this.debugas = {}\n    this.defaultTransports = [\n    {\n        \n        trans: 'File',\n        level: 'info', \n        \n        handleExceptions: true, \n        json: true,\n        label: 'Anzilloger',\n        maxsize: 5242880,\n        maxFiles: 5,\n        timestamp: true,\n        colorize: false\n    },\n    {\n        trans: 'Console',\n        level: 'debug',\n        handleExceptions: true, \n        json: false,\n        timestamp: true,\n        colorize: true\n    }\n    ]\n  \n  \n    \n     this.init = methods.init\n     this.handleLogRequest = methods.handleLogRequest\n     this.handleAnziilogerConfig = methods.handleAnziilogerConfig \n     this.info = methods.info \n     this.warn = methods.warn \n     this.error = methods.error \n     this.debug = methods.debug \n     this.setDebugger = methods.setDebugger\n     \n     \n    \n  }\n\n\n  \n\n}\n\nexport default Anziiloger","\nimport Anziiloger from \"./anziiloger\";\n\nexport default Anziiloger\n","\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n  this.setDebugger(this.constructor.name) \r\n//   this.handleAnziilogerConfig()\r\n  console.log('Anziiloger has been initialised') \r\n  console.log(this.pao)\r\n  this.listens({\r\n\t\t\r\n\t'config-anziiloger': this.handleAnziilogerConfig.bind(this),\r\n\t'anziiloger-log': this.handleLogRequest.bind(this)\r\n  \r\n  })\r\n\r\n\t\r\n}\r\n\r\nexport const handleLogRequest = function(data){\r\n\r\n\tconst self = this \r\n\r\n\r\n\tif(self.logger){\r\n\r\n\t\tswitch(data.type){\r\n\r\n\t\t\tcase 'info': self.info(data)\r\n\t\t\tbreak\r\n\t\t\tcase 'warn': self.warn(data)\r\n\t\t\tbreak \r\n\t\t\tcase 'error': self.error(data)\r\n\t\t\tdefault: self.debug(data)\r\n\t\t}\r\n\r\n\t}else{\r\n\r\n\t\tconsole.log(data.source,'logged message: ',data.message,' of type ',data.type)\r\n\r\n\t}\r\n\t\r\n\t\r\n\r\n}\r\n\r\nexport const handleAnziilogerConfig = function(data){\r\n\t\r\n\tconst self = this \r\n\t// console.log('THE DEUGAS')\r\n\t// console.log(self.debugas)\r\n\tconst pao = self.pao\r\n\t\r\n\t// console.log('ANZII LOGGER IS CATCHING AN EVENT FROM CONFIG')\r\n\t// console.log(data)\r\n\t// data.hasOwnProperty('transports')\r\n\t//   ? pao.pa_isArray(data.transports) \r\n\t// \t ? self.defaultTransports.concat(data.transports)\r\n\t// \t : console.log('Config: invalid def..  ')\r\n\t//   :''\r\n\r\n\t\r\n\tlet now = new Date()\r\n\tself.logger = new self.winlo.createLogger({\r\n\t\t\r\n\t\t transports: [ \r\n\t\t\t\t// new  self.winlo.transports.File(\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// \t{\r\n\r\n\r\n\t\t\t\t// \tname: 'production',\r\n\t\t\t\t// \tlevel: 'info', \r\n\t\t\t\t// \tfilename: './logs/production.log',\r\n\t\t\t\t// \thandleExceptions: true, \r\n\t\t\t\t// \tjson: true,\r\n\t\t\t\t// \tlabel: 'Anzilloger',\r\n\t\t\t\t// \tmaxsize: 5242880,\r\n\t\t\t\t// \tmaxFiles: 5,\r\n\t\t\t\t// \ttimestamp: now,\r\n\t\t\t\t// \tcolorize: false}\r\n\t\t\t\t  \r\n\t\t\t\t// ),\r\n\t\t\t\t// new  self.winlo.transports.File(\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// \t{\r\n\r\n\r\n\t\t\t\t// \tname: 'errors',\r\n\t\t\t\t// \tlevel: 'error', \r\n\t\t\t\t// \tfilename: './logs/errors.log',\r\n\t\t\t\t// \thandleExceptions: true, \r\n\t\t\t\t// \tjson: true,\r\n\t\t\t\t// \tlabel: 'Anzilloger',\r\n\t\t\t\t// \tmaxsize: 5242880,\r\n\t\t\t\t// \tmaxFiles: 5,\r\n\t\t\t\t// \ttimestamp: true,\r\n\t\t\t\t// \tcolorize: false}\r\n\t\t\t\t  \r\n\t\t\t\t// ),\r\n\t\t\t\tnew  self.winlo.transports.Console(\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t{\r\n\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tlevel: 'debug', \r\n\t\t\t\t\tlabel: 'Anzilloger',\r\n\t\t\t\t\ttimestamp: true,\r\n\t\t\t\t\tcolorize: true\r\n\t\t\t\t}\r\n\t\t\t\t  \r\n\t\t\t\t)\r\n\r\n\t\t\t \r\n\t\t ]\r\n\t\t\r\n\t})\r\n\r\n\t\r\n   \r\n}\r\n\r\n\r\n\r\nexport const info = async function(log){\r\n   \r\n   \r\n\tconst self = this \r\n\tconst pao = self.pao \r\n\tconst contains = pao.pa_contains \r\n\t\r\n\tif(contains(log,'sync')){\r\n\t\tawait self.logger.info(`${log.source}: ${log.message}`)\r\n\t}else{\r\n\t\t\r\n\t\tself.logger.info(`${log.source}: ${log.message}`)\r\n\t}\r\n\t// self.log('THE INFO METHOD RECEIVES A CALL')\r\n\t// self.log(log) \r\n\t\r\n\t\r\n   \r\n} \r\n\r\n\r\n\r\nexport const debug = async function(log){\r\n   \r\n   const self = this \r\n\tconst pao = self.pao \r\n\tconst contains = pao.pa_contains \r\n\t\r\n\tif(contains(log,'sync')){ \r\n\t\r\n\t\t\r\n\tif(self.debugas.hasOwnProperty(log.source.toLowerCase())){\r\n\r\n\t\t// console.log('THE DEBUG MODULE IS USED')\r\n\t\t// console.log(self.debugas)\r\n\t\tawait self.debugas[log.source.toLowerCase()](log.message)\r\n\t}else{\r\n\r\n\t\tawait self.logger.debug(`${log.source}: ${log.message}`)\r\n\r\n\t}\r\n\t\r\n\t\t\r\n\t}else{\r\n\t\t\r\n\t\t\r\n\tif(self.debugas.hasOwnProperty(log.source.toLowerCase())){\r\n\r\n\t\t// console.log('THE DEBUG MODULE IS USED')\r\n\t\t// console.log(self.debugas)\r\n\t\tself.debugas[log.source.toLowerCase()](log.message)\r\n\t}else{\r\n\r\n\t\tself.logger.debug(`${log.source}: ${log.message}`)\r\n\r\n\t}\r\n\t\r\n\t}\r\n\t\r\n   \r\n} \r\n\r\n\r\n\r\n\r\nexport const warn = async function(log){\r\n   \r\n   \r\n\t//const self = this \r\n\t//self.logger.warn(`${log.source}: ${log.message}`)\r\n   \r\n   const self = this \r\n\tconst pao = self.pao \r\n\tconst contains = pao.pa_contains \r\n\t\r\n\tif(contains(log,'sync')){\r\n\t\tawait self.logger.warn(`${log.source}: ${log.message}`)\r\n\t}else{\r\n\t\t\r\n\t\tself.logger.warn(`${log.source}: ${log.message}`)\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport const error = async function(log){\r\n   \r\n   \r\n\t//const self = this \r\n\t//self.logger.error(`${log.source}: ${log.message}`)  \r\n\t\r\n\t\r\n   \tconst self = this \r\n\tconst pao = self.pao \r\n\tconst contains = pao.pa_contains \r\n\t\r\n\tif(contains(log,'sync')){\r\n\t\tawait self.logger.error(`${log.source}: ${log.message}`)\r\n\t}else{\r\n\t\t\r\n\t\tself.logger.error(`${log.source}: ${log.message}`)\r\n\t}\r\n\r\n}\r\n\r\nexport const setDebugger = async function(mod){\r\n\r\n\tconst self = this \r\n\tlet name = mod.toLowerCase()\r\n\tself.debugas[name] = self.debugr(`anzii:${name}`)\r\n}\r\n\r\n\r\n","\r\nimport * as methods from \"./methods\"\r\nlet config = null\r\n\r\ntry {\r\n\r\n  const conif = require('/.config') \r\n  config = conif.default\r\n  console.log('Config file has been successfully required')\r\n  \r\n} catch (error) {\r\n  \r\n  console.log('No configuration file has been configured')\r\n  config = null\r\n}\r\n// const config = require('/confy').default\r\n\r\n// import config from '/confy'\r\nconsole.log('THE CONFIG IN CONFIG')\r\nconsole.log(config)\r\n\r\n// Dependecies \r\n\r\n\r\nconst envObserver = require('config')\r\nconst supportsColor = require('supports-color');\r\n \r\n\r\n\r\n\r\n\r\nclass Config{\r\n  \r\n  \r\n  constructor(pao){\r\n\r\n    this.pao = pao\r\n    this.config = config \r\n    this.envObserver = envObserver \r\n    this.supportsColor = supportsColor\r\n    this.env = 'development'\r\n    this.aliases = {development: 'dev',production: 'prod',staging: 'stage'}\r\n\r\n\r\n    this.init = methods.init\r\n    this.configure = methods.configure\r\n    this.enviroment = methods.enviroment\r\n  }\r\n\r\n\r\n  \r\n\r\n}\r\n\r\nexport default Config","\nimport Config from \"./config\";\n\nexport default Config\n","\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n\tthis.log('Config has been initialised') \r\n\tthis.configure()\r\n\r\n\t\r\n}\r\n\r\n\r\nexport const configure = function(){\r\n\t\r\n\tconst self = this\r\n\tlet config = self.config\r\n\t\r\n\r\n\t// console.log('THE VALUE OF CONFIG SELF.CONFIG')\r\n\t// console.log(self.config)\r\n\r\n\r\n\tif(!self.config){\r\n\r\n\r\n\t\tself.emit({\r\n\t\t\t\t\r\n\t\t\ttype: `config-anziiloger`,\r\n\t\t\tdata: {level: 'info'}\r\n\t\t\t\r\n\t\t})\r\n\r\n\t\tself.emit({\r\n\t\t\t\t\r\n\t\t\ttype: `config-server`,\r\n\t\t\tdata: `server`\r\n\t\t\t\r\n\t\t})\r\n\t\t\r\n\t\treturn \r\n\t}\r\n\r\n\tif(self.config){\r\n\r\n\t\tif(self.config.hasOwnProperty('logger')){\r\n\r\n\t\t\tconsole.log('THE LOGGER IS THE FIRST MODULE TO GET CONFIG')\r\n\t\t\tself.emit({\r\n\t\t\t\t\r\n\t\t\t\ttype: `config-anziiloger`,\r\n\t\t\t\tdata: self.config.logger\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t\tself.enviroment()\r\n\t\tself.config.hasOwnProperty('cluster') \r\n\t\t\t? (self.emit({type: 'config-system',data: self.config.cluster})) : '' \r\n\r\n\t\t\r\n\t\tfor(let c in config){\r\n\t\t\r\n            console.log('The module in Config')\r\n\t\t\tconsole.log(c)\r\n\r\n\t\t\tc === 'router'\r\n\t\t\t\t? config.views \r\n\t\t\t\t\t? (self.emit({type:'config-request',data: config[c]}),self.emit({type:'config-view',data:{routes: config[c],handlers: config.views} })) \r\n\t\t\t\t\t: (self.emit({type:'config-request',data: config[c]}),self.emit({type:'config-view',data: config[c]}))\r\n\t\t\t\t:''\r\n\t\t\t\r\n\r\n\t\t\tif(c !== 'logger' || c !== 'views'){\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\r\n\t\t\t\tself.emit({\r\n\t\t\t\t\t\r\n\t\t\t\t\ttype: `config-${c}`,\r\n\t\t\t\t\tdata: config[c]\r\n\t\t\t\t\t\r\n\t\t\t\t}) \r\n\r\n\t\t\t\tc === 'domain'\r\n\t\t\t\t\t? (self.emit({type:'config-domain-resources',data: ''}))\r\n\t\t\t\t\t:''\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\r\n\t\r\n\t}\r\n\r\n\t\r\n\r\n\r\n\t\r\n\r\n}\r\n\r\nexport const enviroment = function(){\r\n\r\n\tconst self = this\r\n\tlet envObserver = self.envObserver\r\n\tlet supportsColor = self.supportsColor\r\n\r\n\tconsole.log('THE CURRENT ENVIROMENT')\r\n\t// console.log(envObserver)\r\n\t\r\n\tif (supportsColor.stdout) {\r\n\t\tconsole.log('Terminal stdout supports color');\r\n\t}\r\n\t\r\n\tif (supportsColor.stdout.has256) {\r\n\t\tconsole.log('Terminal stdout supports 256 colors');\r\n\t}\r\n\t\r\n\tif (supportsColor.stderr.has16m) {\r\n\t\tconsole.log('Terminal stderr supports 16 million colors (truecolor)')\r\n\t}\r\n\t\r\n\r\n\tif(self.envObserver.has('enviroment')){\r\n\r\n\t\tif(self.aliases.hasOwnProperty(envObserver.enviroment)){\r\n\r\n\t\t\tself.env = self.aliases[envObserver.enviroment] \r\n\t\t\tlet envCofig = envObserver.get(self.env)\r\n\r\n\t\t\tif(envCofig.hasOwnProperty('database')){\r\n\r\n\t\t\t\tlet clients = [] \r\n\t\t\t\tlet db = envCofig.database\r\n\t\t\t\tconsole.log('THE DB')\r\n\t\t\t\tconsole.log(db)\r\n\r\n\t\t\t\tfor(let c in db){\r\n\r\n\t\t\t\t\tconsole.log('THE VALUE Of C')\r\n\t\t\t\t\tconsole.log(c)\r\n\t\t\t\t\tconsole.log(db[c])\r\n\t\t\t\t\tclients.push({\r\n\r\n\t\t\t\t\t\tname: c,\r\n\t\t\t\t\t\tconnect: db[c].connect\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tconsole.log('THE DATABASE CLIENTS')\r\n\t\t\t\tconsole.log(clients)\r\n\t\t\t\tself.emit({\r\n\t\t\t\t\r\n\t\t\t\t\ttype: `config-dman`,\r\n\t\t\t\t\tdata: {clients: clients}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(envObserver.has('appOrphic')){\r\n\t\t\t\tconsole.log('THE JWT appOrphic')\r\n\t\t\t\tconsole.log(envObserver)\r\n\t\t\t\tconsole.log(envObserver.appOrphic)\r\n\t\t\t\tconsole.log(envObserver.appOrphic.flaDev)\r\n\t\t\t\tself.emit({type: 'save-jwt-key',data:{key:envObserver.appOrphic['flaDev']}})\r\n\t\t\t}else{\r\n\r\n\t\t\t\tself.emit({type: 'save-jwt-key',data: {key:'f124sfet48tq3dfmlvoszx1'}})\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\r\n\t\t\tself.log('Enviroment config invalid, resorting to default','warn')\r\n\r\n\t\t}\r\n\t}\r\n\t// let db = self.envObserver.get('dev')\r\n\t// console.log(db)\r\n\t// console.log(db.database.mysql.connect.user)\r\n\r\n}\r\n","\nimport * as methods from \"./methods\"\n\n\n\nclass Dao{\n  \n  \n  constructor(pao){\n\n    this.pao = pao \n    this.DBS = null\n  \n    \n\n\n\n    \n     this.init = methods.init\n     this.handleDataHiveRequest = methods.handleDataHiveRequest \n     this.handleDaoTakeDbs = methods.handleDaoTakeDbs\n  \n     \n    \n  }\n\n\n  \n\n}\n\nexport default Dao","\nimport Dao from \"./dao\";\n\nexport default Dao\n","\n\n\nexport const init = function(){\n  \n  \n  console.log('Dao has been initialised') \n  this.listens({\n\t\t\n    'dao-take-dbs': this.handleDaoTakeDbs.bind(this),\t\n\t'data-hive-request': this.handleDataHiveRequest.bind(this)\n  \n  })\n\n\t\n}\n\n\nexport const handleDataHiveRequest = function(data){\n\n\t\n\tconst self = this \n\tconst pao = self.pao \n\tconsole.log('DAO')\n\tconsole.log(data)\n\t\n\tif(!pao.pa_contains(self.DBS,data.model.vendor)){\n\n\t\tthrow new Error('Specified database client is unknown')\n\t}else{\n\n\t\tlet model = data.model\n\t\tself.emit({\n\t\t\ttype: `${model.vendor}-data-request`,\n\t\t\tdata: {conn: self.DBS[model.vendor],table: model.table,opi: model.operation,query: data.document,outComehandler: data.handler}\n\t\t})\n\n\t}\n\t\n\n\n} \n\n\nexport const handleDaoTakeDbs = function(data){\n\n\t\n\tconst self = this\n\tself.log('Handling Hive Request')\n\tif(self.DBS === null){\n\n\t\tself.DBS = {} \n\t\tself.DBS[data.vendor] = data.conn\n\t}else{\n\n\t\tself.DBS[data.vendor] = data.conn\n\n\t}\n\t\n\t// self.log('The dbs inside self.DBS')\n\t// console.log(self.DBS)\n\n}\n\n\n","\nimport * as methods from \"./methods\"\n\n\n// \n\n// const dman = require('redis')\n\n\nclass Dman{\n  \n  \n  constructor(pao){\n\n    this.pao = pao\n    this.DBS   = [] \n    this.supportedClients = {\n    \t\n    \t// mongo: {\n    \t\t\n      //   protocol: 'mongopro',\n      //   connectMethods: ''\n    \t// \t// connect: (0\n    \t\t\n    \t// },\n    \tmysql: {\n        \n        protocol: '',\n        connectMethod: 'createConnection'\n    \t},\n    \t// pg: {\n    \t\t\n    \t// },\n    \t// redis: {\n    \t\t\n    \t// },\n    \t// sqlite: {\n    \t\t\n    \t\t\n    \t// }\n    \t\n    \t\n    }\n    \n\n\n    // // methods\n\n     this.init = methods.init\n     this.handleConfigureDBMan = methods.handleConfigureDBMan\n     this.connectToClient = methods.connectToClient \n     this.getClientDriver = methods.getClientDriver \n     this.connect = methods.connect\n\n  }\n\n\n  \n\n}\n\nexport default Dman","\nimport Dman from \"./dman\";\n\nexport default Dman\n","\r\n\r\nexport const init = function(){\r\n\t\r\n\tthis.log('Dman has been initialised')\r\n\tthis.listens({\r\n\r\n\t\t 'config-dman' : this.handleConfigureDBMan.bind(this)\r\n\t}) \r\n\t\r\n\t\r\n  //   self.query('mysql',sql,process)\r\n\t\r\n}\r\n\r\nexport const handleConfigureDBMan = function(data){\r\n  \r\n  const self = this \r\n  const pao = self.pao\r\n  console.log('THE DBMAN HANLDECONFIGURE') \r\n  console.log('THE SUPPORTED CLIENTS')\r\n  console.log(self.supportedClients)\r\n  \r\n  if(!pao.pa_isObject(data)){\r\n\t  \r\n\t\tself.log(`No Client database client specified,System will use default`,'warn');\r\n\t  \r\n  }else{\r\n\t  \r\n\t   if(!pao.pa_contains(data,'clients')){\r\n\t\t   \r\n\t\t\tself.error('System requires clients property with valid config to interface with database clients')\r\n\t\t   \r\n\t   }else{\r\n\t\t   \r\n\t\t\t if(!pao.pa_isArray(data.clients)){\r\n\t\t\t \r\n\t\t\t }else{\r\n\t\t\t \r\n\t\t\t   let supported = self.supportedClients \r\n\t\t\t   \r\n\t\t\t   try{\r\n\t\t\t\t   \r\n\t\t\t\t\tdata.clients.forEach((c,i)=>{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t  if(!pao.pa_contains(supported,c.name)){\r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t   self.throwError(`Client: \"${c.name} is not supported by the system\"`)\r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t  }else{\r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t  self.connectToClient(c)\r\n\t\t\t\t\t\t\t   \r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif(self.DBS.length > 0){\r\n\r\n\t\t\t\t\t\tself.log(`Sending databases to the dao`)\r\n\t\t\t\t\t\tself.emit({type:'dao-take-dbs',data: {dbs:self.DBS}})\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t   \r\n\t\t\t   }catch(e){\r\n\t\t\t\t   \r\n\t\t\t\t   \r\n\t\t\t   }\r\n\t\t\t\t \r\n\t\t\t\t \r\n\t\t\t\t \r\n\t\t\t }\r\n\t\t   \r\n\t\t   \r\n\t   }\r\n\t  \r\n  }\r\n  \r\n}\r\n\r\nexport const connectToClient = function(client){\r\n  \r\n\tconst self = this \r\n\t\r\n\tself.log(`System is about to connect to client: ${client.name}`) \r\n\tself.getClientDriver(client) \r\n\t// self.supportedClients[client.name].connect(client)\r\n\t\r\n} \r\n\r\n\r\nexport const getClientDriver = function(client){\r\n  \r\n\t\r\n\tconst self = this \r\n\t\r\n\tconsole.log(`System is getting a client driver`)\r\n\tconsole.log('THE OTHER DETAILS BELOW') \r\n\tconsole.log(client.name)\r\n\tconsole.log(client.name === 'mysql')\r\n\t\r\n\ttry{\r\n\t\t\r\n        let name = client.name\r\n\t\tif(name === 'mysql'){\r\n\r\n\t\t\tself.supportedClients[client.name].driver = require('mysql')}\r\n\t\t// }else if(name === 'pg'){\r\n\r\n\t\t// \tself.supportedClients[client.name].driver = require('pg')\r\n\r\n\t\t// }else if(name === 'redis'){\r\n\r\n\t\t// \tself.supportedClients[client.name].driver = require('redis') \r\n\r\n\t\t// }else if(name === 'mongo'){\r\n\r\n\t\t// \tself.supportedClients[client.name].driver = require('mongo') \r\n\t\t// }else{\r\n\r\n\t\t// \tself.supportedClients[client.name].driver = require('sqlite') \r\n\r\n\t\t// }\r\n\r\n\t\t\r\n\t\t// switch(client.name){\r\n\r\n\t\t// \tcase 'mysql': self.supportedClients[client.name].driver = require('mysql') \r\n\t\t// \tbreak;\r\n\t\t// \tcase 'pg': self.supportedClients[client.name].driver = require('pg') \r\n\t\t// \tbreak;\r\n\t\t// \tcase 'redis': self.supportedClients[client.name].driver = require('redis') \r\n\t\t// \tbreak;\r\n\t\t// \tcase 'mongo': self.supportedClients[client.name].driver = require('mongo') \r\n\t\t// \tbreak;\r\n\t\t// \tdefault: self.supportedClients[client.name].driver = require('sqlite') \r\n\t\t// \tbreak;\r\n\t\t// }\r\n\t\r\n\t\t\r\n\t\tif(!self.supportedClients[client.name].driver){\r\n\t\t\t\r\n\t\t\tconsole.log('THE DRIVER REQUIREMENT FAILED')\r\n\t\t\tself.throwError('Failed to get client driver module')\r\n\t\t} \r\n\t\t\r\n\t\tself.connect(client)\r\n\t\t\r\n\t}catch(e){\r\n\t\t\r\n\t\tconsole.log('THE DRIVER CONNECT ERROR')\r\n\t\tconsole.log(e.stack)\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nexport const connect = function(client){\r\n  \r\n\t\r\n\tconst self = this \r\n\t\r\n\tself.log(`System is connecting to client: ${client.name}`) \r\n\t\r\n\ttry{\r\n\t\t\r\n\t\t let sclient = self.supportedClients[client.name] \r\n\t\t let opts = {host: client.connect.host,user: client.connect.user,password: client.connect.pass, database: client.connect.name}\r\n\t\tlet res = sclient.driver[sclient.connectMethod](opts,(err,res)=>{\r\n\t\t \r\n\t\t\t  if(err){\r\n\r\n\t\t\t\tconsole.log('THE ACTUAL CONNECTION ERROR')\r\n\t\t\t\tconsole.log(err.stack)\r\n\t\t\t\t  \r\n\t\t\t  }else{ \r\n\t\t\t  \r\n\t\t\t  \r\n\t\t\t  \t  self.DBS[client.name] = res\r\n\t\t\t\t  self.log(\"System has successfully connected to client\") \r\n\t\t\t\t  self.log(`Client ready to serve queries`)\r\n\t\t\t\t  \r\n\t\t\t  }\r\n\t  \r\n\t\t  }) \r\n\t\t  \r\n\t\t//   console.log(res)\r\n\t\t  res.connect(function(e){\r\n\r\n\t\t\tif(e){\r\n\r\n\t\t\t\tthrow new Error(e)\r\n\t\t\t}else{\r\n\r\n\t\t\t\tself.DBS[client.name] = res\r\n\t\t\t\tself.log(\"System has successfully connected to client\") \r\n\t\t\t\tself.log(\"System is handing client connection\") \r\n\t\t\t\tself.emit({type: 'dao-take-dbs',data:{vendor: client.name,conn: res}}) \r\n\t\t\t\tself.log(`Client ready to serve queries`)\r\n\r\n\t\t\t}\r\n\r\n\t\t  })\r\n\r\n\t\t//   console.log('THE RESULTS')\r\n\t\t//   res.query('SELECT 1 + 1 AS solution', function (error, results, fields) {\r\n\t\t// \tif (error) throw error;\r\n\t\t// \tconsole.log('THE CONNECTION TO THE DATABASE')\r\n\t\t// \tconsole.log('The solution is: ', results[0].solution);\r\n\t\t//   });\r\n\t\t//   res.query()\r\n\r\n\r\n\t}catch(e){\r\n\r\n\t\tconsole.log('THE CONNECTION EROR')\r\n\t\tconsole.log(e.stack)\r\n\t}\r\n\r\n}\r\n\t\t \r\n\t","\n\n\nimport Middleware from \"./middleware/index\"\nimport Parsers from './parsers/index'\nimport Router from './router/index'\nimport Request from './request/index'\nimport Server from './server/index'\nimport Config from './config/index'\nimport Anziiloger from './anziiloger/index'\nimport System from './system/index'\nimport Mysql from './mysql/index'\nimport Dao from './dao/index'\nimport Dman from './dman/index'\nimport Global from './global/index'\n\nclass Esm{\n\n    constructor(){\n\n        this.Esm = {\n            Anziiloger,Mysql,System,Middleware,Parsers,Router,Request,Dao,Dman,Server,Config,Global\n        }\n       \n    }\n    \n}\n\nexport default new Esm()","\nimport * as methods from \"./methods\"\n\n\nclass Global{\n  \n  \n  constructor(pao){\n\n   \n     this.pao = pao\n     this.globals = []\n\n\n     this.init = methods.init\n     this.handleRequestGlobalRequest = methods.handleRequestGlobalRequest\n  }\n\n\n  \n\n}\n\nexport default Global","\nimport Global from \"./global\";\n\nexport default Global\n","\n\n\nexport const init = function(){\n  \n  \n  console.log('Global has been initialised') \n  this.listens({\n\t\t\n\t'request-global-request': this.handleRequestGlobalRequest.bind(this),\n  \n})\n\t\n\t\n\t\n}\n\nexport const handleRequestGlobalRequest = function(data){\n\n\tconst self = this \n\n\tself.log('The Modules: ',self.globals)\n\n\tif(self.globals && self.globals.length > 0){\n\n\t\tif(self.globals.indexOf(data) > -1){\n\n\t\t\tself.emit({type: 'request-global-request-response',data: true})\n\t\t}else{\n\t\t\t\n\t\t\tself.emit({type: 'request-global-request-response',data: false})\n\t\t}\n\t\n\t}else{\n\n\t\tself.emit({type: 'request-global-request-error',data: false})\n\n\t}\n\t\n\t\n} \n\n\n","\nimport Middleware from \"./middleware\";\n\nexport default Middleware","\n\n\nexport const init = function(){\n  \n  \n\tthis.log('Middleware has been initialised') \n\tthis.listens({\n\n\t\t'config-middleware': this.handleConfigMiddleware.bind(this),\n\t\t'add-ext-middleware': this.handleAddExternalMiddleware.bind(this),\n\t\t'attach-middleware': this.handleAttachMiddleware.bind(this),\n\n \t   })\n\t \n\t  \n  }\n  \n\nexport const handleAttachMiddleware = function(data){\n\n\t this.attachMiddleware(data)\n\n  }\n\n  export const handleConfigMiddleware = function(data){\n\n\t const self = this\n\t//  console.log('THE HANDLE CONFIG MIDDLEWARE')\n\t//  console.log(data)\n\t//  console.log(data)\n\t let middlewares = data\n\t//  console.log(middlewares)\n\n\t for(let p in middlewares){\n\n\t\t// self.log('THE P')\n\t\t// self.log(p)\n\t\tif(self.middlewares[p]){\n\n\t\t\tif(middlewares[p].addMiddleware){\n\n\t\t\t\t// self.log('INSIDE EXISTENT MIDDLEWARE ITEM')\n\t\t\t\t// self.log(middlewares[p])\n\n\t\t\t\t\n\t\t\t\tmiddlewares[p].addMiddleware.forEach((m,i)=>{\n\t\t\t\t\tself.middlewares[p].push(m)\n\t\t\t\t})\n\t\t\t\t\n\n\t\t\t}else if(p === 'removeMiddleware'){\n\n\t\t\t}\n\n\t\t}else{\n\n\t\t\t\n\t\t\t\n\t\t\tif(middlewares[p].addMiddleware){\n\n\t\t\t\tself.middlewares[p] = {...middlewares[p].addMiddleware}\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t }\n\n\t\n\t\n\t\n }\n\n export const handleAddExternalMiddleware = function(data){\n\n\tconst self = this \n\tconst pao = self.pao\n\tself.log('ADD EXTERNAL MIDDLEWARE EVENT HAS OCCURED')\n\t\n\tif(data.type){\n\n\t\tif(data.type === 'private'){\n\n\t\t\t if(data.level === 'top'){\n\n\t\t\t\tif(pao.pa_isArray(data.middleware.funk)){\n\n\t\t\t\t\tdata.middleware.forEach((m,i)=>{\n\n\t\t\t\t\t\tself.middleware.unshift({type: 'function',value: m.funk,ext: true})\n\t\t\t\t\t})\n\n\t\t\t\t}else{\n\n\t\t\t\t\tself.log('THE MIDDLEWARES BEFORE')\n\t\t\t\t\tself.log(self.middlewares)\n\t\t\t\t\tif(self.middlewares.pprivate){\n\n\t\t\t\t\t\tlet len = Object.keys(self.middlewares.pprivate).length\n\t\t\t\t\t\tself.middlewares.pprivate[len] = {type: 'function',value: data.middleware.funk,ext: true}\n\t\t\t\t\t\tself.log('Middlewares')\n\t\t\t\t\t\tself.log(self.middlewares)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t }else{\n\n\t\t\t }\n\t\t}else if(data.type === 'public'){\n\n\t\t}else if(data.type === 'all'){\n\n\t\t\tif(data.level === 'top'){\n\n\t\t\t}\n\n\t\t}\n\t}\n\n   \n   \n}\n\n\n  export const attachMiddleware = function(data){\n\n\t const self = this\n\t if(data.app){\n\n\t\t// console.log('SELF.MIDDLEWARES')\n\t\t// console.log(self.middlewares)\n\n\t\tif(self.all.length > 0){\n\n\t\t\tconsole.log('THE Allwares is greater than zero')\n\t\t\t\n\t\t\tif(data.xpress){\n\t\t\t\tself.allWares(data.app,data.xpress)\n\t\t\t}\n\t\t\n\t\t}\n\t\tif(self.middlewares.pprivate && self.middlewares.ppublic){\n\n\t\t\tself.emit({type: 'router-middleware',data:{middleware:{public: self.middlewares.ppublic,private: self.middlewares.pprivate}}})\n\t\t}else if(self.middlewares.private){\n\t\t\tself.emit({type: 'router-middleware',data:{middleware: {private: self.middlewares.pprivate}}})\n\t\t}else if(self.middlewares.public){\n\t\t\tself.emit({type: 'router-middleware',data:{middleware: {public: self.middlewares.ppublic}}})\n\t\t}\n\t\t \n\t\tif(self.middlewares.all){\n\n\t\t\t// console.log('FOR EVERY REQUEST MIDDLEWARES')\n\t\t\t// console.log(self.middlewares.all)\n\n\t\t\tself.middlewares.all.forEach((m,i)=>{\n\n\t\t\t\tif(m.type === 'function'){\n\t\n\t\t\t\t\tdata.app.use(m.value)\n\t\t\t\t}else if(m.type === 'module'){\n\t\n\t\t\t\t\t// self.emit({type: `add-${m.value}-middleware`,data: data.app})\n\t\t\t\t}\n\t\t\t})\n\n\t\t}\n\t\t\n\t\t\n\t }\n  }\n  \n  \n  export const allWares = function(app,xpress){\n\n\t const self = this \n\t const pao = self.pao \n\n\n\t self.all.forEach((w,i)=>{\n\n\t\tif(pao.pa_isObject(w)){\n\n\t\t\tconsole.log('Executing allwares')\n\t\t\tif(w.use){\n\n\t\t\t\tconsole.log('The public:',w.call)\n\t\t\t\tapp.use(xpress[w.call]('public'))\n\t\t\t}else{\n\n\t\t\t\tconsole.log('The none-public:',w.call)\n\t\t\t\tapp.use(xpress[w.call]())\n\n\t\t\t}\n\t\t\t\n\t\t}else{\n\n\t\t\tself.log('middleware is string')\n\t\t\tapp.use(xpress[w]())\n\t\t}\n\t\t\n\t })\n\n  }\n  \n  \n  \n \n  \n  ","\r\nimport * as methods from \"./methods\"\r\nconst bodyParser = require('body-parser');\r\n\r\n\r\n\r\nclass Middleware{\r\n  \r\n  \r\n  constructor(pao){\r\n\r\n    this.pao = pao \r\n    this.all = [{call: 'static',use: 'public'},'json']\r\n    this.middlewares = {\r\n\r\n      all:[\r\n\r\n        {type: 'function',value: (req,res,next)=>{\r\n           console.log('I am the zeenith ware'),\r\n           res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n           res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\r\n           next()\r\n          }\r\n          },\r\n        // {type: 'module',value: 'test'}\r\n      ]\r\n     \r\n    }\r\n\r\n      \r\n    \r\n   \r\n    // console.log('THE STORE')\r\n    // console.log(this.supubu\r\n     \r\n     this.init = methods.init\r\n     this.handleAttachMiddleware = methods.handleAttachMiddleware\r\n     this.attachMiddleware = methods.attachMiddleware\r\n     this.handleConfigMiddleware = methods.handleConfigMiddleware \r\n     this.handleAddExternalMiddleware = methods.handleAddExternalMiddleware \r\n     this.allWares = methods.allWares\r\n    \r\n    \r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default Middleware","\nimport Mysql from \"./mysql\";\n\nexport default Mysql","\r\n\r\n\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n  console.log('Mysql has been initialised')\r\n\tthis.listens({\r\n\t\t\r\n\t\t'mysql-data-request': this.handleMysqlDataRequest.bind(this)\r\n\t\t\r\n\t})\r\n\t\r\n\t\r\n\t\r\n}\r\n\r\n\r\nexport const handleMysqlDataRequest = function(data){\r\n\r\n \r\n  const self = this \r\n  const pao = self.pao\r\n  // self.log(\"Handling Mysql Data Request\") \r\n  // self.log(data.table)\r\n  // self.log(data.outComehandler)\r\n  // self.log(data.opi)\r\n  // self.log(data)\r\n\tif(!pao.pa_contains(data,['conn','table','opi','query','outComehandler'])){\r\n\t\t\r\n\t\tself.log('Data request operations failed') \r\n\t\tdata.outComehandler({message: 'Database operation failed'})\r\n\t\t\r\n\t}else{\r\n\t\t\r\n\t\tif(!pao.pa_isObject(data.conn)){\r\n\t\t\tself.log('THE connection is not object')\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tif(!pao.pa_isString(data.table)){\r\n      \r\n          self.log('THE TABLE NAME IS NOT A STRING')\r\n\t\t\t\r\n      }else{\r\n        \r\n        if((data.opi.trim() !== 'deletemultiple' && !self[data.opi] )){\r\n\r\n\r\n          self.log('DATA.OPI IS NOT CONTAINED AS FUNCTION')\r\n          self.log(data.opi.trim() !== 'deletemultiple')\r\n          self.log(data.opi)\r\n          data.outComehandler({message: 'The specified operation is not supported'})\r\n          \r\n        }else{\r\n\r\n          console.log('THE CODE GOES THIS FAR')\r\n          \r\n          if(data.opi === 'insert'){ \r\n            \r\n            data.opi = 'insertOne' \r\n            self[data.opi](data) \r\n            console.log('this runs after opi finishes')\r\n            \r\n          }else if(data.opi === 'find'){\r\n            \r\n            // data.opi = 'findOne' \r\n            self[data.opi](data)\r\n            \r\n          }else if(data.opi === 'updateOne'){\r\n            \r\n            data.opi = 'updateOne' \r\n            self[data.opi](data)\r\n            \r\n          }else if(data.opi === 'transaction'){\r\n            \r\n            data.opi = 'transaction'\r\n            self[data.opi](data)\r\n            \r\n          } else if(data.opi === 'procedure'){\r\n            \r\n            data.opi = 'procedure' \r\n            self[data.opi](data)\r\n            \r\n          }else if(data.opi === 'join'){\r\n            \r\n            data.opi = 'join' \r\n            self[data.opi](data)\r\n            \r\n          }else if(data.opi === 'search'){\r\n            \r\n            data.opi = 'search' \r\n            self[data.opi](data)\r\n            \r\n          }else if(data.opi === 'remove'){\r\n            \r\n            data.opi = 'remove' \r\n            self[data.opi](data)\r\n            \r\n          }else if(data.opi === 'updateandtake'){\r\n\r\n            self[data.opi](data)\r\n\r\n          }else if(data.opi === 'insertandtake'){\r\n\r\n            self[data.opi](data)\r\n\r\n          }else if(data.opi === 'deleteandtake'){\r\n            self[data.opi](data)\r\n          }else if(data.opi === 'deletemultiple'){\r\n\r\n            self.deleteandtake(data)\r\n\r\n          }else{\r\n            \r\n            self[data.opi](data)\r\n            \r\n          }\r\n            \r\n          \r\n        }\r\n        \r\n      }\r\n    }\r\n\t\t\r\n\t}\r\n\t\r\n\t \r\n\t\r\n} \r\nexport const insertOne = function(insert){ \r\n \r\n  const self = this \r\n  const pao = self.pao \r\n\r\n if(!pao.pa_isObject(insert)){\r\n \t\r\n }else{\r\n \t\r\n \t try{\r\n\r\n  \r\n    \r\n    let handler = insert.outComehandler \r\n    const conn = insert.conn \r\n    const query = insert.query\r\n    \r\n    self.log('THE INSERT OBJECT')\r\n    self.log(insert)\r\n    let sql = `INSERT INTO ?? (??) VALUES(?)`;\r\n\t\tlet queryAttributes = [insert.table,['id',...query.fields],[null,...query.values]];\r\n    sql = conn.format(sql, queryAttributes);\r\n    console.log('THE SQL STATEMENT') \r\n    console.log(sql)\r\n\r\n \t \t//  let sql = `INSERTINTO${data.table}SET?`\r\n \r\n \t \t  conn.query(sql,function(e,r,f){\r\n         \r\n        console.log('INSERT RESULT')\r\n        console.log(r)\r\n        console.log(e)\r\n        if(e) return handler(e,null) \r\n        r.user = insert.values \r\n        console.log(r.user)\r\n \t \t \t  handler(null,r)\r\n \t \t \t  \r\n \t \t \t \r\n \t \t })\r\n \t \t\r\n \t }catch(e){\r\n      \r\n      console.log('CAUTH ERROR')\r\n      console.log(e)\r\n \t \t  handler(e,null)\r\n \t }\r\n \t\r\n }\r\n \t\r\n} \r\n \r\nexport const insertMany = function(insert){ \r\n \r\n    if(!pao.pa_isObject(data)){\r\n      \r\n    }else{\r\n      \r\n      try{\r\n        \r\n          let sql = `INSERT INTO ?? (?) VALUES(?)`;\r\n         let result = []  \r\n         let fullImplement = true\r\n        \r\n          insert.bulk.forEach((insertItem,i)=>{\r\n            \r\n             \r\n\t\t      let queryAttributes = [insertItem.table,[...insertItem.fields],[...insertItem.values]];\r\n\t\t        sql = conn.format(sql, queryAttributes);\r\n\t\t        \r\n              conn.query(sql,insertItem,function(e,r,f){ \r\n              \r\n                if(e){\r\n                  \r\n                  fullImplement = false\r\n                  \r\n                }else{\r\n                  \r\n                  result.push(r)\r\n                \r\n                }\r\n                \r\n                \r\n              }) \t \t   \t\r\n          }) \r\n          \r\n          console.log('bulk insert completed')\r\n          handler(null,result)\r\n    \r\n        \r\n        \r\n      }catch(e){\r\n        \r\n          handler(e,null)\r\n      }\r\n      \r\n    }\r\n \t\r\n } \r\n \r\nexport const find = async function(findiks){ \r\n \r\n  const self = this \r\n  const pao = self.pao\r\n  \r\n\r\n  // console.log('fIND.FINDIKS')\r\n  // console.log(findiks.query.length)\r\n  // if(findiks.query.length > 0){ return findiks.outComehandler({message: 'ERROR IN MYSQL.FIND.METHOD'})}\r\n\r\n\r\n\r\n  // console.log('THE DATA IN FINDONE')\r\n  // console.log(findiks)\r\n\r\n\r\n  if(!pao.pa_isObject(findiks)){\r\n    \r\n    return \r\n  }else{\r\n\r\n    let conn = findiks.conn \r\n    let handler = findiks.outComehandler\r\n    let query = []\r\n    let result = []  \r\n   \r\n    let multiple = false\r\n\r\n    if(findiks.table.toUpperCase().trim() === 'MULTIPLE'){\r\n      \r\n       multiple = true\r\n       query = findiks.query\r\n\r\n     }else{\r\n\r\n       query.push(findiks.query)\r\n\r\n     }\r\n\r\n    for(let q=0; q < query.length; q++){\r\n\r\n      let find = null\r\n      if(multiple){\r\n\r\n        find = {table: query[q].table,...query[q]}\r\n\r\n      }else{\r\n\r\n        find = {table: findiks.table,...query[q]}\r\n        // find.opiks && Object.keys(find).length === 2 ? '' : !find.conditions ? find.conditions = [`${Object.keys(query)[0]} ISEQUALS ${query[Object.keys(query)[0]]}`]: ''\r\n\r\n      }\r\n\r\n      \r\n      try{\r\n\r\n    \r\n  \r\n  \r\n        let sql = ''\r\n        let attribs = null\r\n        let sqliks = self.queryTemplate(self.queryOptions(find),'select');\r\n     \r\n         console.log('THE SQLKIKS OBJECT FIND')\r\n         console.log(sqliks)\r\n         attribs = [sqliks.attribs.from.table]\r\n  \r\n        sql = sqliks.statement\r\n        let queryAttributes = attribs\r\n        console.log('THE SQL BEFORE FORMAT')\r\n        console.log(sql)\r\n        sql = conn.format(sql,queryAttributes);\r\n        console.log(sql)\r\n  \r\n    \r\n  \r\n       await conn.query(sql,function(e,r,f){\r\n          \r\n            console.log('THE QUERY IS COMPLETED WITH RESULTS')\r\n            console.log(e)\r\n            console.log(r)\r\n            // console.log(typeof r)\r\n            // console.log(f)\r\n            // console.log(r instanceof Array)\r\n            // console.log(pao.pa_isArray(r))\r\n            // console.log(r.length)\r\n            // console.log('After R evaluation')\r\n            if(e) result.push(e) \r\n  \r\n            if(pao.pa_isArray(r) && r.length > 0 && query.length !== 1 ){  r = r[0]; result.push(r)}else{result = r}\r\n           \r\n           \r\n            if(q === query.length - 1){\r\n\r\n              console.log('THE LOOP IS COMPLETE WITH DATA:')\r\n              console.log(result)\r\n              handler(null,result)\r\n      \r\n            }\r\n      \r\n      \r\n            \r\n          \r\n        })\r\n        \r\n      }catch(e){\r\n          \r\n            // console.log('AN ERROR OCCURED IN FIND ONE ')\r\n            // console.log(e)\r\n           return handler(e,null)\r\n      }\r\n\r\n      \r\n\r\n    }\r\n    \r\n   \r\n    \r\n  }\r\n \t\r\n} \r\n\r\nexport const updateOne = function(updatiks){ \r\n\r\n  console.log('THE UPDATIKS')\r\n  console.log(updatiks)\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  let conn = updatiks.conn \r\n  let handler = updatiks.outComehandler \r\n  let update = {table: updatiks.table,...updatiks.query}\r\n\r\n  //console.log(update)\r\n \r\n  if(!pao.pa_isObject(updatiks)){\r\n    \r\n  }else{\r\n    \r\n    try{\r\n      \r\n      let sql = ''\r\n      let attribs = null\r\n      let sqliks = self.queryTemplate(self.queryOptions(update),'update');\r\n      \r\n   \r\n       console.log('THE SQLKIKS OBJECT UPDATE')\r\n       console.log(sqliks)\r\n       attribs = [sqliks.attribs.from.table]\r\n\r\n      sql = sqliks.statement\r\n      let queryAttributes = attribs\r\n      console.log('THE SQL BEFORE FORMAT')\r\n      console.log(sql)\r\n      sql = conn.format(sql,queryAttributes);\r\n      console.log(sql)\r\n\r\n\r\n      conn.query(sql,function(e,r,f){\r\n        \r\n          if(e) handler(e,null)\r\n\r\n          handler(null,r)\r\n          \r\n        \r\n      })\r\n      \r\n    }catch(e){\r\n      \r\n        handler(e,null)\r\n    }\r\n    \r\n  }\r\n \t\r\n} \r\n \r\n export const updateMany = function(update){ \r\n \r\n    if(!pao.pa_isObject(data)){\r\n      \r\n    }else{\r\n      \r\n      try{\r\n        \r\n         let sql = `UPDATE TABLE ?? SET??WHERE??`\r\n         let result = []  \r\n         let fullImplement = true\r\n        \r\n        \r\n          update.bulk.forEach((updateItem,i)=>{\r\n            \r\n             \r\n\t\t      let queryAttributes = [update.table,[...update.fields],update.condition];\r\n\t\t      \r\n\t\t sql = conn.format(sql, queryAttributes);\r\n\t\t        \r\n              conn.query(sql,updateItem,function(e,r,f){ \r\n              \r\n                if(e){\r\n                  \r\n                  fullImplement = false\r\n                  \r\n                }else{\r\n                  \r\n                  result.push(r)\r\n                \r\n                }\r\n                \r\n                \r\n              }) \t \t   \t\r\n          }) \r\n          \r\n          console.log('bulk update completed')\r\n          handler(null,result)\r\n    \r\n        \r\n        \r\n      }catch(e){\r\n        \r\n          handler(e,null)\r\n      }\r\n      \r\n    }\r\n \t\r\n } \r\n\r\nexport const updateandtake = async function(updateAndTake){ \r\n\r\n  console.log('THE UPDATIKANDTAKE')\r\n  console.log(updateAndTake)\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  let conn = updateAndTake.conn \r\n  let handler = updateAndTake.outComehandler \r\n  let updateTake = updateAndTake.query\r\n\r\n  //console.log(update)\r\n \r\n  if(!pao.pa_isObject(updateAndTake)){\r\n    \r\n  }else{\r\n    \r\n    try{\r\n      \r\n       let options = await self.searchOptions(updateTake,true)\r\n       self.multiTableUpdate(options,conn)\r\n       .then((updated)=>{\r\n\r\n          if(updated.changedRows > 0){\r\n\r\n            self.take(options,conn,updateTake.conditions)\r\n            .then((taken)=>{\r\n\r\n              // updated.changedRows > 0 ? handler(null,{updated: true,taken: taken}) : ''\r\n              handler(null,{updated: true,taken: taken})\r\n\r\n            })\r\n            .catch((e)=>{\r\n\r\n                handler(e,null)\r\n\r\n            })\r\n\r\n          }else{\r\n\r\n            // handler({updated: false,taken: taken})\r\n            console.log('NO CHANGED ROWS IN A MULTIPLE UPDATE')\r\n            console.log(options)\r\n\r\n              self.take(options,conn,updateTake.conditions)\r\n              .then((taken)=>{\r\n\r\n                handler(null,{updated: false,taken: taken})\r\n\r\n              })\r\n              .catch((e)=>{\r\n\r\n                  handler(e,null)\r\n\r\n              })\r\n\r\n            //\r\n            // {\r\n\t\t\t\t\t\r\n            //   tables:['jo_user','jo_login'],\r\n            //   joins: 2,\r\n            //   joinPoints: ['jo_user.id EQUALS jo_login.id'],\r\n            //   conditions: [`jo_user.id EQUALS 1`,`AND jo_login.u_id EQUALS 1`],\r\n            //   opiks: ['field.first_name.as[firstName]','field.last_name.as[lastName]',\r\n            //   set: [{first_name: 'Surprise',last_name: 'Mashele'},{password: '1234567'}],\r\n            //   takeFrom: 'jo_user'\r\n            //  }\r\n            \r\n\r\n          }\r\n         \r\n\r\n       })\r\n       .catch((e)=>{\r\n         handler(e,null)\r\n       })\r\n\r\n        \r\n      \r\n    }catch(e){\r\n      \r\n        handler(e,null)\r\n    }\r\n    \r\n  }\r\n \t\r\n}\r\n\r\nexport const insertandtake = async function(insertAndTake){ \r\n\r\n  console.log('THE INSERTANDTAKE')\r\n  console.log(insertAndTake)\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  let conn = insertAndTake.conn \r\n  let handler = insertAndTake.outComehandler \r\n  let insert = insertAndTake.query.insert\r\n  let takeQuery = insertAndTake.query.take \r\n\r\n  //console.log(update)\r\n \r\n  if(!pao.pa_isObject(insertAndTake)){\r\n    \r\n  }else{\r\n    \r\n    try{\r\n      \r\n      \r\n      let insertTakeHandle = async function(error = null,inserted=null){\r\n\r\n          await self.log('THE INSERTED RECORD UPDATE')\r\n          await self.log(error)\r\n          await self.log(inserted)\r\n          await self.log(self.SEARCH) \r\n          !takeQuery.conditions ? takeQuery.conditions = [`id ISEQUAL ${inserted.insertId}`] : ''\r\n          await self.log(takeQuery)\r\n          let take = {}\r\n          take.conn = conn \r\n          take.query = takeQuery\r\n          take.outComehandler = (e=null,taken)=>{\r\n        \r\n             handler(null,{inserted: inserted,taken: taken})\r\n\r\n          }\r\n\r\n          self.search(take)\r\n          // throw new Error('MADE UP ERROR')\r\n        //  self.SEARCH(take)\r\n\r\n        }\r\n       insert.outComehandler = insertTakeHandle.bind(self)\r\n       insert.conn = conn \r\n       self.insertOne(insert)\r\n      \r\n      \r\n    }catch(e){\r\n      \r\n        handler(e,null)\r\n    }\r\n    \r\n  }\r\n \t\r\n}\r\n\r\nexport const deleteandtake = async function(deleteAndTake){ \r\n\r\n  console.log('THE DELETEANDTAKE')\r\n  console.log(deleteAndTake)\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  let conn = deleteAndTake.conn \r\n  let handler = deleteAndTake.outComehandler \r\n  let remove = null \r\n  let takeQuery = null\r\n\r\n\r\n  if(deleteAndTake.query.remove){\r\n\r\n    remove = deleteAndTake.query.remove\r\n    takeQuery = deleteAndTake.query.take \r\n  }\r\n  \r\n\r\n  //console.log(update)\r\n \r\n  if(!pao.pa_isObject(deleteAndTake)){\r\n    \r\n  }else{\r\n    \r\n    try{\r\n      \r\n      \r\n      let deleteTakeHandle = async function(error = null,deleted=null){\r\n\r\n          await self.log('THE deleted RECORD UPDATE')\r\n          await self.log(error)\r\n          await self.log(deleted)\r\n\r\n          if(!takeQuery){\r\n\r\n            handler(null,{deleted: deleted})\r\n\r\n          }else{ \r\n\r\n            !takeQuery.conditions ? takeQuery.conditions = remove.conditions : ''\r\n            await self.log(takeQuery)\r\n            let take = {}\r\n            take.conn = conn \r\n            take.query = takeQuery\r\n            take.outComehandler = (e=null,taken)=>{\r\n          \r\n              console.log('DELETED AND TAKEN OPERATION')\r\n              console.log(deleted)\r\n              console.log(taken)\r\n              handler(null,{deleted: deleted,taken: taken})\r\n\r\n            }\r\n            self.search(take)\r\n\r\n          }\r\n          // throw new Error('MADE UP ERROR')\r\n        //  self.SEARCH(take)\r\n\r\n        }\r\n\r\n       if(!remove) remove = deleteAndTake.query\r\n       remove.outComehandler = deleteTakeHandle.bind(self)\r\n       remove.conn = conn \r\n       self.removeJoin(remove)\r\n      \r\n      \r\n    }catch(e){\r\n      \r\n        handler(e,null)\r\n    }\r\n    \r\n  }\r\n \t\r\n}\r\n\r\nexport const updateJoinTemplate = function(options){\r\n\r\n\r\n  // `UPDATE ??\r\n  // SET ${options.set}\r\n  // WHERE ${options.from.condition}\r\n  \r\n  // `\r\n\r\n  const self = this\r\n\r\n  self.log('UPDATE OPTIONS')\r\n  self.log(options)\r\n\r\n  let sqlAttribs = {}\r\n  sqlAttribs.attribs = {from: options.from,tables: options.tables}\r\n\r\n    \r\n  switch(options.length){\r\n\r\n    case 2: \r\n    sqlAttribs.statement = `UPDATE ??\r\n                            JOIN ${options.tables[0]}\r\n                              ON ${options.joinPoints[0]}\r\n                            SET ${options.set}\r\n                            WHERE ${options.from.condition}\r\n                            `\r\n    break;\r\n    \r\n    case 3: \r\n      sqlAttribs.statement = `UPDATE ??,??,??\r\n                              JOIN ${options.tables[0]}\r\n                                ON ${options.conditions[0]}\r\n                              JOIN ${options.tables[1]}\r\n                                ON ${options.conditions[1]}\r\n                              SET ${options.set}\r\n                              WHERE ${options.from.condition}\r\n                              \r\n                              `\r\n      break;\r\n    case 4: \r\n    sqlAttribs.statement = `UPDATE ??,??,??,??\r\n                            JOIN ${options.tables[0]}\r\n                              ON ${options.conditions[0]}\r\n                            JOIN ${options.tables[1]}\r\n                              ON ${options.conditions[1]}\r\n                            JOIN ${options.tables[2]}\r\n                            ON ${options.conditions[2]}\r\n                            SET ${options.set}\r\n                            WHERE ${options.from.condition}\r\n                            \r\n                            `\r\n      break;\r\n\r\n    default: \r\n    sqlAttribs.statement = `UPDATE ??\r\n                            SET ${options.set}\r\n                            WHERE ${options.from.condition}\r\n                            \r\n                            `\r\n  }\r\n\r\n return sqlAttribs\r\n\r\n\r\n\r\n}\r\n\r\nexport const multiTableUpdate = async function(options,conn){\r\n\r\n\r\n    const self = this \r\n    const pao = self.pao \r\n    const contains = pao.pa_contains\r\n\r\n\r\n   return  new Promise((resolve,reject)=>{\r\n\r\n        try{\r\n          \r\n        \r\n          \r\n      \r\n          // console.log('THE SQLKIKS OBJECT UPDATE')\r\n          // console.log(sqliks)\r\n          // attribs = [sqliks.attribs.from.table]\r\n\r\n          let sql = ''\r\n          let attribs = null\r\n          let sqliks = self.updateJoinTemplate(options);\r\n        \r\n          console.log('THE SQLKIKS OBJECT')\r\n          console.log(sqliks)\r\n          contains(sqliks.attribs,'tables') && sqliks.attribs.tables ? attribs = [sqliks.attribs.from.table,...sqliks.attribs.tables] : attribs = [sqliks.attribs.from.table]\r\n\r\n          sql = sqliks.statement\r\n          let queryAttributes = attribs\r\n          console.log('THE SQL BEFORE FORMAT::MULTIUPDATE')\r\n          console.log(sql)\r\n          sql = conn.format(sql,queryAttributes);\r\n          console.log(sql)\r\n\r\n\r\n          conn.query(sql,function(e,r,f){\r\n            \r\n              if(e) return reject(e)\r\n\r\n              resolve(r)\r\n              \r\n            \r\n          })\r\n          \r\n        }catch(e){\r\n          \r\n          reject(e)\r\n        }\r\n\r\n\r\n    })\r\n\r\n\r\n}\r\n\r\nexport const take = async function(options,conn,conditions){\r\n\r\n   const self = this \r\n   const pao = self.pao \r\n   console.log('TAKE:::')\r\n   console.log(options)\r\n\r\n    return new Promise((resolve,reject)=>{\r\n\r\n      if(options.takeFrom){\r\n\r\n           let takeFrom = options.takeFrom \r\n           console.log('THE TAKEFROM BY TAKEFROM')\r\n           console.log(takeFrom)\r\n          if(takeFrom.condition){\r\n\r\n            self.log('THE TAKEFROM CONDITIION IS SET')\r\n           \r\n\r\n            options.from.condition = takeFrom.condition \r\n            takeFrom.tables.length > 1 ? options.length = takeFrom.tables.length : '' \r\n            options.length ? takeFrom.joinPoints ? options.joinPoints = takeFrom.joinPoints : '' : '' \r\n            self.takeSql(options,conn)\r\n            .then((resultset)=>{\r\n\r\n              resolve(resultset)\r\n\r\n            })\r\n            .catch((e)=>{\r\n\r\n              reject(e)\r\n\r\n            })\r\n\r\n \r\n\r\n          }else{\r\n\r\n            self.log('THE TAKEFROM HAS NO SET CONDITIONS') \r\n            self.log(options)\r\n            delete options.length\r\n            options.from.condition = self.searchConditionsFormat([conditions[0]])\r\n            // options.tables = options.tables[0]\r\n            \r\n            self.takeSql(options,conn)\r\n            .then((resultset)=>{\r\n\r\n              resolve(resultset)\r\n\r\n            })\r\n            .catch((e)=>{\r\n\r\n              reject(e)\r\n\r\n            })\r\n\r\n          }\r\n\r\n      }else{\r\n\r\n        self.log('THE TAKEFROM IS NOT DEFINED')\r\n        self.takeSql(options,conn)\r\n            .then((resultset)=>{\r\n\r\n              resolve(resultset)\r\n\r\n            })\r\n            .catch((e)=>{\r\n\r\n              reject(e)\r\n\r\n            })\r\n\r\n      }\r\n\r\n\r\n    })\r\n   \r\n\r\n}\r\n\r\nexport const takeSql = function(takeOptions,conn){\r\n\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  const contains = pao.pa_contains\r\n  console.log('THE SEARCH')\r\n  console.log(search)\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    \r\n    \r\n         // do a thing, possibly async, then \r\n          console.log('Executing the search promise')\r\n  \r\n          \r\n          let sql = ''\r\n          let attribs = null\r\n          let sqliks = self.searchStatement(takeOptions);\r\n      \r\n          console.log('THE SQLKIKS OBJECT')\r\n          console.log(sqliks)\r\n          contains(sqliks.attribs,'tables') ? attribs = [sqliks.attribs.from.table,...sqliks.attribs.tables] : attribs = [sqliks.attribs.from.table]\r\n\r\n          sql = sqliks.statement\r\n          let queryAttributes = attribs\r\n          console.log('THE SQL BEFORE FORMAT::')\r\n          console.log(sql) \r\n          // console.log(conn)\r\n          sql = conn.format(sql,queryAttributes);\r\n          console.log(sql)\r\n  \r\n          conn.query(sql,function(e,r,f){\r\n          \r\n        \r\n              if(e) {\r\n                \r\n                  console.log('Promise is rejecting search')\r\n                  console.log(e)\r\n                  reject(e) \r\n                  \r\n              }else{\r\n                \r\n                  console.log('Promise is Resolving search')\r\n                  console.log(r)\r\n                  console.log(r[0])\r\n                  resolve(r)\r\n              }\r\n  \r\n          \r\n          })\r\n  \r\n  \r\n  \r\n  }); \r\n\r\n\r\n\r\n}\r\n \r\nexport const removeJoin = function(removiks){ \r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  const contains = pao.pa_contains\r\n  let conn = removiks.conn \r\n  let handler = removiks.outComehandler \r\n  \r\n  // let remove = {table: removiks.table,...removiks.query}\r\n \r\n if(!pao.pa_isObject(removiks)){\r\n \t\r\n }else{\r\n \t\r\n \t try{\r\n \t \t\r\n \t \t   let sql = ''\r\n      let attribs = null\r\n      let sqliks = self.queryTemplate(self.searchOptions(removiks),'delete');\r\n   \r\n       console.log('THE SQLKIKS OBJECT DELETEDANDTAKE[REMOVE]')\r\n       console.log(sqliks)\r\n       contains(sqliks.attribs,'tables') ? attribs = [...sqliks.attribs.tables,sqliks.attribs.from.table] : attribs = [sqliks.attribs.from.table]\r\n\r\n      sql = sqliks.statement\r\n      let queryAttributes = attribs\r\n      console.log('THE SQL BEFORE FORMAT')\r\n      console.log(sql)\r\n      sql = conn.format(sql,queryAttributes);\r\n      console.log(sql)\r\n\r\n      conn.query(sql,function(e,r,f){\r\n        \r\n          if(e) return handler(e,null) \r\n          handler(null,r)\r\n          \r\n        \r\n      })\r\n \t \t\r\n \t }catch(e){\r\n \t \t\r\n \t \t  handler(e,null)\r\n \t }\r\n \t\r\n }\r\n \t\r\n} \r\n \r\nexport const remove = function(removiks){ \r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  let conn = removiks.conn \r\n  let handler = removiks.outComehandler \r\n  let remove = {table: removiks.table,...removiks.query}\r\n \r\n if(!pao.pa_isObject(removiks)){\r\n \t\r\n }else{\r\n \t\r\n \t try{\r\n \t \t\r\n \t \t   let sql = ''\r\n      let attribs = null\r\n      let sqliks = self.queryTemplate(self.queryOptions(remove),'delete');\r\n   \r\n       console.log('THE SQLKIKS OBJECT DELETED[REMOVE]')\r\n       console.log(sqliks)\r\n       attribs = [sqliks.attribs.from.table]\r\n\r\n      sql = sqliks.statement\r\n      let queryAttributes = attribs\r\n      console.log('THE SQL BEFORE FORMAT')\r\n      console.log(sql)\r\n      sql = conn.format(sql,queryAttributes);\r\n      console.log(sql)\r\n\r\n      conn.query(sql,function(e,r,f){\r\n        \r\n          if(e) handler(e,null) \r\n          handler(null,r)\r\n          \r\n        \r\n      })\r\n \t \t\r\n \t }catch(e){\r\n \t \t\r\n \t \t  handler(e,null)\r\n \t }\r\n \t\r\n }\r\n \t\r\n} \r\n\r\nexport const queryOptions = function (i){\r\n \r\n  console.log('THE search BATCH ITEM')\r\n  console.log(i)\r\n  const self = this \r\n  let pao = self.pao\r\n  let contains = pao.pa_contains\r\n\r\n  // let rest = {\r\n\t\t\t\r\n\t// \tconditions: [`country_id EQUALS 202`],\r\n\t// \topiks: ['field.id.as[stateId]','field.state_name.as[state]','field.country_id.as[countryId]'],\r\n\t// \tsort: 'order[state_name].asc',\r\n\t// \trange: '2,5',\r\n\t// \ttake: 5\r\n\t//   }\r\n\r\n\r\n\r\n       let options = {}\r\n       \r\n      i.conditions \r\n        ? options.from = {table: i.table,condition: self.searchConditionsFormat(i.conditions) }\r\n        : options.from = {table: i.table}\r\n     console.log('THE CODE GETS HERE')\r\n     console.log(options)\r\n     \r\n      contains(i,['returnFields','opiks']) \r\n        ? options.fields = self.searchFieldsFormat(i.opiks,i.returnFields) \r\n        : contains(i,'opiks') \r\n            ?  options.fields = self.searchFieldsFormat(i.opiks) \r\n            :  contains(i,'returnFields') ? i.returnFields.length === 1 && i.returnFields[0].trim() === 'all' ? options.fields='*' : options.fields= i.returnFields : options.fields='*'\r\n      contains(i,'take') ? options.take = i.take : ''\r\n      contains(i,'range') ? options.range = i.range : ''\r\n      contains(i,'sort') ? options.sort = i.sort : ''\r\n      contains(i,'set') ? options.set = self.set(i.set) : ''\r\n      contains(i,'takeFrom') \r\n              ?  i.takeFrom.conditions \r\n            \r\n                    ? (options.takeFrom = i.takeFrom, options.takeFrom.condition = self.searchConditionsFormat(i.takeFrom.conditions))\r\n                    : options.takeFrom = i.takeFrom\r\n                \r\n              : ''\r\n      \r\n\r\n\r\n      console.log('THE OPTIONS')\r\n      console.log(options)\r\n\r\n      return options\r\n    \r\n  \r\n  \r\n }\r\n\r\nexport const queryTemplate = function(options,type){\r\n\r\n\r\n  const self = this \r\n  const pao = self.pao \r\n  const contains = pao.pa_contains\r\n\r\n  console.log('THE QUERY TEMPLATE')\r\n  console.log(options)\r\n\r\n  if(type === 'select'){\r\n\r\n    let sqlAttribs = {}\r\n    sqlAttribs.attribs = {from: options.from}\r\n    let limit = ' '\r\n    let sort = options.sort ? self.sort(options.sort) :' '\r\n     options.take ? limit = self.limit(options.take,'take') :  options.range ? limit = self.limit(options.range,'range') :' '\r\n\r\n    \r\n    if(contains(options.from,'condition')){\r\n\r\n      sqlAttribs.statement = `SELECT ${options.fields}\r\n                              FROM  ??\r\n                              WHERE ${options.from.condition}\r\n                              ${sort}\r\n                              ${limit}\r\n\r\n                              `\r\n\r\n    }else{\r\n\r\n      sqlAttribs.statement = `SELECT ${options.fields}\r\n                              FROM  ??\r\n                              ${sort}\r\n                              ${limit}\r\n                              `\r\n\r\n    }\r\n\r\n    return sqlAttribs\r\n\r\n  }else if(type === 'update'){\r\n\r\n    let sqlAttribs = {}\r\n    sqlAttribs.attribs = {from: options.from}\r\n\r\n    sqlAttribs.statement = `UPDATE ??\r\n                            SET ${options.set}\r\n                            WHERE ${options.from.condition}\r\n                            `\r\n    return sqlAttribs\r\n\r\n  }else if(type === 'delete'){\r\n\r\n      \r\n    if(options.length){\r\n\r\n      let sqlAttribs = {}\r\n      sqlAttribs.attribs = {from: options.from,tables: options.tables} \r\n      options.tables.unshift(options.from.table)\r\n      console.log('DELETE OPTIONS OBJECT')\r\n      console.log(options)\r\n      console.log(options.tables)\r\n      console.log(options.length)\r\n\r\n      switch(options.length){\r\n\r\n       \r\n        case 3: \r\n          sqlAttribs.statement = `DELETE ??,??,??\r\n                                  FROM ??\r\n                                  JOIN ${options.tables[1]}\r\n                                    ON ${options.joinPoints[0]}\r\n                                  JOIN ${options.tables[2]}\r\n                                    ON ${options.joinPoints[1]}\r\n                                  WHERE ${options.from.condition}\r\n                                  \r\n                                  `\r\n          break;\r\n        case 4: \r\n        sqlAttribs.statement = `DELETE ??,??,??,??\r\n                                FROM ??\r\n                                JOIN ${options.tables[1]}\r\n                                  ON ${options.joinPoints[0]}\r\n                                JOIN ${options.tables[2]}\r\n                                  ON ${options.joinPoints[1]}\r\n                                JOIN ${options.tables[3]}\r\n                                ON ${options.joinPoints[3]}\r\n                                WHERE ${options.from.condition}\r\n                                \r\n                                `\r\n          break; \r\n        \r\n       \r\n         default:  \r\n          sqlAttribs.statement = `DELETE ??,??\r\n                                  FROM ??\r\n                                  JOIN ${options.tables[1]}\r\n                                    ON ${options.joinPoints[0]}\r\n                                  WHERE ${options.from.condition}\r\n                                  \r\n                                  `\r\n             \r\n                                \r\n      }\r\n\r\n      console.log('SQL ATTRRIBS')\r\n      console.log(sqlAttribs)\r\n      return sqlAttribs\r\n\r\n    }else{\r\n\r\n        let sqlAttribs = {}\r\n        sqlAttribs.attribs = {from: options.from}\r\n        \r\n\r\n        sqlAttribs.statement = `DELETE\r\n                                FROM ??\r\n                                `\r\n        options.from.condition ? sqlAttribs.statement += ` WHERE ${options.from.condition}` : '' \r\n        return sqlAttribs\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n \r\n \r\nexport const transaction = function(data){\r\n\r\n   const self = this\r\n   if(typeof data.query === 'function'){\r\n\r\n    data.query()\r\n   }else{\r\n\r\n    self.TRANSACTION(data.query,data.conn,data.outComehandler)\r\n   }\r\n}\r\n\r\nexport const procedure = function(data){\r\n\r\n  console.log('THE procedure got a call')\r\n  const self = this\r\n  if(typeof data.query === 'function'){\r\n\r\n   data.query()\r\n  }else{\r\n\r\n   console.log('INSIDE PROCEDURE')\r\n  //  console.log(data.outComehandler)\r\n  //  console.log(data)\r\n   self.PROCEDURE(data.query,data.conn,data.outComehandler)\r\n  }\r\n}\r\n\r\n\r\nexport const join = function(data){\r\n\r\n  console.log('THE procedure got a call')\r\n  const self = this\r\n  if(typeof data.query === 'function'){\r\n\r\n   data.query()\r\n  }else{\r\n\r\n   console.log('INSIDE JOIN')\r\n  //  console.log(data.outComehandler)\r\n  //  console.log(data)\r\n   self.JOIN(data.query,data.conn,data.outComehandler)\r\n  }\r\n} \r\n\r\nexport const search = function(data){\r\n\r\n  console.log('THE search got a call')\r\n  const self = this\r\n  if(typeof data.query === 'function'){\r\n\r\n   data.query()\r\n  }else{\r\n\r\n   console.log('INSIDE SEARCH')\r\n  //  console.log(data.outComehandler)\r\n  //  console.log(data)\r\n   self.SEARCH(data.query,data.conn,data.outComehandler)\r\n  }\r\n}\r\n\r\n\r\n export const TRANSACTION = function(collections,conn,handler = null){\r\n\t\r\n\t\r\n\t  \r\n  const self = this \r\n  const pao = self.pao\r\n  let collectionsIds = [] \r\n  let breakOut = false \r\n  \r\n  for(let c=0; c < collections.length; c++){\r\n    \r\n       let i = collections[c] \r\n       let fields = null\r\n       let sources = null \r\n       let own = null\r\n       \r\n     if(!pao.pa_contains(i,'fields')){\r\n\r\n      handler('Required collection/table field missing')\r\n      break;\r\n\r\n     }else{\r\n\r\n      if(pao.pa_contains(i.fields,'tables')){\r\n\r\n        sources = i.fields.tables\r\n        own = i.fields.own\r\n      }\r\n     } \r\n         \r\n       sources \r\n         ? fields = self.combineFields(sources,own,collectionsIds) : ''\r\n       fields \r\n         ? i.fields = fields : ''\r\n        \r\n        \r\n        \r\n        \r\n        self.insert(i,conn)\r\n        .then((insert)=>{\r\n          \r\n            collectionsIds.push(insert)\r\n           \r\n        })\r\n        .catch((failedInsert)=>{\r\n            \r\n             self.rollback(collectionsIds)\r\n             handler(failedInsert,null) \r\n             breakOut = true\r\n          \r\n        }) \r\n\r\n        if(breakOut) break\r\n        \r\n        if(c === collections.length - 1 ){\r\n          \r\n           console.log('Operation completed successfully')\r\n           handler('Transaction Operation sucessful')\r\n        }\r\n        \r\n    \r\n  }\r\n\r\n}\r\n\r\nexport const PROCEDURE = async function(collections,conn,handler = null){\r\n\t\r\n  \r\n \r\n  const self = this \r\n  const pao = self.pao\r\n\r\n  self.log('THE PROCEDURE METHOD')\r\n  self.log(collections)\r\n  self.log(handler)\r\n  self.log(conn)\r\n\t  \r\n  let collectionsIds = []  \r\n  let breakOut = false \r\n  \r\n  for(let c=0; c < collections.length; c++){\r\n    \r\n       let i = collections[c] \r\n       let fields = null\r\n       let sources = null \r\n       let own = null\r\n       \r\n     if(!pao.pa_contains(i,'fields')){\r\n\r\n      handler('Required collection/table field missing')\r\n      break;\r\n\r\n     }else{\r\n\r\n      if(pao.pa_contains(i.fields,'tables')){\r\n\r\n        console.log('sources will be assigned A VALUE')\r\n        sources = i.fields.tables\r\n        own = i.fields.own\r\n      }\r\n     } \r\n         \r\n       sources \r\n         ? fields = self.combineFields(sources,own,collectionsIds) : ''\r\n       fields \r\n         ? i.fields = fields : ''\r\n        \r\n        \r\n        \r\n        \r\n        await self.insert(i,conn)\r\n         .then((insert)=>{\r\n           \r\n             collectionsIds.push(insert)\r\n            \r\n         })\r\n         .catch((failedInsert)=>{\r\n             \r\n              handler(failedInsert,null) \r\n              breakOut = true\r\n           \r\n         }) \r\n\r\n         if(breakOut) break\r\n        if(c === collections.length - 1 ){\r\n          \r\n           console.log('Operation completed successfully')\r\n           console.log(collectionsIds)\r\n           if(collectionsIds.length > 0){\r\n             console.log('PROCEDURE IS COMPLETED')\r\n             console.log(collectionsIds)\r\n            handler(null,{user:{username: collectionsIds[0].fields.email}})\r\n\r\n           }else{\r\n            handler('An insert has went wrong')\r\n           }\r\n          \r\n        }\r\n        \r\n    \r\n  }\r\n\r\n}\r\n\r\n\r\nexport const insert = function(inset,conn){\r\n\r\n     let self = this \r\n     let pao = pao\r\n  return new Promise(function(resolve, reject) {\r\n\r\n\r\n   // do a thing, possibly async, then \r\n  console.log('Executing the insert promise')\r\n\r\n     \r\n      let sql = `INSERT INTO ?? SET ?`;\r\n  let queryAttributes = [inset.name,inset.fields];\r\n  sql = conn.format(sql, queryAttributes);\r\n\r\n    //  let sql = `INSERTINTO${data.table}SET?`\r\n\r\n    conn.query(sql,function(e,r,f){\r\n      \r\n    \r\n    if(e) {\r\n      \r\n      console.log('Promise is rejecting')\r\n      reject(e) \r\n      \r\n    }else{\r\n      \r\n        \r\n       \r\n        \r\n\r\n        self.findOne({conn: conn,table: inset.name,query:{user:{id: r.insertId}},outComehandler: (e=null,r=null,data=null)=>{\r\n\r\n            let insert = {} \r\n\r\n            if(e){\r\n\r\n              console.log('the errorINSERT')\r\n              console.log(e)\r\n              console.log(data)\r\n              insert.error = e\r\n              insert.lastInsert = data.query.user.id\r\n              insert.fields = null\r\n              insert.collection = data.table\r\n\r\n  \r\n              console.log('Promise is Resolving with findOne error')\r\n              console.log(insert)\r\n              resolve(insert)\r\n\r\n            }else{\r\n\r\n\r\n              insert.lastInsert = data.query.user.id\r\n              insert.fields = r\r\n              insert.collection = data.table\r\n  \r\n              console.log('Promise is Resolving with FindOne SUCCESS')\r\n              console.log(insert)\r\n              resolve(insert)\r\n\r\n            }\r\n\r\n           \r\n\r\n        }})\r\n       \r\n\r\n\r\n\r\n\r\n        \r\n        \r\n      \r\n      \r\n    }\r\n\r\n      })\r\n\r\n\r\n\r\n  }); \r\n\r\n} \r\n\r\nexport const JOIN = async function(join,conn,handler = null){\r\n\t\r\n  \r\n \r\n      const self = this \r\n\t\t\tconst pao = self.pao\r\n\t    \t    \r\n\t\t\tself.joinExek(join,conn)\r\n\t\t\t.then((result)=>{\r\n        \r\n          console.log('jOIN is successful, sending results to the requester')\r\n          console.log(result)\r\n\t\t\t\t\thandler(null,result)\r\n\t\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch((failedRequest)=>{\r\n          \r\n          console.log('JOIN FAILED')\r\n          console.log(failedRequest)\r\n\t\t\t\t\thandler(failedRequest,null) \r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}) \r\n\r\n}\r\n\r\nexport const SEARCH = async function(search,conn,handler = null){\r\n\t\r\n  \r\n \r\n  const self = this \r\n  const pao = self.pao\r\n  console.log('THE SEARCH search object contents')\r\n  console.log(search)\r\n\r\n  if(!pao.pa_contains(search,'batch')){\r\n\r\n\r\n    self.searchExek(search,conn)\r\n    .then((result)=>{\r\n      \r\n        console.log('search is successful, sending results to the requester')\r\n        // console.log(result)\r\n        handler(null,result)\r\n        \r\n    })\r\n    .catch((failedRequest)=>{\r\n        \r\n        console.log('search FAILED')\r\n        console.log(failedRequest)\r\n        handler(failedRequest,null) \r\n        \r\n      \r\n    }) \r\n\r\n  }else{\r\n\r\n       let resultSet = []\r\n       let batch = search.search\r\n\r\n\r\n      for(let s=0; s < batch.length; s++){\r\n\r\n         await self.searchExek(batch[s],conn)\r\n          .then((result)=>{\r\n            \r\n              console.log('search is successful, pushing results to the resultSet')\r\n              // console.log(result)\r\n              resultSet.push(result)\r\n              if(s === batch.length - 1 ){\r\n          \r\n                console.log('Operation completed successfully')\r\n                // console.log(resultSet)\r\n                 handler(null,resultSet)\r\n     \r\n                \r\n             }\r\n              // handler(null,result)\r\n              \r\n          })\r\n          .catch((failedRequest)=>{\r\n              \r\n              console.log('search FAILED')\r\n              console.log(failedRequest) \r\n              resultSet.push({item: s,errorMessage: `Item of ${s} position has failed`,error: failedRequest})\r\n              // handler(failedRequest,null) \r\n              \r\n            \r\n          }) \r\n\r\n         \r\n        \r\n      }\r\n\r\n  }\r\n \r\n\r\n}\r\n\r\nexport const combineFields = function(tables,own,ids){\r\n\r\nlet fields = {} \r\n\r\nconsole.log('COMBINE FIELDS GETS A CALL')\r\n\r\n\r\ntables.forEach((v,i)=>{\r\n                \r\n                \r\n                for(let co = 0; co < ids.length; co++){\r\n                  \r\n                  if(ids[co].collection === v.name){\r\n                    \r\n                     v.values.forEach((vv,ii)=>{\r\n                       \r\n                         console.log('THE VV')\r\n                         console.log(vv)\r\n                         let fieldValuePair = vv.split('.') \r\n\r\n                         console.log('FIELD VALUE PAIR')\r\n                         console.log(fieldValuePair)\r\n                        fields[fieldValuePair[1]] = ids[co].fields[fieldValuePair[0]]\r\n                         \r\n                         \r\n                         \r\n                       \r\n                     }) \r\n                     \r\n                     break;\r\n                  }\r\n                }\r\n           \r\n           })\r\n          \r\n\r\n       \r\nlet keys = Object.keys(own)  \r\nconsole.log('THE KEYS OF OWN')\r\nconsole.log(keys)   \r\n\r\nkeys.forEach((k,i)=>{\r\n  \r\n    fields[k] = own[k]\r\n})\r\n\r\nconsole.log('THE FIELDS')\r\nconsole.log(fields)\r\nreturn fields\r\n}\r\n\r\n\r\nexport const rollback = function(rolbacks){\r\n\r\nconst self = this\r\n\r\n\r\nrolbacks.forEach((roll,i)=>{\r\n \r\n  self.deleteOne({id: roll.lastInsert},conn)\r\n  \r\n})\r\n\r\n\r\n}\r\n\r\nexport const joinExek = function(join,conn){\r\n\r\n   let self = this\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    \r\n    \r\n           // do a thing, possibly async, then \r\n            console.log('Executing the JOIN promise')\r\n            \r\n            \r\n     \r\n            let options = {\r\n              \r\n              fields: join.returnFields,\r\n              from: {table: join.tables[0],condition: self.joinConditionsFormat(join.conditions) },\r\n              joinPoints: self.joinConditionsFormat(join.joinPoints,'ON'),\r\n              tables: join.tables.splice(1,join.tables.length),\r\n              type: join.type.toUpperCase(),\r\n              length: join.joins\r\n            }\r\n  \r\n       \r\n           let sql = self.joinStatement(options);\r\n           let queryAttributes = [ options.from.table,options.tables[0]]\r\n           console.log('THE SQL BEFORE FORMAT')\r\n           console.log(sql)\r\n           sql = conn.format(sql,queryAttributes);\r\n           console.log(sql)\r\n   \r\n            conn.query(sql,function(e,r,f){\r\n            \r\n          \r\n                if(e) {\r\n                  \r\n                    console.log('Promise is rejecting JOIN')\r\n                    console.log(e)\r\n                    reject(e) \r\n                    \r\n                }else{\r\n                  \r\n                    console.log('Promise is Resolving JOIN')\r\n                    console.log(r)\r\n                    console.log(r[0])\r\n                    resolve(r[0])\r\n                }\r\n    \r\n            \r\n            })\r\n  \r\n  \r\n  \r\n  }); \r\n  \r\n  } \r\n\r\n\r\nexport const joinConditionsFormat = function(conditions,type=null){\r\n\r\n   console.log('CONDITIONS')\r\n   console.log(conditions)\r\n\r\n    if(type){\r\n\r\n    \r\n          let cons = conditions \r\n          let condition = []\r\n\r\n          cons.forEach((con,i)=>{\r\n\r\n            let conList = con.trim().split(' ')\r\n            let operand = '='\r\n\r\n          \r\n            condition.push(`${conList[0]} ${operand} ${conList[2]}`)\r\n\r\n\r\n          })\r\n          \r\n          console.log('THE JOIN ON CONDITION')\r\n          console.log(condition)\r\n          return condition\r\n\r\n\r\n        \r\n\r\n     \r\n\r\n    }else{\r\n\r\n      let cons = conditions \r\n      let condition = ''\r\n\r\n      cons.forEach((con,i)=>{\r\n\r\n        console.log('THE con ITEM')\r\n        console.log(con)\r\n        let conList = con.trim().split(' ')\r\n        console.log('THE CONLIST')\r\n        console.log(conList)\r\n        let operand = ''\r\n\r\n\r\n        switch(conList[1]){\r\n\r\n          case 'EQUALS' : \r\n            operand = '='\r\n            break;\r\n          case 'ISGREATEROREQUALS' : \r\n            operand = '>='\r\n            break;\r\n          case 'ISLESSOREQUALS' : \r\n            operand = '<='\r\n            break;\r\n          default: \r\n           operand = '='\r\n        }\r\n      \r\n        condition += `${conList[0]} ${operand} '${conList[2]}'`\r\n\r\n\r\n      })\r\n      \r\n      console.log('THE JOIN FROM CONDITION')\r\n      console.log(condition)\r\n      return condition.trim()\r\n\r\n\r\n    }\r\n\r\n}\r\n  \r\nexport const joinStatement = function (options){\r\n  \r\n  console.log('THE JOIN OPTIONS')\r\n  console.log(options)\r\n\t \r\n  switch(options.length){\r\n    \r\n    \r\n     case 3: \r\n       return `SELECT ${options.fields}\r\n               FROM ${options.from.table}\r\n               JOIN ${options.tables[0]}\r\n                  ON ${options.conditions[0]}\r\n               JOIN options.tables[1]\r\n                  ON ${options.conditions[1]}\r\n               WHERE ${options.from.condition}\r\n               \r\n               `\r\n       break;\r\n     case 4: \r\n       return `SELECT ${options.fields}\r\n               FROM ${options.from.table}\r\n               JOIN ${options.tables[0]}\r\n                  ON ${options.conditions[0]}\r\n               JOIN options.tables[1]\r\n                  ON ${options.conditions[1]}\r\n               JOIN options.tables[2]\r\n                  ON ${options.conditions[2]}\r\n               WHERE ${options.from.condition}\r\n               \r\n               `\r\n       break;\r\n     case 5: \r\n       return `SELECT ${options.fields}\r\n               FROM ${options.from.table}\r\n               JOIN ${options.tables[0]}\r\n                  ON ${options.conditions[0]}\r\n               JOIN options.tables[1]\r\n                  ON ${options.conditions[1]}\r\n               JOIN options.tables[2]\r\n                  ON ${options.conditions[2]} \r\n               JOIN options.tables[3]\r\n                  ON ${options.conditions[3]}\r\n               WHERE ${options.from.condition}\r\n               \r\n               `\r\n       break;\r\n     default: \r\n       return `SELECT ${options.fields}\r\n               FROM  ??\r\n               JOIN  ${options.tables[0]}\r\n                  ON ${options.joinPoints[0]}\r\n               WHERE ${options.from.condition}\r\n               `\r\n  }\r\n  \r\n  \r\n}\r\n\r\n \r\nexport const searchExek = function(search,conn){\r\n\r\n  const self = this\r\n  const contains = self.pao.pa_contains\r\n  console.log('THE SEARCH')\r\n  console.log(search)\r\n\r\n return new Promise(function(resolve, reject) {\r\n   \r\n   \r\n          // do a thing, possibly async, then \r\n           console.log('Executing the search promise')\r\n  \r\n           \r\n          let sql = ''\r\n          let attribs = null\r\n          let sqliks = self.searchStatement(self.searchOptions(search));\r\n       \r\n           console.log('THE SQLKIKS OBJECT')\r\n           console.log(sqliks)\r\n           contains(sqliks.attribs,'tables') ? attribs = [sqliks.attribs.from.table,...sqliks.attribs.tables] : attribs = [sqliks.attribs.from.table]\r\n\r\n          sql = sqliks.statement\r\n          let queryAttributes = attribs\r\n          console.log('THE SQL BEFORE FORMAT')\r\n          console.log(sql)\r\n          sql = conn.format(sql,queryAttributes);\r\n          console.log(sql)\r\n  \r\n           conn.query(sql,function(e,r,f){\r\n           \r\n         \r\n               if(e) {\r\n                 \r\n                   console.log('Promise is rejecting search')\r\n                   console.log(e)\r\n                   reject(e) \r\n                   \r\n               }else{\r\n                 \r\n                   console.log('Promise is Resolving search')\r\n                  //  console.log(r)\r\n                  //  console.log(r[0])\r\n                   resolve(r)\r\n               }\r\n   \r\n           \r\n           })\r\n \r\n \r\n \r\n }); \r\n \r\n } \r\n\r\n\r\nexport const searchConditionsFormat = function(conditions,type=null){\r\n\r\n  console.log('CONDITIONS')\r\n  console.log(conditions)\r\n\r\n   const self = this \r\n   const pao = self.pao\r\n\r\n  if(type){\r\n\r\n   \r\n     \r\n    let condition = self.parseFormatCondition(conditions,type)\r\n    console.log('THE search ON CONDITION')\r\n    console.log(condition)\r\n    \r\n    return condition\r\n\r\n\r\n  }else{\r\n\r\n  let cons = conditions \r\n  let condition = ''\r\n\r\n  cons.forEach((con,i)=>{\r\n\r\n\r\n\r\n    if(con.indexOf('GROUP::') >= 0 ){\r\n\r\n       console.log('CONDITION FROM SEARCHCONDITIONFORMAT')\r\n       console.log(con)\r\n       condition += self.parseGroup(con)\r\n\r\n    }else{\r\n\r\n       condition += self.parseFormatCondition(con)\r\n\r\n    }\r\n\r\n\r\n\r\n    /*console.log('THE con ITEM')\r\n    console.log(con)\r\n    let conList = con.trim().split(' ')\r\n    console.log('THE CONLIST')\r\n    console.log(conList)\r\n    let operand = ''\r\n    let leftoperand = ''\r\n    let multiCon = false\r\n    let match = false\r\n\r\n    if(conList[0].trim() === 'MATCH' || conList[1].trim() === 'MATCH'){\r\n\r\n      \r\n      if(conList.indexOf('AGAINST') > 0 && conList.length >= 5){\r\n\r\n\r\n        let oCon = conList.slice(0)\r\n\r\n        console.log('THE O CON')\r\n        console.log(oCon) \r\n         multiCon = oCon[0].trim().toUpperCase() !== 'MATCH' ? true : false\r\n\r\n        let matchFields = ''\r\n        let matchKeys = ''\r\n\r\n        if(multiCon){\r\n          \r\n            matchFields = oCon[2].trim()\r\n          matchKeys = oCon[4].trim()\r\n          \r\n        }else{\r\n            \r\n              matchFields = oCon[1].trim()\r\n            matchKeys = oCon[3].trim()\r\n        }\r\n        \r\n\r\n        matchFields[0] === '[' ? matchFields = matchFields.slice(1,matchFields.length -1) : ''\r\n        matchKeys[0] === '[' ? matchKeys = matchKeys.slice(1,matchKeys.length - 1) : ''\r\n        console.log('THE MATCH FIELDS')\r\n        console.log(matchFields)\r\n        let op = ''\r\n        operand = multiCon ? oCon[3].trim() : oCon[2].trim() \r\n        let mode = multiCon ? oCon[5] : oCon[4]\r\n      \r\n\r\n      \r\n        switch(mode){\r\n\r\n        case 'BOOLEAN' : \r\n          op = `AGAINST (\"${matchKeys}\"\" IN BOOLEAN MODE) `\r\n        break;\r\n        case 'QUERY' : \r\n          op = `AGAINST (\"${matchKeys}\" IN QUERY EXPRESSION MODE) `\r\n        break;\r\n        \r\n        default: \r\n          op = `AGAINST (\"${matchKeys}\" IN NATURAL LANGUAGE MODE) `\r\n\r\n        }\r\n\r\n        conList[0] = multiCon ? `${oCon[0]} MATCH (${matchFields}) ${op}` :`MATCH (${matchFields}) ${op}`\r\n      //  leftoperand = ` ${op}`\r\n        match = true\r\n\r\n\r\n        \r\n\r\n      }else{\r\n\r\n\r\n      }\r\n\r\n    }else{\r\n\r\n\r\n      \r\n        let oCon = conList.slice(0)\r\n\r\n        console.log('THE O CON')\r\n        console.log(oCon) \r\n        multiCon = oCon[0].trim().toUpperCase() === ('AND' || 'OR' || 'NOT') ? true : false     \r\n        let operator = multiCon ? conList[2] : conList[1]\r\n\r\n      switch(operator){\r\n\r\n        case 'EQUALS' : \r\n          operand = '='\r\n          break;\r\n        case 'ISGREATEROREQUALS' : \r\n          operand = '>='\r\n          break;\r\n        case 'ISLESSOREQUALS' : \r\n          operand = '<='\r\n          break;\r\n        case 'ISLIKE' : \r\n          operand = 'LIKE'\r\n          break;\r\n        case 'ISIN' : \r\n        operand = 'IN'\r\n        break;\r\n        case 'ISREGEX' : \r\n          operand = 'REGEXP'\r\n          break;\r\n        case 'ISNOT' : \r\n        operand = 'NOT'\r\n        break;\r\n        case 'ISNOTNULL' : \r\n        operand = 'IS NOT NULL'\r\n        break;\r\n        case 'ISNULL' : \r\n        operand = 'IS NULL'\r\n        break;\r\n        default: \r\n          operand = '='\r\n      }\r\n\r\n    leftoperand = multiCon ? conList[3] : conList[2]\r\n\r\n    }\r\n\r\n    match ? condition += `${conList[0]}` : multiCon ? condition += ` ${conList[0]} ${conList[1]} ${operand} '${leftoperand}' `\r\n    : condition += `${conList[0]} ${operand} '${leftoperand}' `*/\r\n    \r\n\r\n\r\n  })\r\n\r\n  console.log('THE search FROM CONDITION')\r\n  console.log(condition)\r\n  return condition.trim()\r\n\r\n\r\n  }\r\n\r\n}\r\n \r\nexport const searchStatement = function (options){\r\n \r\n console.log('THE search OPTIONSSTATEMENT')\r\n console.log(options)\r\n const self = this \r\n const contains = self.pao.pa_contains\r\n\r\n if(!options) return null\r\n\r\n  if(contains(options,'length')){\r\n    \r\n    let sqlAttribs = {}\r\n     sqlAttribs.attribs = {from: options.from,tables: options.tables}\r\n     console.log('THE OPTIONS LENGTH')\r\n     console.log(options.length)\r\n     let limit = ' '\r\n     let sort = options.sort ? self.sort(options.sort) :' '\r\n     options.take ? limit = self.limit(options.take,'take') :  options.range ? limit = self.limit(options.range,'range') :' '\r\n\r\n    switch(options.length){\r\n    \r\n      case 3: \r\n       \r\n        sqlAttribs.statement = `SELECT ${options.fields}\r\n                FROM ??\r\n                JOIN ??\r\n                  ON ${options.joinPoints[0]}\r\n                JOIN ??\r\n                  ON ${options.joinPoints[1]}\r\n                WHERE ${options.from.condition}\r\n                ${sort}\r\n                ${limit}\r\n                \r\n                `\r\n        break;\r\n      case 4:\r\n        \r\n        sqlAttribs.statement = `SELECT ${options.fields}\r\n                FROM ${options.from.table}\r\n                JOIN ${options.tables[0]}\r\n                  ON ${options.joinPoints[0]}\r\n                JOIN ${options.tables[1]}\r\n                  ON ${options.joinPoints[1]}\r\n                JOIN ${options.tables[2]}\r\n                  ON ${options.joinPoints[2]}\r\n                WHERE ${options.from.condition}\r\n                ${sort}\r\n                ${limit}\r\n                `\r\n        break;\r\n      case 5:\r\n        \r\n       sqlAttribs.statement = `SELECT ${options.fields}\r\n                FROM ${options.from.table}\r\n                JOIN ${options.tables[0]}\r\n                  ON ${options.joinPoints[0]}\r\n                JOIN ${options.tables[1]}\r\n                  ON ${options.joinPoints[1]}\r\n                JOIN ${options.tables[2]}\r\n                  ON ${options.joinPoints[2]} \r\n                JOIN ${options.tables[3]}\r\n                  ON ${options.joinPoints[3]}\r\n                WHERE ${options.from.condition}\r\n                ${sort}\r\n                ${limit}\r\n                `\r\n        break;\r\n      default: \r\n      \r\n        sqlAttribs.statement = `SELECT ${options.fields}\r\n                FROM  ??\r\n                JOIN  ${options.tables[0]}\r\n                  ON ${options.joinPoints[0]}\r\n                WHERE ${options.from.condition}\r\n                ${sort}\r\n                ${limit}\r\n              `\r\n    }\r\n\r\n    return sqlAttribs\r\n  \r\n\r\n  }else{\r\n\r\n    let sqlAttribs = {}\r\n    sqlAttribs.attribs = {from: options.from}\r\n    let limit = ' '\r\n    let sort = options.sort ? self.sort(options.sort) :' '\r\n     options.take ? limit = self.limit(options.take,'take') :  options.range ? limit = self.limit(options.range,'range') :' '\r\n\r\n    \r\n    if(contains(options.from,'condition')){\r\n\r\n      sqlAttribs.statement = `SELECT ${options.fields}\r\n              FROM  ??\r\n              WHERE ${options.from.condition}\r\n              ${sort}\r\n              ${limit}\r\n              `\r\n\r\n    }else{\r\n\r\n      sqlAttribs.statement = `SELECT ${options.fields}\r\n                              FROM  ??\r\n                              ${sort}\r\n                              ${limit}\r\n                              `\r\n\r\n    }\r\n\r\n    return sqlAttribs\r\n   \r\n\r\n  }\r\n  \r\n \r\n \r\n}\r\n\r\nexport const searchOptions = function (i,multiSet=false){\r\n \r\n  \r\n  const self = this \r\n  let pao = self.pao\r\n  let contains = pao.pa_contains \r\n  let setTables = ''\r\n  setTables = multiSet ? [...i.tables] : ''\r\n\r\n  self.log('THE search BATCH ITEM') \r\n  self.log(i)\r\n  console.log(i)\r\n\r\n\r\n\r\n\r\n    if(contains(i,['joins','conditions','joinPoints'])){\r\n\r\n       console.log('THE SEARCH ITEM CONTAINS BOTH JOINS,CONDITIONS, AND JOINPOINTS')\r\n\r\n       let options = {}\r\n       \r\n       options.from = {table: i.tables[0],condition: self.searchConditionsFormat(i.conditions) }\r\n       options.joinPoints = i.joinPoints ? self.searchConditionsFormat(i.joinPoints,'ON') : null\r\n       options.length = i.tables.length\r\n       options.tables =  i.tables.splice(1,i.tables.length)\r\n      \r\n      //  contains(i,['returnFields','opiks']) ? options.fields = self.searchFieldsFormat(i.opiks,i.returnFields) : ''\r\n      //  contains(i,'returnFields') ? i.returnFields.length === 1 && i.returnFields[0].trim() === 'all' ? options.fields='*' : options.fields= i.returnFields : ''\r\n      //  contains(i,'opiks') ?  options.fields = self.searchFieldsFormat(i.opiks) : ''\r\n      contains(i,['returnFields','opiks']) \r\n        ? options.fields = self.searchFieldsFormat(i.opiks,i.returnFields) \r\n        : contains(i,'opiks') \r\n            ?  options.fields = self.searchFieldsFormat(i.opiks) \r\n            :  contains(i,'returnFields') ? i.returnFields.length === 1 && i.returnFields[0].trim() === 'all' ? options.fields='*' : options.fields= i.returnFields : ''\r\n       contains(i,'type') ? options.type = i.type : ''\r\n       contains(i,'take') ? options.take = i.take : ''\r\n       contains(i,'range') ? options.range = i.range : ''\r\n       contains(i,'soundex') ? options.soundex = i.soundex : ''\r\n       contains(i,'sort') ? options.sort = i.sort : '' \r\n       contains(i,'set') ? options.set = multiSet ? self.set(i.set,setTables) : self.set(i.set) : ''\r\n      //  contains(i,'takeFrom') ? options.takeFrom = i.takeFrom : '' \r\n       contains(i,'takeFrom') \r\n                ?  i.takeFrom.conditions \r\n              \r\n                      ? (options.takeFrom = i.takeFrom, options.takeFrom.condition = self.searchConditionsFormat(i.takeFrom.conditions))\r\n                      : options.takeFrom = i.takeFrom\r\n                  \r\n                : ''\r\n\r\n\r\n\r\n       return options\r\n    }else if(contains(i,['conditions'])){\r\n\r\n      let options = {}\r\n      options.from = {table: i.tables[0],condition: self.searchConditionsFormat(i.conditions) }\r\n\r\n      // contains(i,['returnFields','opiks']) ? options.fields = self.searchFieldsFormat(i.opiks,i.returnFields) : ''\r\n      // contains(i,'returnFields') ? i.returnFields.length === 1 && i.returnFields[0].trim() === 'all' ? options.fields='*' : options.fields= i.returnFields : ''\r\n      // contains(i,'opiks') ?  options.fields = self.searchFieldsFormat(i.opiks) : ''\r\n\r\n      contains(i,['returnFields','opiks']) \r\n        ? options.fields = self.searchFieldsFormat(i.opiks,i.returnFields) \r\n        : contains(i,'opiks') \r\n            ?  options.fields = self.searchFieldsFormat(i.opiks) \r\n            :  contains(i,'returnFields') ? i.returnFields.length === 1 && i.returnFields[0].trim() === 'all' ? options.fields='*' : options.fields= i.returnFields : ''\r\n      contains(i,'type') ? options.type = i.type : ''\r\n      contains(i,'take') ? options.take = i.take : ''\r\n      contains(i,'range') ? options.range = i.range : ''\r\n      contains(i,'soundex') ? options.soundex = i.soundex : ''\r\n      contains(i,'sort') ? options.sort = i.sort : '' \r\n      contains(i,'set') ? options.set = multiSet ? self.set(i.set,setTables) : self.set(i.set) : ''\r\n      contains(i,'takeFrom') \r\n          ?  i.takeFrom.conditions \r\n        \r\n                ? (options.takeFrom = i.takeFrom, options.takeFrom.condition = self.searchConditionsFormat(i.takeFrom.conditions))\r\n                : options.takeFrom = i.takeFrom\r\n            \r\n          : ''\r\n\r\n\r\n      return options\r\n\r\n    }else if(contains(i,'tables') && i.tables instanceof Array){\r\n\r\n      let options = {}\r\n      options.from = {table: i.tables[0]}\r\n\r\n      contains(i,['returnFields','opiks']) \r\n        ? options.fields = self.searchFieldsFormat(i.opiks,i.returnFields) \r\n        : contains(i,'opiks') \r\n            ?  options.fields = self.searchFieldsFormat(i.opiks) \r\n            :  contains(i,'returnFields') ? i.returnFields.length === 1 && i.returnFields[0].trim() === 'all' ? options.fields='*' : options.fields= i.returnFields : ''\r\n     \r\n      // contains(i,'opiks') ?  options.fields = self.searchFieldsFormat(i.opiks) : ''\r\n      contains(i,'type') ? options.type = i.type : ''\r\n      contains(i,'take') ? options.take = i.take : ''\r\n      contains(i,'range') ? options.range = i.range : ''\r\n      contains(i,'soundex') ? options.soundex = i.soundex : ''\r\n      contains(i,'sort') ? options.sort = i.sort : '' \r\n      contains(i,'set') ? options.set = multiSet ? self.set(i.set,setTables) : self.set(i.set) : ''\r\n      contains(i,'takeFrom') \r\n          ?  i.takeFrom.conditions \r\n        \r\n                ? (options.takeFrom = i.takeFrom, options.takeFrom.condition = self.searchConditionsFormat(i.takeFrom.conditions))\r\n                : options.takeFrom = i.takeFrom\r\n            \r\n          : ''\r\n\r\n      return options\r\n\r\n    }else{\r\n\r\n      return null\r\n    }\r\n   \r\n  \r\n  \r\n }  \r\n\r\n export const searchFieldsFormat = function(fields,rFields=null){\r\n\r\n  console.log('THE SELECT STATEMENT OPIKS OBJECT')\r\n  console.log(fields)\r\n  console.log(rFields)\r\n\r\n  const self = this \r\n  const contains = self.pao.pa_contains\r\n\r\n\r\n   \r\n         let fis = fields \r\n         let keyword = ''\r\n         let otherFields = rFields ? rFields.join(',') : ''\r\n         let all = ''\r\n         let fieldstatement = ''\r\n         let multiFields = []\r\n         let allFields =    otherFields.indexOf('all') >= 0\r\n         let lastCondition = false\r\n\r\n         console.log('THE OTHER FIELDS')\r\n         console.log(otherFields)\r\n         console.log(otherFields.indexOf('all') >= 0)\r\n\r\n         for(let fi=0; fi < fis.length; fi++){\r\n\r\n            if(fis[fi].indexOf('fuxin') >=0 || fis[fi].indexOf('field') >= 0 ){\r\n\r\n              multiFields.push(true)\r\n            }\r\n            if(multiFields.length > 1){\r\n              break;\r\n            }\r\n\r\n         }\r\n\r\n         fis.forEach((f,i)=>{\r\n\r\n           let formated = self.fieldFormat(f)\r\n           if(formated instanceof Object){\r\n\r\n              keyword = formated.value.toUpperCase()\r\n\r\n           }else{\r\n\r\n            console.log('THE FORMATED')\r\n            console.log(formated)\r\n            console.log(allFields)\r\n            console.log(otherFields)\r\n            if(i === fis.length-1){lastCondition = true}\r\n            fieldstatement += allFields ? multiFields && i !== fis.length - 1 ? `${formated},` : formated : lastCondition && rFields === null ? `${formated}`: `${formated},`\r\n\r\n           }\r\n           \r\n        \r\n         })\r\n\r\n        allFields === true ?  all = '*,' : ''\r\n\r\n        return  allFields  ?  `${all} ${keyword} ${fieldstatement}` : `${all} ${keyword} ${fieldstatement} ${otherFields}`\r\n         \r\n      \r\n       \r\n\r\n\r\n\r\n   \r\n\r\n}\r\n\r\n\r\nexport const fieldFormat = function(field,from=null){\r\n\r\n  console.log('THE SELECT STATEMENT OPIKS OBJECT FIELD FORMAT')\r\n  console.log(field)\r\n  const self = this \r\n  const contains = self.pao.pa_contains\r\n  \r\n        //  let splitFieldRegx = /\\.(?![^\\[]]*\\]])/ \r\n         let nestedIntFuxin = ''\r\n         let last = field.lastIndexOf('.as') >= 0 ? field.lastIndexOf('.as') : field.length\r\n\r\n          field.indexOf('.options[fuxin') >= 0 \r\n            ? nestedIntFuxin = field.slice(field.indexOf('.options[fuxin'),last)\r\n            : ''\r\n          console.log('THE NESTEDINTFUXIN')\r\n          console.log(nestedIntFuxin)\r\n          console.log(field) \r\n          nestedIntFuxin.trim() !== '' ? field = field.substr(0,field.indexOf(nestedIntFuxin)) : ''\r\n          // nestedIntFuxin.trim() !== '' ? field =  : '' \r\n        // let splicedArray = conList.splice(2)\r\n        // console.log('THE SPLICED ARRAY')\r\n        // console.log(splicedArray)\r\n        // console.log(splicedArray.join(' '))\r\n        // conList[2] = splicedArray.join(' ');\r\n        // console.log(conList)\r\n        // console.log(conList[2].indexOf('['))\r\n        //  let fieldList = field.trim().split('.')\r\n        //  fieldList.length > 3 ? fieldList[3].indexOf('as[') < 0 ? fieldList[2] = fieldList.splice(2).join(' ') : '' : ''\r\n         let fieldList = field.trim().split('.')\r\n         nestedIntFuxin.trim() !== '' ? fieldList.push(nestedIntFuxin) : ''\r\n         console.log('THE FIELD LIST')\r\n         console.log(fieldList)\r\n         \r\n         let fieldstatement = null \r\n         //fuxin.date_sub.options[fuxin.now,INTERVAL ${intExp} ${intUnit}]\r\n         let as = fieldList[0] === 'fuxin' ? fieldList.length > 3 ? `AS ${self.options(`${fieldList[3]}`,'as')}` : ' ' : ' '\r\n\r\n         console.log('THE as')\r\n         console.log(as)\r\n\r\n     \r\n            switch(fieldList[0]){\r\n\r\n              case 'keyword': \r\n                fieldstatement = from ? fieldList[1].toUpperCase() : {statement:'keyword',value: fieldList[1].toUpperCase()} \r\n              break;\r\n              case 'fuxin':\r\n                 fieldstatement = ` ${fieldList[1].toUpperCase()}(${self.options(`${fieldList[2]}`,'option')}) ${as} `\r\n              break;\r\n              case 'field':\r\n                if(fieldList.length === 3) fieldstatement = `${fieldList[1]} AS ${self.options(fieldList[2],'as')}`\r\n\r\n              break;\r\n              default:\r\n                fieldstatement=''\r\n            }\r\n\r\n         \r\n      \r\n         return fieldstatement.trim()\r\n\r\n\r\n\r\n   \r\n\r\n}\r\n\r\n\r\nexport const options = function(option,type=''){\r\n\r\n   const self = this \r\n   const contains = self.pao.pa_contains\r\n   console.log('THE CURRENT OPTION')\r\n   console.log(option)\r\n   \r\n   if(option !== 'undefined'){\r\n\r\n    let stripedOption = option.slice(option.indexOf('[')+1,option.lastIndexOf(']'))\r\n    console.log('OPTIONS: STRIPEDOPTION')\r\n    console.log(stripedOption)\r\n\r\n      if(type === 'as'){\r\n\r\n        return `${stripedOption}`\r\n  \r\n      }else if(type === 'option'){\r\n  \r\n        let args = stripedOption.split(',')\r\n  \r\n        if(args instanceof Array && args.length > 1){\r\n  \r\n          if(args[0].indexOf('keyword') >= 0){\r\n  \r\n            return self.fieldFormat(args[0],true)\r\n  \r\n          }else if(args[0].indexOf('fuxin') >= 0){\r\n            \r\n            if(args[1]){\r\n              return `${self.fieldFormat(args[0])},${args[1].trim()}`\r\n            }else{\r\n              return self.fieldFormat(args[0])\r\n            }\r\n           \r\n          }else{\r\n  \r\n            return `${stripedOption}`\r\n          }\r\n  \r\n        }else{\r\n          return args.join(',')\r\n        }\r\n      }\r\n\r\n   }else{\r\n\r\n     console.log('THE OPTION IS UNDEFINED')\r\n     console.log(option)\r\n     return ''\r\n\r\n   }\r\n\r\n}\r\n\r\nexport const sort = function(sort){\r\n\r\n    console.log('THE SORT GOT A RESPONSE')\r\n    console.log(sort)\r\n    let sortArgs = sort.split('.')\r\n    let sortFields = sort.slice(sort.indexOf('[') +1,sort.lastIndexOf(']'))\r\n    let sortStatement = ''\r\n\r\n    if(sortArgs[0].indexOf('order') >= 0){\r\n\r\n        if(sortArgs.length > 1){\r\n\r\n           if(sortArgs[1].toUpperCase() === 'DESC'){\r\n\r\n              sortStatement = `ORDER BY ${sortFields} DESC`\r\n\r\n           }else{\r\n\r\n            sortStatement = `ORDER BY ${sortFields}`\r\n\r\n           }\r\n\r\n        }else{\r\n\r\n          sortStatement = `ORDER BY ${sortFields}`\r\n\r\n        }    \r\n\r\n    }else if(sortArgs[0].indexOf('group') >= 0){\r\n\r\n\r\n        if(sortArgs.length > 1){\r\n\r\n          if(sortArgs[1].toUpperCase() === 'DESC'){\r\n\r\n            sortStatement = `GROUP BY ${sortFields} DESC`\r\n\r\n          }else{\r\n\r\n          sortStatement = `GROUP BY ${sortFields} ASC`\r\n\r\n          }\r\n\r\n      }else{\r\n\r\n        sortStatement = `GROUP BY ${sortFields} ASC`\r\n\r\n      }   \r\n    }\r\n\r\n   return sortStatement\r\n}\r\n\r\nexport const limit = function(limit,type=null){\r\n\r\n   \r\n   let limitStatement = ''\r\n   if(type === 'take'){\r\n\r\n     limitStatement = `LIMIT ${limit}`\r\n\r\n   }else if(type === 'range'){\r\n\r\n      let ranges = limit.split(',')\r\n      let offset = ranges[0]\r\n      let count = ranges[1]\r\n\r\n      limitStatement = `LIMIT ${count} OFFSET ${offset}`\r\n\r\n   }\r\n\r\n   return limitStatement\r\n   \r\n}\r\n\r\nexport const parseGroup = function(con,level=1){\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n  let isObject = pao.pa_isObject \r\n  //AND GROUP::2 START created_at FUXIN [ISGREATEROREQUALS fuxin.date_sub.options[fuxin.now,INTERVAL ${intExp} ${intUnit}]]\r\n\r\n  let fullCon = ''\r\n\r\n   let connector = ''\r\n   \r\n \r\n    let res =  self.conditionsConnector(con)\r\n    console.log('THE RES VALUE')\r\n    console.log(res)\r\n\r\n    if(isObject(res)){\r\n        \r\n       console.log('THE RES IS AN OBJECT')\r\n       console.log(res)\r\n       con = res.condixion\r\n       connector = res.connector\r\n    }\r\n     \r\n  if(con.trim().indexOf('GROUP::') === 0){\r\n\r\n    console.log('THE GROUP:: string is the first')\r\n    //let groupRegx = /GROUP::/\r\n    \r\n    let exStr = con.replace('GROUP::','').trim()\r\n    let groupLen = 0\r\n    let startStr = ''\r\n    let conStr = ''\r\n\r\n    console.log('THE extracted string')\r\n    console.log(exStr)\r\n\r\n    \r\n    \r\n\r\n    if(typeof parseInt(exStr[0]) === 'number'){\r\n\r\n      console.log('extStr type is a number')\r\n\r\n       groupLen = parseInt(exStr[0])\r\n\r\n       startStr = exStr.slice(1).trim()\r\n\r\n       if(startStr.indexOf('START') === 0 || startStr.indexOf('$') === 0){\r\n\r\n           conStr = startStr.replace('START','').trim()\r\n           console.log(startStr)\r\n           let groupCons = ''\r\n          //  let groupL1Cons = ''\r\n          //  let groupL2Cons = ''\r\n          //  let groupL3Cons = ''\r\n           let grouped = []\r\n           \r\n           console.log('PARSEGROUP EXECUTES THIS FAR')\r\n           console.log(conStr)\r\n\r\n\r\n           if(level === 1){\r\n\r\n             groupCons = conStr.split(';')\r\n\r\n             console.log('LEVEL 1 GROUPCONS')\r\n             console.log(groupCons)\r\n\r\n              grouped =  groupCons.map((c,i)=>{\r\n\r\n                            let connector = ''\r\n                            console.log('THE C CONDITION')\r\n                            console.log(c)\r\n                            console.log(c.indexOf('GROUP::'))\r\n                            //  self.conditionsConnector()\r\n\r\n                            if(c.indexOf('GROUP::') >= 0){\r\n\r\n                              return self.parseGroup(c,2)\r\n\r\n                            }else{\r\n\r\n                              return self.parseFormatCondition(c)\r\n\r\n                            }\r\n                      })\r\n\r\n\r\n\r\n           }else if(level === 2){\r\n\r\n            groupCons = conStr.split(',')\r\n\r\n             console.log('LEVEL 2 GROUPCONS')\r\n             console.log(groupCons)\r\n\r\n\r\n                grouped =  groupCons.map((c,i)=>{\r\n\r\n                              // c = self.conditionsConnector(c)\r\n\r\n                              if(c.indexOf('GROUP::') >= 0){\r\n\r\n                                return self.parseGroup(c,3)\r\n\r\n                              }else{\r\n\r\n                                return self.parseFormatCondition(c)\r\n\r\n                              }\r\n                          })\r\n\r\n           }else if(level === 3){\r\n\r\n                  groupCons = conStr.split('|')\r\n\r\n                  grouped =  groupCons.map((c,i)=>{\r\n\r\n                                  return self.parseFormatCondition(c)\r\n \r\n                            })\r\n\r\n           }\r\n\r\n          console.log('GROUPED')\r\n          console.log(grouped)\r\n          console.log(groupCons)\r\n\r\n           fullCon = `${connector} (${grouped.join(' ')})`\r\n           \r\n\r\n       }else{\r\n\r\n\r\n       }\r\n\r\n       \r\n\r\n\r\n     \r\n\r\n\r\n\r\n\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n }\r\n\r\n\r\n  console.log('THE FULL GROUPED CONDITION TO BE RETURNED:')\r\n  console.log(fullCon)\r\n  return fullCon\r\n\r\n}\r\n\r\nexport const parseFormatCondition = function(con,type=null){\r\n\r\n  const self = this \r\n  const pao = self.pao\r\n\r\n  if(type){\r\n\r\n   \r\n    let cons = con\r\n    let condition = []\r\n\r\n    cons.forEach((kon,i)=>{\r\n\r\n      // let conList = kon.trim().split(' ')\r\n      let conList = kon.trim().match(/(\\[[^\\]]+\\]|\\S+)/g)\r\n      let operand = '='\r\n\r\n    \r\n      condition.push(`${conList[0]} ${operand} ${conList[2]}`)\r\n\r\n\r\n    })\r\n    \r\n    console.log('THE search ON CONDITION')\r\n    console.log(condition)\r\n    return condition\r\n\r\n\r\n  \r\n\r\n\r\n\r\n  }else{\r\n\r\n\r\n  let condition = ''\r\n\r\n\r\n    console.log('THE con ITEM')\r\n    console.log(con)\r\n\r\n    // let conList = con.trim().split(' ')\r\n    // let conList = con.trim().match(/(?:\"^\\s\\[]+|\"[^\"]*\")+/g) \r\n    let conList = con.trim().match(/(\\[[^\\]]+\\]|\\S+)/g)\r\n    console.log('THE CONLIST')\r\n    console.log(conList)\r\n    let operand = ''\r\n    let leftoperand = ''\r\n    let multiCon = false\r\n    let match = false \r\n    let conFuxin = false \r\n    let whiteSpace = ' '\r\n\r\n    if((conList[0].trim() === 'MATCH' || conList[1].trim() === 'MATCH') || (conList[1].trim() === 'FUXIN' || conList[2].trim() === 'FUXIN')){\r\n\r\n      \r\n      if(conList.indexOf('AGAINST') > 0 && conList.length >= 5){\r\n\r\n\r\n        let oCon = conList.slice(0)\r\n\r\n        console.log('THE O CON')\r\n        console.log(oCon) \r\n         multiCon = oCon[0].trim().toUpperCase() !== 'MATCH' ? true : false\r\n\r\n        let matchFields = ''\r\n        let matchKeys = ''\r\n\r\n        if(multiCon){\r\n          \r\n            matchFields = oCon[2].trim()\r\n          matchKeys = oCon[4].trim()\r\n          \r\n        }else{\r\n            \r\n              matchFields = oCon[1].trim()\r\n            matchKeys = oCon[3].trim()\r\n        }\r\n        \r\n\r\n        matchFields[0] === '[' ? matchFields = matchFields.slice(1,matchFields.length -1) : ''\r\n        matchKeys[0] === '[' ? matchKeys = matchKeys.slice(1,matchKeys.length - 1) : ''\r\n        console.log('THE MATCH FIELDS')\r\n        console.log(matchFields)\r\n        let op = ''\r\n        operand = multiCon ? oCon[3].trim() : oCon[2].trim() \r\n        let mode = multiCon ? oCon[5] : oCon[4]\r\n      \r\n\r\n      \r\n        switch(mode){\r\n\r\n        case 'BOOLEAN' : \r\n          op = `AGAINST (\"${matchKeys}\"\" IN BOOLEAN MODE) `\r\n        break;\r\n        case 'QUERY' : \r\n          op = `AGAINST (\"${matchKeys}\" IN QUERY EXPRESSION MODE) `\r\n        break;\r\n        \r\n        default: \r\n          op = `AGAINST (\"${matchKeys}\" IN NATURAL LANGUAGE MODE) `\r\n\r\n        }\r\n\r\n        conList[0] = multiCon ? `${oCon[0]} MATCH (${matchFields}) ${op}` :`MATCH (${matchFields}) ${op}`\r\n      //  leftoperand = ` ${op}`\r\n        match = true\r\n\r\n\r\n        \r\n\r\n      }else{\r\n\r\n        //[ISGREATEROREQUALS fuxin.date_sub.options[fuxin.now,INTERVAL ${intExp} ${intUnit}]] \r\n        //created_at FUXIN [ISGREATEROREQUALS fuxin.date_sub.options[fuxin.now,INTERVAL ${intExp} ${intUnit}]]\r\n\r\n        let oCon = conList.slice(0) \r\n        conFuxin = true\r\n\r\n        console.log('THE O CON::FUXIN')\r\n        console.log(oCon) \r\n         multiCon = oCon[1].trim().toUpperCase() !== 'FUXIN' ? true : false \r\n         let fuxinIndex = multiCon ? 3 : 2 \r\n         let splicedFuxinArr = oCon.splice(fuxinIndex) \r\n         oCon.push(splicedFuxinArr.join(' '))\r\n         console.log(fuxinIndex)\r\n         console.log(oCon)\r\n        //  console.log(splicedFuxinArr)\r\n\r\n\r\n\r\n\r\n       \r\n\r\n        // if(oCon.indexOf('FUXIN') > 0){\r\n\r\n        //   console.log('THE FUXIN OP IN SEARCHCONDITIONS')\r\n        //   console.log(oCon) \r\n        //   let splicedArray = multiCon ? oCon.splice(3) : oCon.splice(2)\r\n        //   console.log('THE SPLICED ARRAY')\r\n        //   console.log(splicedArray)\r\n        //   console.log(splicedArray.join(' '))\r\n        //   multiCon ? oCon[3] = splicedArray.join(' ') : oCon[2] = splicedArray.join(' ');\r\n\r\n        //   console.log(oCon)\r\n        //   console.log(oCon[2].indexOf('['))\r\n        //   // throw new Error()\r\n\r\n          if(oCon[fuxinIndex].indexOf('[') >= 0){\r\n\r\n            console.log('OTHER CONTENT IS IN THE SQUARE BRACKETS')\r\n            let stripedSqBkts = oCon[fuxinIndex].slice(1,oCon[fuxinIndex].length -1) \r\n                stripedSqBkts = stripedSqBkts.trim()\r\n            // let splitRegex = /([.*?])/g\r\n            console.log('AFTER THE STRIPED HAS BEEN TRIMMED')\r\n            console.log(stripedSqBkts)\r\n            let operator = stripedSqBkts.substr(0,stripedSqBkts.indexOf(' '))\r\n            let functionalStr = stripedSqBkts.substr(stripedSqBkts.indexOf(' ')+1)\r\n            console.log('THE SPLITFUXINCONS')\r\n            console.log(operator)\r\n            console.log(functionalStr)\r\n            let gotOperand = self.getOperand(operator) \r\n            let bakedFuxin = self.fieldFormat(functionalStr)  \r\n            console.log(gotOperand)\r\n            console.log(bakedFuxin)\r\n            // throw new Error()\r\n            condition = multiCon ?  `${oCon[0]} ${oCon[1]} ${gotOperand} ${bakedFuxin}`  :  `${oCon[0]} ${gotOperand} ${bakedFuxin}` \r\n            console.log('THE CONDITION IN FUXIN TEST')\r\n            console.log(condition)\r\n\r\n\r\n\r\n\r\n          }\r\n        // }\r\n\r\n      }\r\n\r\n    }else{\r\n\r\n\r\n      \r\n        let oCon = conList.slice(0)\r\n\r\n        console.log('THE O CON')\r\n        console.log(oCon) \r\n        let firstStrItem = oCon[0].trim().toUpperCase()\r\n        multiCon = (firstStrItem ===  'AND' || firstStrItem === 'OR' || firstStrItem === 'NOT') ? true : false     \r\n        let operator = multiCon ? conList[2] : conList[1]\r\n\r\n        console.log('THE MULTICON STATUS:::')\r\n        console.log(multiCon)\r\n        console.log(oCon) \r\n        operand = self.getOperand(operator)\r\n\r\n      // switch(operator){\r\n\r\n      //   case 'EQUALS' : \r\n      //     operand = '='\r\n      //     break;\r\n      //   case 'ISGREATEROREQUALS' : \r\n      //     operand = '>='\r\n      //     break;\r\n      //   case 'ISLESSOREQUALS' : \r\n      //     operand = '<='\r\n      //     break;\r\n      //   case 'ISLIKE' : \r\n      //     operand = 'LIKE'\r\n      //     break;\r\n      //   case 'ISIN' : \r\n      //   operand = 'IN'\r\n      //   break;\r\n      //   case 'ISREGEX' : \r\n      //     operand = 'REGEXP'\r\n      //     break;\r\n      //   case 'ISNOT' : \r\n      //   operand = 'NOT'\r\n      //   break;\r\n      //   case 'ISNOTNULL' : \r\n      //   operand = 'IS NOT NULL'\r\n      //   break;\r\n      //   case 'ISNULL' : \r\n      //   operand = 'IS NULL'\r\n      //   break;\r\n      //   default: \r\n      //     operand = '='\r\n      // }\r\n\r\n    leftoperand = multiCon ? conList[3] : conList[2] \r\n    leftoperand[0] === '[' \r\n        ? leftoperand = `'${leftoperand.slice(1,leftoperand.length -1)}'` \r\n        : leftoperand.indexOf('KEY::') >= 0 \r\n            ? leftoperand = `${leftoperand.replace('KEY::','').trim()}`\r\n            : leftoperand = `'${leftoperand}'`\r\n      \r\n    console.log('THE VALUE OF THE LEFFFFFT OPERAND')\r\n    console.log(leftoperand)\r\n    console.log(leftoperand.indexOf('KEY::'))\r\n\r\n    }\r\n\r\n    if(!conFuxin){\r\n\r\n      match ? condition += `${conList[0]}` : multiCon ? condition += `${whiteSpace} ${conList[0]} ${conList[1]} ${operand} ${leftoperand}`\r\n    : condition += `${conList[0]} ${operand} ${leftoperand}`\r\n\r\n    }\r\n    \r\n    \r\n\r\n\r\n  \r\n\r\n  console.log('THE search FROM CONDITION')\r\n  console.log(condition)\r\n  return condition\r\n\r\n\r\n  }\r\n \r\n}\r\n\r\n\r\nexport const getOperand = function(operator) {\r\n\r\n  let operand = ''\r\n\r\n  switch(operator){\r\n\r\n    case 'EQUALS' : \r\n      operand = '='\r\n      break;\r\n    case 'ISGREATEROREQUALS' : \r\n      operand = '>='\r\n      break;\r\n    case 'ISLESSOREQUALS' : \r\n      operand = '<='\r\n      break;\r\n    case 'ISLIKE' : \r\n      operand = 'LIKE'\r\n      break;\r\n    case 'ISIN' : \r\n    operand = 'IN'\r\n    break;\r\n    case 'ISREGEX' : \r\n      operand = 'REGEXP'\r\n      break;\r\n    case 'ISNOT' : \r\n    operand = 'NOT'\r\n    break;\r\n    case 'ISNOTNULL' : \r\n    operand = 'IS NOT NULL'\r\n    break;\r\n    case 'ISNULL' : \r\n    operand = 'IS NULL'\r\n    break;\r\n    default: \r\n      operand = '='\r\n  }\r\n\r\n return operand\r\n\r\n}\r\n\r\n\r\nexport const conditionsConnector = function(c){\r\n\r\n  let connector = {}\r\n\r\n  console.log('THE INDEX OF GROUP:: IN CONDITIONS CONNECTOR')\r\n  console.log(c.trim().indexOf('GROUP::'))\r\n  console.log(c)\r\n\r\n  if(c.trim().indexOf('GROUP::') > 0){\r\n\r\n    console.log('THE INDEX OF GROUP IS AT ONE')\r\n\r\n\r\n    if(c.trim().indexOf('AND') === 0){\r\n\r\n      connector.connector = ` AND`\r\n      connector.condixion = c.replace('AND','').trim()\r\n     \r\n    }else if(c.trim().indexOf('OR') === 0){\r\n\r\n      connector.connector = ` OR`\r\n      connector.condixion = c.replace('OR','').trim()\r\n\r\n    }else if(c.trim().indexOf('NOT') === 0){\r\n\r\n      connector.connector = ` NOT`\r\n      connector.condixion = c.replace('NOT','').trim()\r\n\r\n    }\r\n\r\n    return connector\r\n\r\n  }else{\r\n\r\n     return c\r\n     \r\n  }\r\n\r\n\r\n}\r\n\r\nexport const set = function(set,multiSets=false){\r\n\r\n  const self = this \r\n  const pao = self.pao \r\n  const objectToArray = pao.pa_objectToArray\r\n  self.log('THE SET')\r\n  self.log(set) \r\n  self.log(multiSets)\r\n\r\n\r\n\r\n\r\n\r\n\r\n    let setStrings = ''\r\n\r\n    set.forEach((s,i)=>{\r\n\r\n\r\n        let setString = '' \r\n        let modSet = objectToArray(s,true)\r\n        console.log('THE CONVERTED SET OBJECT')\r\n        console.log(modSet)\r\n\r\n         modSet.forEach((col,pos)=>{\r\n\r\n            multiSets \r\n              ? setString += pos === modSet.length - 1 ? `${multiSets[i]}.${col.key} = \"${col.value}\"` : `${multiSets[i]}.${col.key} = \"${col.value}\", `\r\n              : setString += pos === modSet.length - 1 ? `${col.key} = \"${col.value}\"` : `${col.key} = \"${col.value}\", `\r\n           \r\n\r\n         })\r\n         \r\n         setStrings += i === set.length - 1 ? `${setString}` : `${setString}, `\r\n\r\n        // let key = ''\r\n        // let value = ''\r\n\r\n        // key = Object.keys(s)[0]\r\n        // value = s[Object.keys(s)[0]]\r\n        // console.log('THE LENGTH OF S')\r\n        // console.log(set.length)\r\n        // console.log(i)\r\n\r\n        \r\n        // setString += i === set.length - 1 ? `${key} = \"${value}\"` : `${key} = \"${value}\", `\r\n\r\n\r\n    })\r\n\r\n   console.log('THE SETSTRINGS')\r\n    console.log(setStrings)\r\n   return setStrings\r\n  \r\n}","\r\nimport * as methods from \"./methods\"\r\n\r\n\r\n\r\n\r\nclass Mysql{\r\n  \r\n  \r\n  constructor(pao){\r\n\r\n    this.pao = pao \r\n    \r\n\r\n    // // methods\r\n\r\n   \r\n\r\n     this.init = methods.init\r\n     this.handleMysqlDataRequest = methods.handleMysqlDataRequest \r\n     this.insertOne = methods.insertOne \r\n     this.insertMany = methods.insertMany \r\n     this.find = methods.find\r\n     this.remove = methods.remove\r\n     this.updateOne = methods.updateOne\r\n     this.set = methods.set\r\n     this.queryOptions = methods.queryOptions \r\n     this.queryTemplate = methods.queryTemplate \r\n     this.TRANSACTION = methods.TRANSACTION \r\n     this.PROCEDURE = methods.PROCEDURE \r\n     this.JOIN = methods.JOIN\r\n     this.SEARCH = methods.SEARCH\r\n     this.procedure = methods.procedure \r\n     this.transaction = methods.transaction\r\n     this.join = methods.join\r\n     this.joinExek = methods.joinExek\r\n     this.joinStatement = methods.joinStatement \r\n     this.joinConditionsFormat = methods.joinConditionsFormat\r\n     this.search = methods.search \r\n     this.searchExek = methods.searchExek \r\n     this.searchStatement = methods.searchStatement\r\n     this.searchConditionsFormat = methods.searchConditionsFormat \r\n     this.searchOptions = methods.searchOptions\r\n     this.combineFields = methods.combineFields\r\n     this.insert = methods.insert \r\n     this.rollback = methods.rollback\r\n    //  this.deleteOne = methods.deleteOne\r\n     this.searchFieldsFormat = methods.searchFieldsFormat \r\n     this.fieldFormat = methods.fieldFormat\r\n     this.options = methods.options\r\n     this.sort = methods.sort \r\n     this.limit = methods.limit\r\n     this.parseGroup = methods.parseGroup \r\n     this.parseFormatCondition = methods.parseFormatCondition \r\n     this.getOperand = methods.getOperand\r\n     this.conditionsConnector = methods.conditionsConnector \r\n     this.updateandtake = methods.updateandtake \r\n     this.insertandtake = methods.insertandtake \r\n     this.deleteandtake = methods.deleteandtake\r\n     this.updateJoinTemplate = methods.updateJoinTemplate \r\n     this.multiTableUpdate = methods.multiTableUpdate \r\n     this.take = methods.take\r\n     this.takeSql = methods.takeSql \r\n     this.removeJoin = methods.removeJoin\r\n    \r\n\r\n  }\r\n\r\n\r\n  \r\n\r\n}\r\n\r\nexport default Mysql","\nimport Parsers from \"./parsers\";\n\nexport default Parsers\n","\n\n\n\nexport const init = function(){\n  \n  \n\tthis.log('Parsers has been initialised')\n\tthis.listens({\n\t\t  \n\t\t  'share-middleware': this.handleShareMiddleware.bind(this)\n\t\t  \n\t  })\n\t  \n\t  \n\t  \n  }\n  \n  \n  export const handleShareMiddleware  = function(){\n  \n\t\tconst self = this \n  \n\t\t console.log('HANLDE SHARE MIDDLEWARE EVENT HAS OCCURED')\n\t\t self.emit({\n\t\t\t   \n\t\t\t   type: \"add-ext-middleware\",\n\t\t\t   data: {\n\t\t\t\t   \n\t\t\t\t   type: 'all',\n\t\t\t\t   level: 'top',\n\t\t\t\t   middleware: {funk: [\n\n\t\t\t\t\t\t\n\t\t\t\t\t\t{body: self.dependiks.bodyParser,call: 'json'}\n\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t   }\n\t\t\t \n\t\t })\n  \n\t\t\n  \n  } \n  \n \n  \n  \n\t  \n  \n\t\n  ","\nimport * as methods from \"./methods\"\n\nconst jsonfile = require('jsonfile'),\npath = require('path'),\nbodyParser = require('body-parser');\n\n\nclass Parsers{\n  \n  \n  constructor(pao){\n\n    this.pao = pao\n    this.path = path\n    this.dependiks = {\n      jsonfile: jsonfile,\n      bodyParser: bodyParser\n    }\n    \n    \n     this.init = methods.init\n     this.handleShareMiddleware = methods.handleShareMiddleware\n    \n  }\n\n\n  \n\n}\n\nexport default Parsers","\nimport Request from \"./request\"\n\nexport default Request\n","\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n\tconsole.log('Request has been initialised') \r\n  \r\n\t  this.listens({\r\n\t\t  \r\n\t\t  'config-request': this.handleConfigRequest.bind(this),\r\n\t\t  'request-handover': this.handleRequestHandOver.bind(this), \r\n\t\t  'request-global-request-response': this.handleRequestGlobalResponse.bind(this),\r\n\t\t  // 'request-view-response': this.handleRequestViewResponse.bind(this),\r\n\t\t  'request-global-request-error': this.handleRequestGlobalError.bind(this),\r\n\t\t  'request-handler-error': this.handleHandlerError.bind(this),\r\n\t\t  'router-alias-list': this.handleRouterAliasList.bind(this)\r\n\t\t  \r\n\t\t\r\n\t})\r\n\t  \r\n\t  \r\n  }\r\n  \r\n  \r\n  export const handleConfigRequest = function(data){\r\n  \r\n  \r\n\t  const self = this \r\n  \r\n\t  data.forEach(route => {\r\n\t\t  \r\n\t\t  route.view ? self.views.push(route.path) : ''\r\n  \r\n\t  });\r\n  \r\n  \r\n  }\r\n  \r\n  export const handleRequestHandOver = function(data){\r\n  \r\n\t  \r\n\t  const self = this \r\n\t  self.request.res = data.res\r\n\t  let aliasList = self.routesAliasList\r\n\t  let aliatikHandlers = self.aliatikHandlers \r\n\t  let parsed = self.parseRequest(data.req)\r\n  \r\n\t  console.log('THE ALIATIKS')\r\n\t  console.log(parsed)\r\n\t  console.log(aliasList)\r\n\t  console.log(aliatikHandlers)\r\n  \r\n\t  data.req.uploads ? \r\n\t\t  parsed.user ? parsed.user.uploads = data.req.uploads  : parsed.user = {uploads: data.req.uploads}\r\n\t\t  : ''\r\n  \r\n\t  // console.log('parsed')\r\n\t  // console.log(parsed.url.trim().split('/'))\r\n\t  let handler = parsed.handler\r\n\t   aliasList.indexOf(handler) >= 0 ? handler = aliatikHandlers[aliasList.indexOf(handler)] : ''\r\n\t   self.handler = handler\r\n  \r\n  \r\n\t  if(handler && handler.trim() !== ''){\r\n  \r\n\t\t  self.requestData = {parsed: parsed,user: parsed.user,handler: handler,request: {req: data.req,res: data.res} }\r\n  \r\n\t\t  \r\n\t\t  if(!self.views || self.views.length === 0) return self.emit({type: 'request-global-request',data: handler})\r\n\t\t  if(self.isView(data.req.originalUrl,parsed.user)) return self.emit({type: `do-view-task`,data: {payload:self.requestData,callback: self.taskerHandler.bind(self),\r\n\t\t\t  \r\n\t\t  } })\r\n\t\t  return self.emit({type: 'request-global-request',data: handler})\r\n\t\t  \r\n  \r\n\t  }else{\r\n  \r\n\t\t  if(!self.views || self.views.length === 0) return self.handlePathError() \r\n\t\t  self.requestData = {parsed: parsed,user: parsed.user,handler: handler,request: {req: data.req,res: data.res} }\r\n\t\t  if(self.isView('/home')) return self.emit({type: `do-view-task`,data: {payload:self.requestData,callback: self.taskerHandler.bind(self),\r\n\t\t  } })\r\n\t\t  \r\n\t\t  return self.handlePathError() \r\n\t  }\r\n  \r\n\t   \r\n  \r\n  \r\n\t  \r\n  } \r\n  \r\n  export const parseRequest = function(req){\r\n  \r\n\t  \r\n  \r\n\t  console.log('The req')\r\n\t  console.log(req.body)\r\n\t  console.log(req.query)\r\n\t  console.log(req.params)\r\n\t  // console.log('THE REQUEST BODY')\r\n\t  // console.log(req.body)\r\n\t  \r\n\t  let requiredData = {url: req.originalUrl}\r\n\t  let url = requiredData.url.indexOf('/') === 0 ? requiredData.url.slice(1,requiredData.url.length) : requiredData.url\r\n\t  let isPath = url.indexOf('/') > 0 ? true : false \r\n  \r\n\t  if(req.query && Object.keys(req.query).length > 0){\r\n  \r\n\t\t  console.log('THE QUERY')\r\n\t\t  console.log(req.query)\r\n\t\t  requiredData.user = req.query\r\n  \r\n\t\t  let urlFragments = url.split('?')\r\n\t\t  \r\n  \r\n  \r\n\t\t  if(isPath){\r\n\t\t\t  \r\n\t\t\t  let pathFrags = urlFragments[0].split('/')\r\n\t\t\t  console.log('THE PATH FRAGS')\r\n\t\t\t  console.log(pathFrags)\r\n\t\t\t  requiredData.handler = pathFrags[0]\r\n  \r\n\t\t  }else{\r\n  \r\n\t\t\t  console.log('THE REMAINING CONTENT AFTER SPLIT OF ?')\r\n\t\t\t  console.log(urlFragments)\r\n\t\t\t  requiredData.handler = urlFragments[0]\r\n  \r\n\t\t  }\r\n  \r\n  \r\n  \r\n\t  }else if(req.params && Object.keys(req.params).length > 0){\r\n  \r\n\t\t  console.log('THE PARAMS')\r\n\t\t  console.log(req.params)\r\n\t\t  requiredData.user = req.params\r\n  \r\n\t\t  \r\n  \r\n  \r\n\t\t  if(isPath){\r\n\t\t\t  \r\n\t\t\t  let pathFrags = url.split('/')\r\n\t\t\t  console.log('THE PATH FRAGS')\r\n\t\t\t  console.log(pathFrags)\r\n\t\t\t  requiredData.handler = pathFrags[0]\r\n  \r\n\t\t  }else{\r\n  \r\n\t\t\t  requiredData.handler = url\r\n  \r\n\t\t  }\r\n  \r\n  \r\n\t  }else if(req.body && Object.keys(req.body).length > 0){\r\n  \r\n\t\t  console.log('THE REQUEST BODY')\r\n\t\t  console.log(req.body) \r\n\t\t  requiredData.user = req.body\r\n\t\t  if(isPath){\r\n\t\t\t  \r\n\t\t\t  let pathFrags = url.split('/')\r\n\t\t\t  console.log('THE PATH FRAGS')\r\n\t\t\t  console.log(pathFrags)\r\n\t\t\t  requiredData.handler = pathFrags[0]\r\n  \r\n\t\t  }else{\r\n  \r\n\t\t\t  requiredData.handler = url\r\n  \r\n\t\t  }\r\n\t  }else{\r\n  \r\n  \r\n\t\t  requiredData.user = {}\r\n\t\t  \r\n\t\t  if(isPath){\r\n\t\t\t  \r\n\t\t\t  let pathFrags = url.split('/')\r\n\t\t\t  console.log('THE PATH FRAGS')\r\n\t\t\t  console.log(pathFrags)\r\n\t\t\t  requiredData.handler = pathFrags[0]\r\n  \r\n\t\t  }else{\r\n  \r\n\t\t\t  requiredData.handler = url\r\n  \r\n\t\t  }\r\n  \r\n\t  }\r\n  \r\n\t  \r\n\t  return requiredData\r\n  \r\n\t  \r\n  \r\n  } \r\n  \r\n  export const handleRequestGlobalError = function(data){\r\n  \r\n\t  const self = this\r\n\t  self.writeResponse({error: true,type: 'serverError',code: 502,message: 'The server error'})\r\n  }\r\n  \r\n  export const handlePathError = function(data){\r\n\t  \r\n  \r\n\t  const self = this\r\n\t  self.writeResponse({error: true,type: 'ServerError',code: 502,message: 'The requested task[handler] could not be completed'})\r\n  }\r\n  export const handleRouterAliasList = function(data){\r\n\t  \r\n  \r\n\t   const self = this\r\n\t   self.log('Router ALIATIKHANDLERS WITH DATA:')\r\n\t   self.log(data)\r\n\t  // self.writeResponse({error: true,type: 'ServerError',code: 502,message: 'The requested task[handler] could not be completed'})\r\n  \r\n\t  self.routesAliasList = data.aliasList\r\n\t  self.aliatikHandlers = data.handlers\r\n  \r\n  \r\n  }\r\n  \r\n  export const handleRequestGlobalResponse = function(data){\r\n  \r\n\t   \r\n\t  const self = this\r\n  \r\n\t  if(!data){\r\n  \r\n\t\t  self.handleByHandlerError()\r\n  \r\n\t  }else{\r\n  \r\n\t\t  self.emit({type: `handle-${self.requestData.handler}-task`,data: {payload:self.requestData,callback: self.taskerHandler.bind(self),\r\n\t\t\t  \r\n\t\t  } })\r\n\t  }\r\n  }\r\n  \r\n  export const isView = function(path,user=null){\r\n  \r\n\t   \r\n\t  const self = this \r\n\t  let views = self.views \r\n\t  \r\n  \r\n\t  self.logSync('THE VIEW PATH')\r\n\t  self.logSync(path)\r\n\t  self.logSync(user)\r\n\t  self.logSync(views)\r\n\t  // self.logSync('.extention check status')\r\n\t  //  self.logSync(path.indexOf('.'))\r\n\t  // if(path.indexOf('.') >= 0) return false\r\n  \r\n\t  if(!user){\r\n  \r\n\t\t  self.logSync('THE PARSED USsER') \r\n\t\t  self.logSync(self.requestData)\r\n\t\t  \r\n\t\t  if(self.requestData.user) self.requestData.parsed.derivedUrl = '/home'\r\n\t\t  if(views.indexOf(path) >= 0) return true \r\n\t\t  return false\r\n  \r\n\t  }else{\r\n  \r\n\t\t  if(views.indexOf(path) >= 0) return true \r\n  \r\n  \r\n\t\t  let parasList = Object.keys(user) \r\n\t\t  let parasString = ''\r\n\t\t  self.logSync('THE PARALIST')\r\n\t\t  self.logSync(parasList)\r\n\t\t   parasList.forEach((para,i)=>{\r\n  \r\n\t\t\t  i === 0 ?  parasString = `:${para}` : parasString += `/:${para}`\r\n\t\t\t  \r\n\t\t  })\r\n  \r\n\t\t  self.logSync('thE PARARSTRING')\r\n\t\t  self.logSync(parasString)\r\n  \r\n\t\tfor(let v=0 ; v < views.length; v++){\r\n  \r\n\t\t  if(views[v].indexOf(parasString) > 0){\r\n  \r\n\t\t\t  let viewPath = views[v].substr(0,views[v].indexOf(parasString)) \r\n\t\t\t  let comparePath = viewPath+parasString\r\n  \r\n\t\t\t  self.logSync('EXTRACTED VIEW PATH')\r\n\t\t\t  self.logSync(viewPath)\r\n\t\t\t  self.logSync(comparePath)\r\n\t\t\t  self.logSync(path)\r\n\t\t\t  self.logSync(path.indexOf(viewPath))\r\n\t\t\t  \r\n  \r\n\t\t\t  if(path.indexOf(viewPath) >= 0){\r\n  \r\n\t\t\t\t  self.logSync('Theviewpath matched')\r\n\t\t\t\t  self.requestData.parsed.derivedUrl = comparePath\r\n\t\t\t\t  return true\r\n  \r\n\t\t\t  }else{\r\n  \r\n\t\t\t\t  return false\r\n\t\t\t  }\r\n  \r\n\t\t\t  \r\n  \r\n\t\t  }\r\n\t\t}\r\n  \r\n\t  \r\n  \r\n\t  }\r\n\t  \r\n\t  return false\r\n  \r\n\t  \r\n  }\r\n  \r\n  \r\n  export const handleBadRequestError = function(){\r\n  \r\n\t  const self = this\r\n\t  self.writeResponse({error: true,type: 'BadRequest',code: 400,message: 'Bad Request'})\r\n  }\r\n  \r\n  export const handleHandlerNotFound = function(){\r\n  \r\n\t   const self = this\r\n\t   self.writeResponse({error: true,type: 'NotFound',code: 404,message: 'The requested task could not be completed'})\r\n  }\r\n  \r\n  export const handleByHandlerError = function(){\r\n  \r\n\t  const self = this\r\n\t  self.writeResponse({error: true,type: 'notFound',code: 404,message: 'The requested task could not be completed'})\r\n  }\r\n  \r\n  export const handleHandlerError = function(){\r\n\t  const self = this\r\n\t  self.handleHandlerError()\r\n  }\r\n  \r\n  \r\n  \r\n  export const writeResponse = function(data,method='regular'){\r\n  \r\n\t  const self = this \r\n\t  const pao = self.pao \r\n\t  // console.log('THE DATA IN WRITERESPONSE')\r\n\t  // console.log(data)\r\n\t  if(method === 'regular'){\r\n  \r\n\t\t  pao.pa_isString() ? data = pao.pa_jsToJson({text: data}) : data =  pao.pa_jsToJson(data)\r\n\t\t  \r\n\t  }\r\n\t  \r\n\t  self.emit({type: 'write-server-request-response',data: {data: data,res: self.request.res,method: method}}) \r\n  \r\n  }\r\n  \r\n  export const taskerHandler = function(fail = null,success = null,method=null){\r\n  \r\n\t  const self = this \r\n\t  const pao = self.pao \r\n  \r\n\t  console.log('THE TASKER HANDLER')\r\n\t  console.log(fail)\r\n\t  console.log(method)\r\n  \r\n\t  if(fail){\r\n  \r\n  \r\n\t\t  self.failureHandle({error: true,message: fail})\r\n\t  }else if(success){\r\n  \r\n\t\t  method ? self.successfullHandle(success,method) : self.successfullHandle(success)\r\n\t\t  \r\n\t  }\r\n  \r\n  \r\n  }\r\n  \r\n  export const successfullHandle = function(data,method){\r\n  \r\n\t  const self = this \r\n\t  self.writeResponse(data,method)\r\n  }\r\n  \r\n  export const failureHandle = function(data){\r\n  \r\n\t  const self = this \r\n\t  self.writeResponse(data)\r\n  }\r\n  \r\n  ","\r\nimport * as methods from \"./methods\"\r\n\r\n\r\nclass Request{\r\n  \r\n  \r\n  constructor(pao){\r\n\r\n     this.pao = pao\r\n     this.request = {}\r\n     this.routesAliasList = []\r\n     this.aliatikHandlers = []\r\n     this.requestData = null\r\n     this.views = []\r\n  \r\n     this.init = methods.init\r\n     this.handleConfigRequest = methods.handleConfigRequest\r\n     this.handleRequestHandOver = methods.handleRequestHandOver\r\n     this.parseRequest = methods.parseRequest\r\n     this.handleRequestGlobalError =  methods.handleRequestGlobalError\r\n     this.handleRequestGlobalResponse = methods.handleRequestGlobalResponse \r\n     this.isView = methods.isView\r\n     this.handleBadRequestError = methods.handleBadRequestError \r\n     this.handleHandlerNotFound = methods.handleHandlerNotFound \r\n     this.handleByHandlerError = methods.handleByHandlerError\r\n     this.handleHandlerError = methods.handleHandlerError \r\n     this.handlePathError = methods.handlePathError\r\n     this.handleRouterAliasList = methods.handleRouterAliasList\r\n    //  this.handleViewRender = methods.handleViewRender\r\n    //  this.renderView = methods.renderView\r\n     this.writeResponse = methods.writeResponse \r\n     this.taskerHandler = methods.taskerHandler\r\n     this.successfullHandle = methods.successfullHandle \r\n     this.failureHandle = methods.failureHandle \r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  \r\n\r\n}\r\n\r\nexport default Request","\nimport Router from \"./router\"\n\nexport default Router\n","\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n  console.log('Router has been initialised') \r\n\r\n\tthis.listens({\r\n\t\t\r\n\t\t'config-router': this.handleConfigRouter.bind(this),\r\n\t\t'router-middleware': this.handleRouterMiddleware.bind(this),\r\n\t\t'attach-routes': this.handleAttachRoutes.bind(this),\r\n\r\n\t  \r\n  })\r\n\t\r\n\t\r\n\t\r\n}\r\n\r\nexport const handleConfigRouter = function(data){\r\n\r\n\t console.log('THE HANDLE CONFIG ROUTER MODULE')\r\n\r\n\t const self = this\r\n\t self.routes = data\r\n\r\n\t\r\n} \r\n\r\n\r\nexport const handleRouterMiddleware = function(data){\r\n\r\n\tconst self = this \r\n\tconsole.log('THE ROUTER MIDDLEWARE')\r\n\tconsole.log(data)\r\n\r\n\tself.routerMiddleware = data.middleware\r\n}\r\n\r\n\r\nexport const handleAttachRoutes = function(data){\r\n\r\n\tthis.attachRoutes(data)\r\n\r\n\t\r\n} \r\n\r\n\r\n\r\nexport const attachRoutes = function(data){\r\n\r\n\tconst self = this\r\n\t\r\n\tif(data.app){\r\n\r\n\t\tlet aliasList = []\r\n\t\tlet aliatikHandlers = []\r\n\t\tdata.app.use('/',data.router)\r\n\t\tif(!self.routes){\r\n\r\n\t\t\tself.logSync('Anzii is rendering default routes::')\r\n\t\t\t\r\n\t\t\tconst defaultRoutes = [{\r\n\t\t\t\tpath: '/test',\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\ttype: 'public'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: '/test',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\ttype: 'public'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: '/',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\ttype: 'public'\r\n\t\t\t},]\r\n\r\n\t\t\tdefaultRoutes.forEach((r,i)=>{\r\n\t\t\t\r\n\t\t\t\tif(r.alias) aliasList.push(r.path.split('/')[1]), aliatikHandlers.push(r.alias)\r\n\t\t\t\tr['router'] = data.router\r\n\t\t\t\tself.renderRoute(r)\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t\tself.routes.forEach((r,i)=>{\r\n\t\t\t\r\n\t\t\tif(r.alias) aliasList.push(r.path.split('/')[1]), aliatikHandlers.push(r.alias)\r\n\t\t\tr['router'] = data.router\r\n\t\t\tself.renderRoute(r)\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t})\r\n\t\t// data.router.use(self.outOfRouterContext.bind(this))\r\n\t\taliasList.length > 0 ? self.emit({type: 'router-alias-list',data: {aliasList:aliasList,handlers: aliatikHandlers}}) : ''\r\n\r\n\t }\r\n}\r\n\r\n\r\nexport const renderRoute = function(r){\r\n\r\n\tconst self = this\r\n\tconst pao = this.pao\r\n\tlet routy = {router: r.router,method: r.method,path: r.path,handOver: self.handOver}\r\n\r\n\t// console.log('THE ROUTE MIDDLEWARE')\r\n    // console.log(self.routerMiddleware.public)\r\n\tif(r.middlewares){\r\n\r\n\t\tif(self.routerMiddleware && self.routerMiddleware[r.type]){\r\n\r\n\t\t\tself.middlewareType(r.type,r.middlewares)\r\n\t\t\tself.middlewareType(r.type,pao.pa_objectToArray(self.routerMiddleware[r.type]))\r\n\t\t\tself.appendRouter({middleware: self[`filtered${r.type}Middlewares`],...routy})\r\n\r\n\t\t}else{\r\n\r\n\t\t\tself.middlewareType(r.type,r.middlewares)\r\n\t\t\tself.appendRouter({middleware: self[`filtered${r.type}Middlewares`],...routy})\r\n\r\n\t\t}\r\n\t}else if(self.routerMiddleware && self.routerMiddleware[r.type]){\r\n\r\n\t\tself.middlewareType(r.type,pao.pa_objectToArray(self.routerMiddleware[r.type]))\r\n\t\tself.appendRouter({middleware: self[`filtered${r.type}Middlewares`],...routy})\r\n\r\n\t}else{\r\n\r\n\t\tself.appendRouter(routy)\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const appendRouter = function(r){\r\n\r\n\t// console.log('THE APPENDROUTER')\r\n\r\n\tif(r.middleware){\r\n\r\n\t\t\r\n\t\tr.router[r.method.toLowerCase()](r.path,r.middleware,r.handOver.bind(this))\r\n\r\n\t}else{\r\n\r\n\t\tr.router[r.method.toLowerCase()](r.path,r.handOver.bind(this))\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport const middlewareType = function(type,middlewares){\r\n\r\n\tconst self = this\r\n\t\r\n\t\t// console.log('THE MIDDLEWARETYP MIDDLEWARES')\r\n\t\t// console.log(middlewares)\r\n\t\tmiddlewares.forEach((m,i)=>{\r\n\r\n\t\t\tif(m.type === 'function'){\r\n\r\n\t\t\t\tself[`filtered${type}Middlewares`].push(m.value)\r\n\r\n\t\t\t}else if(m.type === 'module'){\r\n\r\n\t\t\t\tself.emit({type: `add-${m.value}-middleware`,data: {type: type,filterCallback: self.filterCallback.bind(self)}})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t\r\n}\r\n\r\nexport const outOfRouterContext = async function(req,res){\r\n\r\n\tconst self = this \r\n\tawait self.log('THE OUTOFROUTERCONTEXT REQUESTS')\r\n\tawait self.log(req.originalUrl)\r\n\tlet data = {error: true,type:\"NotFound\",code:404,message:'Resource was not found: OutOfContext'}\r\n\treturn self.emit({type: 'write-server-request-response',data: {data: data,res: res}})\r\n\r\n}\r\n\r\nexport async function handOver(req,res){\r\n\r\n\tconst self = this\r\n\tawait self.log('THE CAUGHT REQUEST INSIDE ROUTER::END POINT HIT')\r\n\tawait self.log(req.originalUrl)\r\n\tawait self.log(req.params)\r\n\tawait self.log(req.body)\r\n\treturn self.emit({type: 'request-handover',data:{req:req,res:res}})\r\n\t// return res.json({todo:{list:{items:['I ate food','I wrote code','I read a book','I watched a movie']}}})\r\n\r\n\t\r\n\r\n}\r\n\r\nexport const filterCallback = function(filterType,moduleMiddleware){\r\n\r\n\tconst self = this \r\n\r\n\tif(filterType === 'public'){\r\n\r\n\t\tself.filteredpublicMiddlewares.push(moduleMiddleware)\r\n\r\n\t}else{\r\n\t\tself.filteredprivateMiddlewares.push(moduleMiddleware)\r\n\r\n\t}\r\n\t\r\n\r\n}\r\n","\nimport * as methods from \"./methods\"\n\n\nclass Router{\n  \n  \n  constructor(pao){\n\n    this.pao = pao\n    this.routes = null \n    this.routerMiddleware = null\n    this.filteredpublicMiddlewares = []\n    this.filteredprivateMiddlewares = []\n\n\n\n     this.init = methods.init\n     this.handleConfigRouter = methods.handleConfigRouter\n     this.handleAttachRoutes = methods.handleAttachRoutes\n     this.handleRouterMiddleware = methods.handleRouterMiddleware\n     this.attachRoutes = methods.attachRoutes\n     this.renderRoute = methods.renderRoute\n     this.appendRouter = methods.appendRouter\n     this.middlewareType = methods.middlewareType\n     this.outOfRouterContext = methods.outOfRouterContext\n     this.handOver = methods.handOver \n     this.filterCallback = methods.filterCallback\n\n\n  }\n\n\n  \n\n}\n\nexport default Router","\nimport Server from \"./server\";\n\nexport default Server\n","\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n  console.log('Server has been initialised') \r\n//   console.log(this.pao)\r\n//   console.log(this)\r\n\tthis.listens({\r\n\r\n\t\t'config-server': this.handleConfigServer.bind(this),\r\n\t\t'config-domain-resources': this.handleDomainResources.bind(this),\r\n\t\t'write-server-request-response': this.handleWriteServerRequestResponse.bind(this)\r\n\t})\r\n\t\r\n\r\n}\r\n\r\nexport const handleConfigServer = function(data){\r\n\r\n\tconst self = this\r\n\r\n\t// self.emit({type:'share-middleware',data:''})\r\n\tself.emit({type: 'attach-middleware',data: {app: self.http,xpress: self.xpress}})\r\n\tself.emit({type: 'attach-routes',data: {app: self.http,router: self.router}})\r\n\tself.emit({type: 'distribute-system-resources',data:''})\r\n\tself.startServer()\r\n\t \r\n}\r\n\r\nexport const handleDomainResources = function(data){\r\n\r\n\tconst self = this \r\n\r\n\tself.logSync('THE server is emitting system defaults event')\r\n\tself.emit({type: 'set-domain-defaults',data:{app: self.http,xpress: self.xpress}})\r\n\r\n}\r\n\r\n\r\n\r\nexport const startServer  = function(data){\r\n\r\n\t  const self = this \r\n\r\n\t    // this.startPreRoutes()\r\n\t\t// this.startRouting()\r\n\t\tthis.runServer()\r\n\r\n\t  \r\n\r\n} \r\n\r\n\r\nexport const startPreRoutes  = function(){\r\n\r\n\t    const self = this \r\n\r\n\t   \r\n\t  \tself.http.use(self.dependiks.bodyParser.json())\r\n\r\n\t\t// self.http.use(function(req, res, next) {\r\n\r\n\t\t// \t// console.log(req.body)\r\n\t\t// \t// console.log('Your mobile has reached this code Surprise')\r\n\t\t// \tres.header(\"Access-Control-Allow-Origin\", \"*\");\r\n\t\t// \tres.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\r\n\t\t\r\n\t\t// \treturn next();\r\n\t\t// });\r\n\r\n\t\tself.http.use('*.js',function(req, res, next) {\r\n\r\n\t\t\t// console.log(req.body)\r\n\t\t\t// console.log('Your mobile has reached this code Surprise')\r\n\t\t\tres.set(\"content-type\", \"text/javascript\");\r\n\t\t\treturn next();\r\n\t\t})\r\n\t\t\r\n\t\tself.http.use(self.xpress.static(\"public\"))\r\n\r\n\t\r\n\t \r\n\t \r\n\r\n}\r\n\r\n\r\nexport const startRouting  = function(){\r\n\r\n\t  const self = this \r\n\r\n\t//   self.http.get('/smarfo/menu',function(req,res){\r\n\r\n\t// \tconsole.log('Request for menu has just been received')\r\n\t// \tlet categories = require('./jsondb/foodcategories.json');\r\n\t// \treturn res.send(categories.menu);\r\n\t\r\n\t// })\r\n\r\n\tself.http.get('/todo',self.renderHtml.bind(self))\r\n\tself.http.get('/ibr',self.renderHtml.bind(self))\r\n\tself.http.get('/home',self.renderHtml.bind(self))\r\n\tself.http.use('/',self.renderHtml.bind(self))\r\n\t\t\r\n\t\r\n\t\r\n\t  \r\n\t  \r\n\r\n}\r\n\r\nexport const runServer  = function(){\r\n\r\n\tconst self = this \r\n\t\r\n\tself.emit({type: 'attach-workers-to-server',data: {app: self.http}})\r\n\t// self.http.listen(process.env.PORT || 3000,()=>{\r\n\t\r\n\t//   self.log(\"The Server is listening\",'info')\r\n\t\r\n\t// })\r\n   \r\n\r\n} \r\n\r\n\r\n\r\nexport const renderHtml = function(req,res){\r\n\r\n\t   const self = this \r\n\t   console.log('A request has been made to one of the routes')\r\n\t   console.log('The html')\r\n\t   console.log('The request URL')\r\n\t   console.log(req.url)\r\n\t   self.request = {\r\n\r\n\t\t req: req,\r\n\t\t res: res\r\n\r\n\t   }\r\n\r\n\t   self.emit({\r\n\t\t   type: \"address-changed\",\r\n\t\t   data: {\r\n\t\t\t   url: req.url\r\n\t\t   }\r\n\t   })\r\n\t//    console.log(this)\r\n\t\r\n\t \r\n}\r\n\r\nexport const  handleWriteServerRequestResponse =  async function(data){\r\n\r\n\tconst self = this\r\n\r\n\tself.logSync('THE DATA TO BE SENT TO CLIENT')\r\n\tself.logSync(data.method)\r\n\tself.logSync(data.method === 'renderView')\r\n\r\n\tif(data.method === 'stream'){\r\n\t\t\r\n\t\treturn self.streamResponse(data)\r\n\t\t\r\n\r\n\t}else if(data.method === 'renderView'){\r\n\t\t\r\n\t\tlet view = data.data.data\r\n\t\tself.logSync('MAKING A VIEW request response')\r\n\t\tdata.res.set('Connection','close')\r\n\t\t// self.logSync(data)\r\n\t\t// self.logSync(data.method)\r\n\t\t// self.logSync(data.data)\r\n\t\t// self.logSync(view)\r\n\t\t// self.logSync(data.data.type === 'template')\r\n\r\n\t\tif(view.type.trim() === 'template'){\r\n\r\n\t\t\tself.logSync('Rendering template view')\r\n\t\t\tself.logSync(data.data.view)\r\n\r\n\t\t\r\n\t\t\tself.logSync('Rendering inside try')\r\n\t\t\t\r\n\r\n\t\t\tself.getHtml(data.res,view)\r\n\t\t\t.then((html)=>{\r\n\r\n\t\t\t\thtml.success \r\n\t\t\t\t? (data.res.status(200).send(html.html),\r\n\t\t\t\t   self.logSync('SERVER HAS SENT A SUCCESSFULL RESPONSE BACK TO THE CLIENT::REGULAR')\r\n\t\t\t\t  )\r\n\t\t\t\t: (data.res.status(200).send(html.html),\r\n\t\t\t\t   self.logSync('SERVER HAS SENT A FAILED RESPONSE BACK TO THE CLIENT::REGULAR')\r\n\t\t\t\t  )\r\n\r\n\t\t\t})\r\n\t\t\t.catch((e)=>{\r\n\r\n\t\t\t\tdata.res.status(200).send(e.html)\r\n\t\t\t})\r\n\r\n\r\n\t\t\treturn \r\n\r\n\t\t}else if(view.type === 'modular'){\r\n\t\t   \r\n\t\t\tself.logSync('rENDEING MODULAR VIEW')\r\n\t\t\treturn data.res.status(200).send(view.view)\r\n\r\n\t\t}\r\n\t\t// self.streamResponse(data)\r\n\r\n\t}else{\r\n\r\n\t\tawait self.log('SERVER IS ABOUT TO SEND RESPONSE BACK TO CLIENT::REGULAR')\r\n\t\tawait self.log(data.data)\r\n\t\tawait data.res.set('Connection','close')\r\n\t\t if(data.data.accepts){\r\n\r\n\t\t\t switch(data.data.accepts){\r\n\r\n\t\t\t\tcase 'json': data.res.status(200).send(data.data)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'html':self.getHtml(data.res,{view: 'main/404',title: \"Page could not be found\"})\r\n\t\t\t\t\t\t\t\t.then((html)=>{\r\n\r\n\t\t\t\t\t\t\t\t\treturn data.res.status(200).send(html.html)\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e)=>{\r\n\t\t\t\t\t\t\t\t\treturn data.res.status(200).send(e.html)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:  data.res.type('txt').status(200).send('Text not found')\r\n\t\t\t }\r\n\t\t }else{\r\n\r\n\t\t\tdata.res.status(200).send(data.data)\r\n\r\n\t\t }\r\n\t\t\r\n\t\t// await data.res.end()\r\n\t\t// // console.log(data.data)\r\n\t\treturn await self.log('SERVER HAS SENT A RESPONSE BACK TO THE CLIENT::REGULAR')\r\n\t\t\r\n\r\n\t}\r\n\r\n\t\r\n}\r\n\r\nexport const streamResponse = function(data){\r\n\r\n\tconst self = this \r\n\tconst pao = self.pao \r\n\t// const jsonToJs = pao.pa_jsonToJs\r\n\t// let data = jsonToJs(dt)\r\n\r\n\t// console.log('THE STREAM IS RUNNING')\r\n\t// console.log(data)\r\n\r\n\tconst type = self.mimeTypes[data.data.ext];\r\n\tlet rStream = data.data.rStream\r\n\r\n\r\n\t\r\n\r\n\trStream.on('open', async function () {\r\n\t\t\r\n\t\t// console.log('INSIDE ON AND PIPING')\r\n\t\t// console.log(type)\r\n\t\tdata.res.set('Content-Type', type);\r\n\t\tdata.res.set('Connection','close')\r\n\t\treturn rStream.pipe(data.res);\r\n\t\t// return await self.log('SERVER HAS SENT A STREAM RESPONSE BACK TO THE CLIENT ENDING REQUEST SOON')\r\n\r\n\t\t\r\n\t})\r\n\r\n\trStream.on('end',async function(){\r\n\r\n\t\tdata.res.end()\r\n\t\treturn await self.log('Stream request has been successfully served WITH END')\r\n\t})\r\n\t\r\n    rStream.on('error', async function (e) {\r\n\r\n\t\tconsole.log('THE ERROR READSTREAM')\r\n\t\tconsole.log(e)\r\n\t\tdata.res.set('Content-Type', 'application/json');\r\n\t\tdata.res.set('Connection','close')\r\n\t\treturn data.res.status(404).send({error: true,message: 'Not found'})\r\n\t\t// data.res.end();\r\n\t\r\n\t\t// return  await self.log('SERVER HAS SENT A STREAM RESPONSE BACK TO THE CLIENT WITH ERROR')\r\n\t});\r\n\t\r\n\r\n}\r\n\r\nexport const getHtml = function(res,view){\r\n\r\n\tconst self = this \r\n\tconst pao = self.pao \r\n\r\n\tself.logSync('THE SET VIEW')\r\n\tself.logSync(view)\r\n\treturn new Promise((resolve,reject)=>{\r\n\r\n\t\tlet viewda = null \r\n\r\n\t\tview.viewData ? viewda = view.viewData : viewda = {title: view.title } \r\n\t\t\r\n\t\tres.render(view.view,viewda,(err,html)=>{\r\n\r\n\t\t\tif(err){\r\n\t\r\n\t\t\t\t  self.logSync('THE ERROR BELOW OCCURED TRYING TO RENDER VIEW')\r\n\t\t\t\t  self.logSync(err)\r\n\r\n\t\t\t\t  res.render('main/500',{title:'Server error'},(err,html)=>{\r\n\r\n\t\t\t\t\tif(err) return resolve({html:'<hl>The page could not be found</h1>',success: false}) \r\n\t\t\t\t\treturn resolve({html: html,success: true})\r\n\r\n\t\t\t\t  })\r\n\t\t\t\t  \r\n\t\t\t\t \r\n\t\r\n\t\t\t\t//   data.res.status(404).send({error: true, message: 'The requested view was not found'})\r\n\t\t\t\t//   return self.logSync('SERVER HAS SENT A FAILED RESPONSE BACK TO THE CLIENT::REGULAR')\r\n\t\r\n\t\t\t}else{\r\n\t\r\n\t\t\t\r\n\t\t\t\treturn resolve({html: html,success: true})\r\n\t\t\t\t\r\n\t\t\t\t// return self.logSync('SERVER HAS SENT A SUCCESSFULL RESPONSE BACK TO THE CLIENT::REGULAR')\r\n\t\t\t}\r\n\t\r\n\t\t  })\r\n\r\n\r\n\t})\r\n\r\n\t\r\n\r\n\t  \r\n\r\n}\r\n\r\n\r\n","\r\nimport * as methods from \"./methods\"\r\nconst express =  require(\"express\"),\r\n\r\n// fs = require('fs'),\r\n// randomstring = require(\"randomstring\"),\r\njsonfile = require('jsonfile'),\r\npath = require('path'),\r\nbodyParser = require('body-parser');\r\n\r\n// const app = express()\r\n// import notifier from './notifier'\r\n\r\n\r\nclass Server{\r\n  \r\n  \r\n  constructor(pao){\r\n\r\n    this.pao = pao\r\n    this.xpress = express\r\n    this.http = this.xpress()\r\n    this.router = this.xpress.Router() \r\n    this.path = path\r\n    this.html = []\r\n    this.request = null\r\n    this.componentCount = 0\r\n    this.componentId = [] \r\n    this.ssrComponentLen = 0\r\n    this.componentRefLen = 0 \r\n    this.workers = []\r\n    this.fixedCompS = {\r\n    \t\r\n    \t before: [],\r\n    \t after: []\r\n    \t\r\n    } \r\n    this.compData = []\r\n    this.dependiks = {\r\n      jsonfile: jsonfile,\r\n      bodyParser: bodyParser\r\n    }\r\n    this.mimeTypes = {html: 'text/html',txt: 'text/plain',css: 'text/css',gif: 'image/gif',jpg: 'image/jpeg',\r\n                      png: 'image/png',svg: 'image/svg+xml',js: 'application/javascript'\r\n                     }\r\n    \r\n    \r\n\r\n\r\n\r\n    // methods\r\n\r\n   \r\n\r\n     this.init = methods.init\r\n     this.handleConfigServer = methods.handleConfigServer \r\n     this.handleDomainResources = methods.handleDomainResources\r\n     this.handleWriteServerRequestResponse = methods.handleWriteServerRequestResponse\r\n     this.startServer = methods.startServer\r\n     this.startPreRoutes = methods.startPreRoutes\r\n     this.startRouting = methods.startRouting \r\n     this.streamResponse = methods.streamResponse\r\n     this.runServer = methods.runServer\r\n     this.renderHtml = methods.renderHtml \r\n     this.streamResponse = methods.streamResponse \r\n     this.getHtml = methods.getHtml\r\n  \r\n     \r\n  }\r\n\r\n\r\n  \r\n\r\n}\r\n\r\nexport default Server","\nimport System from \"./system\";\n\nexport default System\n","\r\n\r\n\r\nexport const init = function(){\r\n  \r\n  \r\n\tthis.log('System has been initialised') \r\n\tthis.listens({\r\n\t\t'config-system': this.handleConfigureSystem.bind(this),\r\n\t\t'register-shutdown-candidate': this.handleRegisterShutDownCandidate.bind(this),\r\n\t\t'distribute-system-resources': this.handleDistributeSystemResources.bind(this),\r\n\t\t'attach-workers-to-server': this.handleServerAttachWorkers.bind(this)\r\n\t})\r\n\t// console.log(this.env)\r\n\r\n\r\n\t\r\n}\r\n\r\n\r\nexport const handleConfigureSystem = function(data){\r\n\t\r\n\tconst self = this \r\n\r\n\tself.log(`System ENVIROMENT IS: ${self.env}`)\r\n\t// self.log(cwd)\r\n\t// self.log(path.sep)\r\n\t// self.log(path.sep+'includes')\r\n\t// self.log(cwd.substr(0, cwd.indexOf(path.sep+'includes')) >= 0)\r\n\tself.log(self.systemBase.DOCUMENT_ROOT)\r\n\tself.handleShutDowns()\r\n\tself.clusterCustomConfig = data\r\n\t// self.masterWorker(data)\r\n\r\n\r\n\r\n}\r\n\r\nexport const handleDistributeSystemResources = async function(data){\r\n\t\r\n\tconst self = this \r\n\tconst pao = self.pao\r\n\tconst getFiles = pao.pa_getFiles\r\n\tconst getDirs = pao.pa_getDirectories\r\n\tconst getFile = pao.pa_getFile \r\n\tconst makeDirs = pao.pa_makeDirs\r\n\tconst getExtension = pao.pa_getExtension\r\n\tconst path = self.path\r\n\tlet dirPath = `${self.systemBase.DOCUMENT_ROOT}`\r\n\tlet filePath = `${self.systemBase.DOCUMENT_ROOT}${path.sep}sev.js`\r\n\tlet createPath = `${self.systemBase.DOCUMENT_ROOT}${path.sep}`\r\n\t// const path = self.path\r\n\t// const cwd = process.cwd()\r\n\r\n\t// self.log(cwd)\r\n\t// self.log(path.sep)\r\n\t// self.log(path.sep+'includes')\r\n\t// self.log(cwd.substr(0, cwd.indexOf(path.sep+'includes')) >= 0)\r\n\tself.log('HandleDistributeSystemResources ')\r\n\t// let files = await getFiles(dirPath,{recursive: false},'sev.js') \r\n\t// let dirs = await getDirs(dirPath) \r\n\t// let file = await getFile(filePath)\r\n\tlet status = await makeDirs(createPath)\r\n\tlet ext = getExtension('sev.js')\r\n\t\r\n\r\n\tconsole.log('GET FILES CALLBACK GETS A CALL')\r\n\t// console.log(files)\r\n\t// console.log(dirs)\r\n\t// console.log(file)\r\n\tconsole.log(ext)\r\n\t console.log(status)\t\t\r\n\tself.emit({type: 'take-system-base',data: {systemBase: self.systemBase}})\r\n\t// self.masterWorker(data)\r\n\r\n\r\n\r\n}\r\n\r\nexport const shutDown = function(type,code){\r\n\r\n\tconst self = this \r\n\r\n\tself.log(`SHUTDOWN TYPE: ${type},code: ${code}`)\r\n\t\r\n\tself.systemIsShuttingDown = true\r\n\t\r\n\tif(self.shutDownServices.length > 0){\r\n\r\n\t\tself.shutDownServices.forEach((sd,i) => {\r\n\t\t\t\r\n\t\t\tif(typeof sd !== 'function'){\r\n\r\n\t\t\t\tself.log(`Service: ${self.shutDownOrder[i]} must be a function,shutdown attempt failed`,'warn')\r\n\t\t\t}else{\r\n\r\n\t\t\t\tself.log(`Service: ${self.shutDownOrder[i]} is shutting down`,'info')\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tself.log(`System is shutting down through: ${type},with code: ${code.stack}`)\r\n\ttype === 'uncaughtException' ? self.context.kill(1) : self.context[type]()\r\n\r\n}\r\n\r\nexport const masterWorker = function(app){\r\n\r\n\tconst self = this \r\n\r\n\r\n\r\n     self.log(`THE STATUS OF isMaster: ${self.cluster.isMaster}`)\r\n\tif(self.cluster.isMaster){\r\n\r\n\t\tself.log(`Master ${self.context.pid} is running`)\r\n\r\n\t\tif(self.clusterCustomConfig && self.clusterCustomConfig.spawn){\r\n\r\n\t\t\tlet slaves = self.clusterCustomConfig.workers ? self.clusterCustomConfig.workers : 'auto'\r\n\t   \r\n\t\t\tif(slaves === 'auto'){\r\n\t   \r\n\t\t\t   slaves = self.os.cpus().length \r\n\t   \r\n\t\t\t   for(let s = 0; slaves < slaves; s++){\r\n\t   \r\n\t\t\t\t   self.cluster.fork()\r\n\t\t\t   }\r\n\r\n\t\t\t\t\r\n\t   \r\n\t\t\t}else{\r\n\t   \r\n\t\t\t   if(typeof slaves === 'number'){\r\n\t   \r\n\t\t\t\t   for(let s = 0; s < slaves; s++){\r\n\t   \r\n\t\t\t\t\t   self.log(`Forking slave number: ${s}`)\r\n\t\t\t\t\t   self.cluster.fork()\r\n\t\t\t\t   }\r\n\t\t\t   }\r\n\t\t\t}\r\n\r\n\t\t\tself.cluster.on('fork', (worker) => {\r\n\t\t\t\tself.log(\"cluster forking new worker\", worker.id);\r\n\t\t\t});\r\n\t\r\n\t\t\tlet mainWorkerId = null;\r\n\t\r\n\t\t\tself.cluster.on('listening', (worker, address) => {\r\n\t\t\t\tself.log(\"cluster listening new worker\", worker.id);\r\n\t\t\t\tif(null === mainWorkerId) {\r\n\t\t\t\t\tself.log(\"Making worker \" + worker.id + \" to main worker\");\r\n\t\t\t\t\tmainWorkerId = worker.id;\r\n\t\t\t\t\tworker.send({singleProcessTasks: \"startSingleProcessTasks\"});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\tself.cluster.on('exit', (worker, code, signal) => {\r\n\t\t\t\tself.log(`worker ${worker.process.pid} died`);\r\n\t\t\t\tconsole.log('FORKING ANOTHER WORK')\r\n\t\r\n\t\t\t\tconsole.log('Worker %d died :(', worker.id);\r\n\t\r\n\t\t\t\tif(worker.id === mainWorkerId) {\r\n\t\t\t\t\tconsole.log(\"Main Worker is dead...\");\r\n\t\t\t\t\tmainWorkerId = null;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tconsole.trace(\"I am here\");\r\n\t\t\t\tself.log(worker);\r\n\t\t\t\tself.log(code);\r\n\t\t\t\tself.log(signal);\r\n\t\t\t\tself.cluster.fork();\r\n\t\t\t\t\t// self.cluster.fork()\r\n\t\t\t\t});\r\n\t\t\t\r\n\t   \r\n\t\t}else{\r\n\t   \r\n\t\t   self.logSync('System is running on a single thread/core') \r\n\r\n\t\t   app.listen(self.context.env.PORT || 3000,()=>{\r\n\t\r\n\t\t\tself.logSync(\"The Server is listening via workers\",'info')\r\n\t\t\tself.logSync(\"THIS WORKER RUNNING IP:\")\r\n\t\t  \r\n\t\t  })\r\n\r\n\t\t//   process.on('message', function(message) {\r\n\t\t// \tself.log('Worker ' + process.pid + ' received message from master.', message);\r\n\t\t// \tif(message.singleProcessTasks == \"startSingleProcessTasks\") {\r\n\t\t// \t\tself.emit({type:'start-single-process-tasks',data:''})\r\n\t\t// \t}\r\n\t\t// });\r\n\r\n\t\t   \r\n\t\t} \r\n\t\t\r\n\t\t\r\n\r\n\t}else{\r\n\r\n\t\t// console.log('IT IS NOT THE MASTER PROCESS')\r\n\t\tconsole.log(`Worker ${process.pid} started`)\r\n\r\n\t\tapp.listen(self.context.env.PORT || 3000,()=>{\r\n\t\r\n\t\t\tself.log(\"The Server is listening via workers\",'info')\r\n\t\t\tself.log(\"THIS WORKER RUNNING IP:\")\r\n\t\t  \r\n\t\t  })\r\n\r\n\t\t  process.on('message', function(message) {\r\n\t\t\tself.log('Worker ' + process.pid + ' received message from master.', message);\r\n\t\t\tif(message.singleProcessTasks == \"startSingleProcessTasks\") {\r\n\t\t\t\tself.emit({type:'start-single-process-tasks',data:''})\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t}\r\n  \r\n\t \r\n}\r\n\r\nexport const folkSlaveWorkers = function(mainWorker){\r\n\r\n}\r\n\r\nexport const handleShutDowns = function(){\r\n\r\n\t console.log('Shutdowns are being handled')\r\n\t const self = this \r\n\r\n\t self.context.on('INT',function(code){\r\n\r\n\t\tif(!self.systemIsShuttingDown){\r\n\r\n\t\t\tself.shutDown('kill',code)\r\n\r\n\t\t}else{\r\n\r\n\t\t\tself.log('System is already ShuttingDown')\r\n\t\t}\r\n\r\n\t })\r\n\t self.context.on('SIGTEM',function(code){\r\n\r\n\t\tif(!self.systemIsShuttingDown){\r\n\r\n\t\t\r\n\t\t\tself.shutDown('exit',code)\r\n\r\n\t\t}else{\r\n\r\n\t\t\tself.log('System is already ShuttingDown')\r\n\t\t}\r\n\r\n\t })\r\n\r\n\t self.context.on('uncaughtException',function(code){\r\n\r\n\t\tif(!self.systemIsShuttingDown){\r\n\r\n\t\t\t\r\n\t\t\tself.shutDown('uncaughtException',code)\r\n\r\n\t\t}else{\r\n\r\n\t\t\tself.log('System is already ShuttingDown')\r\n\t\t}\r\n\r\n\t })\r\n\r\n\t self.context.on('unhandledRejection',function(code){\r\n\t\t\r\n\t\tconsole.log('uncaughtException occured from unhandleredjected',code.stack)\r\n\t\tif(!self.systemIsShuttingDown){\r\n\r\n\t\t\t\r\n\t\t\tself.shutDown('uncaughtException',code)\r\n\r\n\t\t}else{\r\n\r\n\t\t\tself.log('System is already ShuttingDown')\r\n\t\t}\r\n\r\n\t })\r\n\t\r\n}\r\n\r\nexport const handleServerAttachWorkers = function(data){\r\n\r\n\tconst self = this \r\n\tself.masterWorker(data.app)\r\n}\r\n\r\n\r\nexport const handleRegisterShutDownCandidate = function(data){\r\n\r\n\t\r\n\r\n\tconst self = this\r\n\r\n\tif((data.hasOwnProperty('candidate') && pao.pa_isFunction(data.candidate)) && data.hasOwnProperty('name') && pao.pa_isString(name)){\r\n\r\n      if(!(self.shutDownServices.indexOf(data.name) > -1)){\r\n\r\n\t\t self.shutDownServices.push(data.candidate)\r\n\t\t self.shutDownOrder.push(data.name)\r\n\t  }\r\n\r\n\r\n\t}else{\r\n\r\n\t\tself.log('Candidate could not be registered for shutdown','warn')\r\n\t}\r\n}\r\n\r\n\r\n","\nimport * as methods from \"./methods\"\n\n// Dependecies\n\nconst cluster = require('cluster');\nconst http = require('http');\nconst os = require('os')\nvar path    = require('path');\n\n\n\nclass System{\n  \n  \n  constructor(pao){\n\n    this.pao = pao \n    this.context = process\n    this.env = this.context.env\n    this.cluster = cluster \n    this.os = os \n    this.path = path\n    this.shutDownServices = []\n    this.numOfDBSD = 3\n    this.allowedDBSTR = 10000\n    this.systemIsShuttingDown = false \n    this.shutDownOrder = []\n    this.systemBase = {DOCUMENT_ROOT: process.cwd()}\n\n\n    this.init = methods.init \n    this.handleConfigureSystem = methods.handleConfigureSystem\n    this.handleRegisterShutDownCandidate = methods.handleRegisterShutDownCandidate\n    this.handleServerAttachWorkers = methods.handleServerAttachWorkers \n    this.handleDistributeSystemResources = methods.handleDistributeSystemResources\n    this.masterWorker = methods.masterWorker\n    this.folkSlaveWorkers = methods.folkSlaveWorkers\n    this.handleShutDowns = methods.handleShutDowns \n    this.shutDown = methods.shutDown \n\n\n\n    \n  }\n\n\n  \n\n}\n\nexport default System","\r\n// DEPENDECIES \r\n\r\nconst os     = require('os');\r\nconst util   = require('util');\r\nconst async  = require('async');\r\nconst extend = require('node.extend');\r\nconst fs     = require('fs');\r\nconst path   = require('path');\r\nconst uuid   = require('uuid');\r\n\r\n\r\n/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n\r\n\r\n\r\n\t\tLibrary \t : Pillar\r\n\t\tVersion \t : 1.0.0\r\n\t\tAuthor\t\t : Anzii organisation\r\n\t\tWebsite\t\t : www.anzii.com\r\n\t\tDate Created : 23/08/2019\r\n\r\n\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/\r\n\r\nmodule.exports = {\r\n\r\n\r\nEMAIL: '',\r\nPASSWORD: '',  \r\nPROMPT: process.argv || [],\r\n\r\n\r\np_o_freeze: function(o){ \r\n\r\n    if(!(o instanceof Object)) return null \r\n        \r\n        return Object.freeze(o)\r\n            \r\n\r\n\r\n},\r\np_clone: function(o){ \r\n\r\nif(!(o instanceof Object)) return null \r\n    \r\n    return JSON.parse(JSON.stringify(o))\r\n        \r\n\r\n\r\n},\r\n\r\n/**\r\n * Performs a deep merge and returns the result.  <b>NOTE:</b> DO NOT ATTEMPT\r\n * TO MERGE PROPERTIES THAT REFERENCE OTHER PROPERTIES.  This could have\r\n * unintended side-effects as well as cause errors due to circular dependencies.\r\n * @static\r\n * @method deepMerge\r\n * @param {Object} from\r\n * @param {Object} to\r\n * @return {Object}\r\n */\r\np_deepMerge : function(from, to) {\r\n    return extend(true, to, from);\r\n},\r\n\r\n/**\r\n * Checks if the supplied object is an errof. If the object is an error the\r\n * function will throw the error.\r\n * @static\r\n * @method ane\r\n * @param {Object} obj The object to check\r\n */\r\np_ane : function(obj){\r\n\tif (util.isError(obj)) {\r\n\t\tthrow obj;\r\n\t}\r\n},\r\n\r\n/**\r\n * Initializes an array with the specified number of values.  The value at each\r\n * index can be static or a function may be provided.  In the event that a\r\n * function is provided the function will be called for each item to be placed\r\n * into the array.  The return value of the function will be placed into the\r\n * array.\r\n * @static\r\n * @method initArray\r\n * @param {Integer} cnt The length of the array to create\r\n * @param {Function|String|Number} val The value to initialize each index of\r\n * the array\r\n * @return {Array} The initialized array\r\n */\r\np_initArray : function(cnt, val) {\r\n    var v = [];\r\n    var isFunc = this.p_isFunction(val);\r\n    for(var i = 0; i < cnt; i++) {\r\n        v.push(isFunc ? val(i) : val);\r\n    }\r\n    return v;\r\n},\r\n\r\n/**\r\n * Escapes a regular expression.\r\n * @deprecated since 0.7.1 Will be removed in 1.0.  Use RegExpUtils\r\n * @static\r\n * @method escapeRegExp\r\n * @param {String} The expression to escape\r\n * @return {String} Escaped regular expression.\r\n */\r\np_escapeRegExp : function(str) {\r\n\treturn RegExpUtils.escape(str);\r\n},\r\n\r\n/**\r\n * Merges the properties from the first parameter into the second. This modifies\r\n * the second parameter instead of creating a new object.\r\n *\r\n * @method merge\r\n * @param {Object} from\r\n * @param {Object} to\r\n * @return {Object} The 'to' variable\r\n */\r\np_merge : function(from, to) {\r\n    p_forEach(from, function(val, propName) {\r\n        to[propName] = val;\r\n    });\r\n    return to;\r\n},\r\n\r\n/**\r\n * Creates an object that has both the properties of \"a\" and \"b\".  When both\r\n * objects have a property with the same name, \"b\"'s value will be preserved.\r\n * @static\r\n * @method union\r\n * @return {Object} The union of properties from both a and b.\r\n */\r\np_union : function(a, b) {\r\n\tvar union = {}\r\n\tp_merge(a, union);\r\n\tp_merge(b, union);\r\n\treturn union;\r\n},\r\n\r\n/**\r\n * Creates a set of tasks that can be executed by the \"async\" module.\r\n * @static\r\n * @method getTasks\r\n * @param {Array} iterable The array of items to build tasks for\r\n * @param {Function} getTaskFunction The function that creates and returns the\r\n * task to be executed.\r\n * @example\r\n * <code>\r\n * var items = ['apple', 'orange'];\r\n * var tasks = util.getTasks(items, function(items, i) {\r\n *     return function(callback) {\r\n *         console.log(items[i]);\r\n *         callback(null, null);\r\n *     },\r\n * });\r\n * async.series(tasks, util.cb);\r\n * <code>\r\n */\r\np_getTasks : function (iterable, getTaskFunction) {\r\n\tvar tasks = [];\r\n\tfor (var i = 0; i < iterable.length; i++) {\r\n\t\ttasks.push(getTaskFunction(iterable, i));\r\n\t}\r\n\treturn tasks;\r\n},\r\n\r\n/**\r\n * Wraps a function in an anonymous function.  The wrapper function will call\r\n * the wrapped function with the provided context.  This comes in handy when\r\n * creating your own task arrays in conjunction with the async function when a\r\n * prototype function needs to be called with a specific context.\r\n * @static\r\n * @method wrapTask\r\n * @param {*} context The value of \"this\" for the function to be called\r\n * @param {Function} func The function to be executed\r\n * @param {Array} [argArray] The arguments to be supplied to the func parameter\r\n * when executed.\r\n * @return {Function}\r\n */\r\np_wrapTask : function(context, func, argArray) {\r\n    if (!util.isArray(argArray)) {\r\n        argArray = [];\r\n    }\r\n    return function(callback) {\r\n        argArray.push(callback);\r\n        func.apply(context, argArray);\r\n    }\r\n},\r\n\r\n/**\r\n * Wraps a task in a context as well as a function to mark the start and end time.  The result of the task will be\r\n * provided in the callback as the \"result\" property of the result object.  The time of execution can be found as the\r\n * \"time\" property.\r\n * @static\r\n * @method wrapTimedTask\r\n * @param {*} context The value of \"this\" for the function to be called\r\n * @param {Function} func The function to be executed\r\n * @param {string} [name] The task's name\r\n * @param {Array} [argArray] The arguments to be supplied to the func parameter\r\n * when executed.\r\n * @return {Function}\r\n */\r\np_wrapTimedTask : function(context, func, name, argArray) {\r\n    if (p_isString(argArray)) {\r\n        name = argArray;\r\n        argArray = [];\r\n    }\r\n    var task = p_wrapTask(context, func, argArray);\r\n    return function(callback) {\r\n        var start = Date.now();\r\n        task(function(err, result) {\r\n            callback(err, {\r\n                result: result,\r\n                time: Date.now() - start,\r\n                start: start,\r\n                name: name\r\n            });\r\n        });\r\n    }\r\n},\r\n\r\n/**\r\n * Provides an implementation of for each that accepts an array or object.\r\n * @static\r\n * @method forEach\r\n * @param {Object|Array} iterable\r\n * @param {Function} handler A function that accepts 4 parameters.  The value\r\n * of the current property or index.  The current index (property name if object).  The iterable.\r\n * Finally, the numerical index if the iterable is an object.\r\n */\r\np_forEach : function(iterable, handler) {\r\n\r\n    var internalHandler;\r\n    var internalIterable;\r\n    if (util.isArray(iterable)) {\r\n        internalHandler = handler;\r\n        internalIterable = iterable;\r\n    }\r\n    else if (p_isObject(iterable)) {\r\n\r\n        internalIterable = Object.getOwnPropertyNames(iterable);\r\n        internalHandler = function(propName, i) {\r\n            handler(iterable[propName], propName, iterable, i);\r\n        }\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n\r\n    //execute native foreach on interable\r\n    internalIterable.forEach(internalHandler);\r\n},\r\n\r\n/**\r\n * Hashes an array\r\n * @static\r\n * @method arrayToHash\r\n * @param {Array} array      The array to hash\r\n * @param {*} [defaultVal:true] Default value if the hashing fails\r\n * @return {Object} Hash\r\n */\r\np_arrayToHash : function(array, defaultVal) {\r\n\tif (!util.isArray(array)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n    //set the default value\r\n    if(p_isNullOrUndefined(defaultVal)) {\r\n        defaultVal = true;\r\n    }\r\n\tvar hash = {}\r\n\tfor(var i = 0; i < array.length; i++) {\r\n\t\tif (this.p_isFunction(defaultVal)) {\r\n\t\t\thash[defaultVal(array, i)] = array[i];\r\n\t\t}\r\n\t\telse {\r\n\t\t\thash[array[i]] = defaultVal;\r\n\t\t}\r\n\t}\r\n\treturn hash;\r\n},\r\n\r\np_unikify: function (array) {\r\n    var a = array.concat();\r\n    for(var i=0; i<a.length; ++i) {\r\n        for(var j=i+1; j<a.length; ++j) {\r\n            if(a[i] === a[j])\r\n                a.splice(j--, 1);\r\n        }\r\n    }\r\n\r\n    return a;\r\n},\r\n\r\n/**\r\n * Converts an array to an object.\r\n * @static\r\n * @method arrayToObj\r\n * @param {Array} array The array of items to transform from an array to an\r\n * object\r\n * @param {String|Function} keyFieldOrTransform When this field is a string it\r\n * is expected that the array contains objects and that the objects contain a\r\n * property that the string represents.  The value of that field will be used\r\n * as the property name in the new object.  When this parameter is a function\r\n * it is passed two parameters: the array being operated on and the index of\r\n * the current item.  It is expected that the function will return a value\r\n * representing the key in the new object.\r\n * @param {String|Function} [valFieldOrTransform] When this value is a string\r\n * it is expected that the array contains objects and that the objects contain\r\n * a property that the string represents.  The value of that field will be used\r\n * as the property value in the new object.  When this parameter is a function\r\n * it is passed two parameters: the array being operated on and the index of\r\n * the current item.  It is expected that the function return a value\r\n * representing the value of the derived property for that item.\r\n * @return {Object} The converted array.\r\n */\r\np_arrayToObj : function(array, keyFieldOrTransform, valFieldOrTransform) {\r\n    if (!util.isArray(array)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n    var keyIsString = p_isString(keyFieldOrTransform);\r\n    var keyIsFunc   = this.p_isFunction(keyFieldOrTransform);\r\n    if (!keyIsString && !keyIsFunc) {\r\n        return null;\r\n    }\r\n\r\n    var valIsString = p_isString(valFieldOrTransform);\r\n    var valIsFunc   = this.p_isFunction(valFieldOrTransform);\r\n    if (!valIsString && !valIsFunc) {\r\n        valFieldOrTransform = null;\r\n    }\r\n\r\n    var obj = {}\r\n    for (var i = 0; i < array.length; i++) {\r\n\r\n        var item = array[i];\r\n        var key  = keyIsString ? item[keyFieldOrTransform] : keyFieldOrTransform(array, i);\r\n\r\n        if (valIsString) {\r\n            obj[key] = item[valFieldOrTransform];\r\n        }\r\n        else if (valIsFunc) {\r\n            obj[key] = valFieldOrTransform(array, i);\r\n        }\r\n        else {\r\n            obj[key] = item;\r\n        }\r\n    }\r\n    return obj;\r\n},\r\n\r\n/**\r\n * Converts an array of objects into a hash where the key the value of the\r\n * specified property. If multiple objects in the array have the same value for\r\n * the specified value then the last one found will be kept.\r\n * @static\r\n * @method objArrayToHash\r\n * @param {Array} array The array to convert\r\n * @param {String} hashProp The property who's value will be used as the key\r\n * for each object in the array.\r\n * @return {Object} A hash of the values in the array\r\n */\r\np_objArrayToHash : function(array, hashProp) {\r\n    if (!util.isArray(array)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n    var hash = {}\r\n\tfor(var i = 0; i < array.length; i++) {\r\n        hash[array[i][hashProp]] = array[i];\r\n\t}\r\n\treturn hash;\r\n},\r\n\r\n/**\r\n * Converts a hash to an array. When provided, the hashKeyProp will be the\r\n * property name of each object in the array that holds the hash key.\r\n * @static\r\n * @method hashToArray\r\n * @param {Object} obj The object to convert\r\n * @param {String} [hashKeyProp] The property name that will hold the hash key.\r\n * @return {Array} An array of each property value in the hash.\r\n */\r\np_hashToArray : function(obj, hashKeyProp) {\r\n\tif (!p_isObject(obj)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n    var doHashKeyTransform = p_isString(hashKeyProp);\r\n    return Object.keys(obj).reduce(function(prev, prop) {\r\n        prev.push(obj[prop]);\r\n        if (doHashKeyTransform) {\r\n            obj[prop][hashKeyProp] = prop;\r\n        }\r\n        return prev;\r\n    }, []);\r\n},\r\n\r\n/**\r\n * Inverts a hash\r\n * @static\r\n * @method invertHash\r\n * @param {Object} obj Hash object\r\n * @return {Object} Inverted hash\r\n */\r\np_invertHash : function(obj) {\r\n\tif (!p_isObject(obj)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar new_obj = {}\r\n\tfor (var prop in obj) {\r\n\t\tif (obj.hasOwnProperty(prop)) {\r\n\t\t\tnew_obj[obj[prop]] = prop;\r\n\t\t}\r\n\t}\r\n\treturn new_obj;\r\n},\r\n\r\n/**\r\n * Clones an array\r\n * @static\r\n * @method copyArray\r\n * @param {Array} array\r\n * @return {Array} Cloned array\r\n */\r\np_copyArray : function(array) {\r\n\tif (!util.isArray(array)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar clone = [];\r\n\tfor (var i = 0; i < array.length; i++) {\r\n\t\tclone.push(array[i]);\r\n\t}\r\n\treturn clone;\r\n},\r\n\r\np_dedupeArray : function(array) {\r\n    var hash = p_arrayToHash(array);\r\n    return Object.keys(hash);\r\n},\r\n\r\n/**\r\n * Pushes all of one array's values into another\r\n * @static\r\n * @method arrayPushAll\r\n * @param {Array} from\r\n * @param {Array} to\r\n * @return {Boolean} FALSE when the parameters are not Arrays\r\n */\r\np_arrayPushAll : function(from, to) {\r\n\tif (!util.isArray(from) || !util.isArray(to)) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (var i = 0; i < from.length; i++) {\r\n\t\tto.push(from[i]);\r\n\t}\r\n},\r\n\r\n/**\r\n * Empty callback function just used as a place holder if a callback is required\r\n * and the result is not needed.\r\n * @static\r\n * @method cb\r\n */\r\np_cb : function(/*err, result*/){\r\n\t//do nothing\r\n},\r\n\r\n/**\r\n * Creates a unique Id\r\n * @static\r\n * @method uniqueId\r\n * @return {String} Unique Id Object\r\n */\r\np_generateUniqueID : function(){\r\n\treturn uuid.v4();\r\n},\r\n\r\n/**\r\n * Tests if a value is an object\r\n * @static\r\n * @method isObject\r\n * @param {*} value\r\n * @return {Boolean}\r\n */\r\np_isObject : function(value) {\r\n    const that = this\r\n\treturn !that.p_isNullOrUndefined(value) && typeof value === 'object';\r\n},\r\n\r\n/**\r\n * Tests if a value is an string\r\n * @static\r\n * @method isString\r\n * @param {*} value\r\n * @return {Boolean}\r\n */\r\np_isString : function(value) {\r\n    const that = this\r\n\treturn !that.p_isNullOrUndefined(value) && typeof value === 'string';\r\n},\r\n\r\n/**\r\n * Tests if a value is a function\r\n * @static\r\n * @method isFunction\r\n * @param {*} value\r\n * @return {Boolean}\r\n */\r\np_isFunction : function(value) {\r\n\treturn !this.p_isNullOrUndefined(value) && typeof value === 'function';\r\n},\r\n\r\n/**\r\n * Tests if a value is NULL or undefined\r\n * @static\r\n * @method isNullOrUndefined\r\n * @param {*} value\r\n * @return {Boolean}\r\n */\r\np_isNullOrUndefined : function(value) {\r\n    return value === null || typeof value === 'undefined';\r\n},\r\n\r\n/**\r\n * Tests if a value is a boolean\r\n * @static\r\n * @method isBoolean\r\n * @param {*} value\r\n * @return {Boolean}\r\n */\r\np_isBoolean : function(value) {\r\n    return value === true || value === false;\r\n},\r\n\r\n/**\r\n * Retrieves the subdirectories of a path\r\n * @static\r\n * @method getDirectories\r\n * @param {String}   dirPath The starting path\r\n * @param {Function} cb      Callback function\r\n */\r\np_getDirectories : function(dirPath) {\r\n\r\n    \r\n    const that = this\r\n\r\n    return new Promise((resolve,reject)=>{\r\n\r\n        var dirs = [];\r\n        fs.readdir(dirPath, function(err, files) {\r\n            if (util.isError(err)) {\r\n                return reject(err);\r\n            }\r\n\r\n            var tasks = that.p_getTasks(files, function(files, index) {\r\n                return function(callback) {\r\n\r\n                    var fullPath = path.join(dirPath, files[index]);\r\n                    fs.stat(fullPath, function(err, stat) {\r\n                        if (util.isError(err)) {\r\n                            return reject(err);\r\n                        }\r\n                        if (that.p_isNullOrUndefined(stat)) {\r\n                            console.log('WARN: Util: unstatable file encountered: %s', fullPath);\r\n                        }\r\n                        else if (stat.isDirectory()) {\r\n                            dirs.push(fullPath);\r\n                        }\r\n                        callback(err);\r\n                    });\r\n                }\r\n            });\r\n            async.parallel(tasks, function(err/*, results*/) {\r\n                resolve(dirs);\r\n            });\r\n        });\r\n\r\n\r\n    })\r\n\t\r\n},\r\n\r\n/**\r\n * Retrieves file and/or directorie absolute paths under a given directory path.\r\n * @static\r\n * @method getFiles\r\n * @param {String} dirPath The path to the directory to be examined\r\n * @param {Object} [options] Options that customize the results\r\n * @param {Boolean} [options.recursive=false] A flag that indicates if\r\n * directories should be recursively searched.\r\n * @param {Function} [options.filter] A function that returns a boolean\r\n * indicating if the file should be included in the result set.  The function\r\n * should take two parameters.  The first is a string value representing the\r\n * absolute path of the file.  The second is the stat object for the file.\r\n * @param {Function} cb A callback that takes two parameters. The first is an\r\n * Error, if occurred. The second is an array of strings representing the\r\n * absolute paths for files that met the criteria specified by the filter\r\n * function.\r\n */\r\np_getFiles : function(dirPath, options,fileName) {\r\n\r\n    let that = this\r\n\r\n    return new Promise((resolve,reject)=>{\r\n\r\n        // if (this.p_isFunction(options)) {\r\n        //     cb      = options;\r\n        //     options = {\r\n        //         recursive: false,\r\n        //         filter: function(/*fullPath, stat*/) { return true; }\r\n        //     }\r\n        // }\r\n\r\n        if(!options){\r\n\r\n            options = {\r\n                recursive: false,\r\n                filter: function(/*fullPath, stat*/) { return true; }\r\n            }\r\n\r\n        }\r\n        \r\n    \r\n        console.log('The directory path')\r\n        console.log(dirPath)\r\n        console.log(fileName)\r\n    \r\n        //read files from dir\r\n        fs.readdir(dirPath, function(err, q) {\r\n            if (util.isError(err)) {\r\n                return reject(err);\r\n            }\r\n            \r\n            console.log('The readdir results q')\r\n            console.log(q)\r\n    \r\n            //seed the queue with the absolute paths not just the file names\r\n            for (var i = 0; i < q.length; i++) {\r\n    \r\n                console.log()\r\n                q[i] = path.join(dirPath, q[i]);\r\n            }\r\n    \r\n            //process the q\r\n            var filePaths = [];\r\n            async.whilst(\r\n                function() { return q.length > 0; },\r\n                function(callback) {\r\n    \r\n                    var fullPath = q.shift();\r\n                    fs.stat(fullPath, function(err, stat) {\r\n                        if (util.isError(err)) {\r\n                            return callback(err);\r\n                        }\r\n    \r\n                        //apply filter\r\n                        var meetsCriteria = true;\r\n                        if (that.p_isFunction(options.filter)) {\r\n                            meetsCriteria = options.filter(fullPath, stat);\r\n                        }\r\n    \r\n                        //examine result and add it when criteria is met\r\n                        if (meetsCriteria) {\r\n                            filePaths.push(fullPath);\r\n                        }\r\n    \r\n                        //when recursive queue up directory's for processing\r\n                        if (!options.recursive || !stat.isDirectory()) {\r\n                            return callback(null);\r\n                        }\r\n    \r\n                        //read the directory contents and append it to the queue\r\n                        fs.readdir(fullPath, function(err, childFiles) {\r\n                            if (util.isError(err)) {\r\n                                return callback(err);\r\n                            }\r\n    \r\n                            childFiles.forEach(function(item) {\r\n                                q.push(path.join(fullPath, item));\r\n                            });\r\n                            callback(null);\r\n                        });\r\n                    });\r\n                },\r\n                function(err) {\r\n                    \r\n                    console.log('THE FILES ARRay')\r\n                    let filePath = dirPath+path.sep+fileName\r\n                    console.log(filePath)\r\n                    if(filePaths.indexOf(filePath) !== -1){\r\n\r\n                        console.log('THE IS A NEED FOR A SPECIFIC FILE')\r\n                        let filePathCont = filePaths[filePaths.indexOf(filePath)]\r\n                        let file = filePathCont.substr(filePath.indexOf(fileName),filePathCont.length - 1)\r\n                        console.log(filePathCont)\r\n                        console.log(file)\r\n\r\n                        resolve(file)\r\n\r\n                    }else{\r\n\r\n                        resolve(filePaths);\r\n\r\n                    }\r\n                    \r\n                }\r\n            );\r\n        });\r\n\r\n    })\r\n    \r\n},\r\np_getFile : function(filePath) {\r\n\r\n    const that = this\r\n    \r\n\r\n    return new Promise((resolve,reject)=>{\r\n\r\n    \r\n    \r\n        console.log('The directory path')\r\n        console.log(filePath)\r\n    \r\n        //read files from dir\r\n\r\n        var s = fs.createReadStream(filePath);\r\n        if(s){\r\n            resolve(s)\r\n        }\r\n\r\n        \r\n       \r\n    })\r\n    \r\n},\r\n\r\np_isDirectory(item){\r\n\r\n},\r\n\r\n/* Asynchronously makes the specified directory structure.\r\n * @static\r\n * @method mkdirsSync\r\n * @param {String} absoluteDirPath The absolute path of the directory structure\r\n * to be created\r\n * @param {Boolean} isFileName When true the value after the last file\r\n * separator is treated as a file.  This means that a directory with that value\r\n * will not be created.\r\n * @param {Function} cb A callback that provides an error, if occurred\r\n */\r\np_mkdirs : function(absoluteDirPath, isFileName, cb) {\r\n\r\n\r\n    const that = this \r\n\r\n    return new Promise((resolve,reject)=>{\r\n\r\n\r\n        if (that.p_isFunction(isFileName)) {\r\n            cb = isFileName;\r\n            isFileName = false;\r\n        }\r\n\r\n        if (!that.p_isString(absoluteDirPath)) {\r\n            return reject(new Error('absoluteDirPath must be a valid file path'));\r\n        }\r\n    \r\n        var pieces = absoluteDirPath.split(path.sep);\r\n    \r\n        var curr      = '';\r\n        var isWindows = os.type().toLowerCase().indexOf('windows') !== -1;\r\n        var tasks     = that.p_getTasks(pieces, function(pieces, i) {\r\n            return function(callback) {\r\n    \r\n                //we need to skip the first one bc it will probably be empty and we\r\n                //want to skip the last one because it will probably be the file\r\n                //name not a directory.\r\n                var p = pieces[i];\r\n                if (p.length === 0 || (isFileName && i >= pieces.length - 1)) {\r\n                    return callback();\r\n                }\r\n    \r\n                curr += (isWindows && i === 0 ? '' : path.sep) + p;\r\n                fs.exists(curr, function(exists) {\r\n                    if (exists) {\r\n                        return callback();\r\n                    }\r\n                    fs.mkdir(curr, callback);\r\n                });\r\n            }\r\n        });\r\n        async.series(tasks, function(err/*, results*/){\r\n            if(err) return reject(err)\r\n            resolve(true)\r\n        });\r\n        \r\n    })\r\n    \r\n\r\n    // const that = this \r\n\r\n    \r\n    // if (that.p_isFunction(isFileName)) {\r\n    //     cb = isFileName;\r\n    //     isFileName = false;\r\n    // }\r\n\r\n    // if (!that.p_isString(absoluteDirPath)) {\r\n    //     return cb(new Error('absoluteDirPath must be a valid file path'));\r\n    // }\r\n\r\n    // var pieces = absoluteDirPath.split(path.sep);\r\n\r\n    // var curr      = '';\r\n    // var isWindows = os.type().toLowerCase().indexOf('windows') !== -1;\r\n    // var tasks     = that.p_getTasks(pieces, function(pieces, i) {\r\n    //     return function(callback) {\r\n\r\n    //         //we need to skip the first one bc it will probably be empty and we\r\n    //         //want to skip the last one because it will probably be the file\r\n    //         //name not a directory.\r\n    //         var p = pieces[i];\r\n    //         if (p.length === 0 || (isFileName && i >= pieces.length - 1)) {\r\n    //             return callback();\r\n    //         }\r\n\r\n    //         curr += (isWindows && i === 0 ? '' : path.sep) + p;\r\n    //         fs.exists(curr, function(exists) {\r\n    //             if (exists) {\r\n    //                 return callback();\r\n    //             }\r\n    //             fs.mkdir(curr, callback);\r\n    //         });\r\n    //     }\r\n    // });\r\n    // async.series(tasks, function(err/*, results*/){\r\n    //     cb(err);\r\n    // });\r\n},\r\n\r\n/**\r\n * Synchronously makes the specified directory structure.\r\n * @static\r\n * @method mkdirsSync\r\n * @param {String} absoluteDirPath The absolute path of the directory structure\r\n * to be created\r\n * @param {Boolean} isFileName When true the value after the last file\r\n * separator is treated as a file.  This means that a directory with that value\r\n * will not be created.\r\n */\r\np_mkdirsSync : function(absoluteDirPath, isFileName) {\r\n\r\n    const that = this\r\n\r\n    if (!that.p_isString(absoluteDirPath)) {\r\n        throw new Error('absoluteDirPath must be a valid file path');\r\n    }\r\n\r\n    var pieces    = absoluteDirPath.split(path.sep);\r\n    var curr      = '';\r\n    var isWindows = os.type().toLowerCase().indexOf('windows') !== -1;\r\n    pieces.forEach(function(p, i) {\r\n\r\n        //we need to skip the first one bc it will probably be empty and we\r\n        //want to skip the last one because it will probably be the file\r\n        //name not a directory.\r\n        if (p.length === 0 || (isFileName && i >= pieces.length - 1)) {\r\n            return;\r\n        }\r\n\r\n        curr += (isWindows && i === 0 ? '' : path.sep) + p;\r\n        if (!fs.existsSync(curr)) {\r\n            fs.mkdirSync(curr);\r\n        }\r\n    });\r\n},\r\n\r\n/**\r\n * Retrieves the extension off of the end of a string that represents a URI to\r\n * a resource\r\n * @static\r\n * @method getExtension\r\n * @param {String} filePath URI to the resource\r\n * @param {Object} [options]\r\n * @param {Boolean} [options.lower=false] When TRUE the extension will be returned as lower case\r\n * @param {String} [options.sep] The file path separator used in the path.  Defaults to the OS default.\r\n * @return {String} The value after the last '.' character\r\n */\r\np_getExtension : function(filePath, options) {\r\n\r\n    const that = this\r\n    if (!that.p_isString(filePath) || filePath.length <= 0) {\r\n        return null;\r\n    }\r\n    if (!that.p_isObject(options)) {\r\n        options = {}\r\n    }\r\n\r\n    //do to the end of the path\r\n    var pathPartIndex = filePath.lastIndexOf(options.sep || path.sep) || 0;\r\n    if (pathPartIndex > -1) {\r\n\t\t\tfilePath = filePath.substr(pathPartIndex);\r\n\t\t}\r\n\r\n    var ext = null;\r\n    var index = filePath.lastIndexOf('.');\r\n    if (index >= 0) {\r\n        ext = filePath.substring(index + 1);\r\n\r\n        //apply options\r\n        if (options.lower) {\r\n            ext = ext.toLowerCase();\r\n        }\r\n    }\r\n    return ext;\r\n},\r\n\r\n/**\r\n * Creates a filter function to be used with the getFiles function to skip files that are not of the specified type\r\n * @static\r\n * @method getFileExtensionFilter\r\n * @param extension\r\n * @return {Function}\r\n */\r\np_getFileExtensionFilter : function(extension) {\r\n    var ext = '.' + extension;\r\n    return function(fullPath) {\r\n        return fullPath.lastIndexOf(ext) === (fullPath.length - ext.length);\r\n    }\r\n},\r\n\r\n//inherit from node's version of 'util'.  We can't use node's \"util.inherits\"\r\n//function because util is an object and not a prototype.\r\n\r\n/**\r\n * Overrides the basic inherit functionality to include static functions and\r\n * properties of prototypes\r\n * @static\r\n * @method inherits\r\n * @param {Function} Type1\r\n * @param {Function} Type2\r\n */\r\np_inherits : function(Type1, Type2) {\r\n    if (p_isNullOrUndefined(Type1) || p_isNullOrUndefined(Type2)) {\r\n        throw new Error('The type parameters must be objects or prototypes');\r\n    }\r\n\r\n    util.inherits(Type1, Type2);\r\n    p_merge(Type2, Type1);\r\n},\r\n\r\n\r\n\r\njs_to_json: function(jsObject,filter,indent){\r\n\r\n\r\n\r\n\r\n    var jsonString = JSON.stringify(jsObject);\r\n\r\n\r\n    return jsonString;\r\n\r\n},\r\n\r\njson_to_js: function(jsonString,options){\r\n\r\n\r\nvar jsObject = JSON.parse(jsonString);\r\n\r\nreturn jsObject;\r\n\r\n        \r\n\r\n},\r\n\r\nclone: function(o){\r\n\r\n\r\n\r\n    if(o instanceof Array){\r\n\r\n    let newA = []\r\n    o.forEach(e => {\r\n\r\n    if(e instanceof Array){\r\n\r\n        newA.push(this.clone(e))\r\n\r\n    }else if(e instanceof Object){\r\n\r\n        newA.push(this.clone(e))\r\n    }else{\r\n\r\n        newA.push(e)\r\n    }\r\n        \r\n    });\r\n\r\n    return newA\r\n\r\n    }else if(o instanceof Object && typeof o !== 'function'){\r\n\r\n\r\n        let n = {}\r\n        for(let p in o){\r\n\r\n            if(o[p] instanceof Array){\r\n\r\n                n[p] = this.clone(o[p])\r\n            }else if(o[p] instanceof Object && typeof o[p] !== 'function' ){\r\n\r\n                \r\n                n[p] = this.clone(o[p])\r\n            }else{\r\n\r\n\r\n                    if(p === 'callback'){\r\n\r\n                        console.log('The current property is callback')\r\n                    }\r\n                n[p] = o[p]\r\n            }\r\n            \r\n            \r\n        }\r\n\r\n        return n\r\n    }\r\n\r\n        \r\n\r\n},\r\n\r\n/*********************************** OBJECT AND ARRAY CASTING ************************************************************/\r\n\r\n\r\n\r\nobject_to_array: function(castObj,keys=false){\r\n    console.log('THE CAST OBJECT')\r\n    console.log(castObj)\r\n\r\nif(castObj instanceof Object){\r\n\r\n\r\n    if(!(castObj instanceof Array)){\r\n\r\n\r\n\r\n\r\n\r\n        var arr = [];\r\n        var count = 0;\r\n\r\n        if(keys){\r\n\r\n            for(let key in castObj){\r\n\r\n\r\n                arr[count] =  {key: key,value: castObj[key]};\r\n    \r\n                ++count;\r\n            }\r\n\r\n        }else{\r\n\r\n            for(let key in castObj){\r\n\r\n\r\n                arr[count] =  castObj[key];\r\n    \r\n                ++count;\r\n            }\r\n\r\n        }\r\n        \r\n       console.log('THE RETURN OF CONVERTED OBJECT')\r\n       console.log(arr)\r\n        return arr;\r\n\r\n\r\n\r\n    }else{\r\n\r\n\r\n        return castObj;\r\n    }\r\n\r\n\r\n\r\n}else{\r\n\r\n\r\n    this.throwErrors('Argument 1 of object_to_array() must be an object');\r\n}\r\n\r\n\r\n    \r\n\r\n\r\n},\r\n\r\narray_to_object: function(castArr){\r\n\r\n\r\n\r\nif(castArr instanceof Array){\r\n\r\n\r\n\r\n\r\n        var obj = {}; \r\n\r\n        for(var i=0; i < castArr.length; i++){\r\n\r\n            var property = 'property_'+(i+1);\r\n            \r\n            obj[property] = castArr[i];\r\n\r\n\r\n        }\r\n\r\n        \r\n\r\n        return obj;\r\n    \r\n}else{\r\n\r\n\r\n    this.throwErrors('Argument 1 of array_to_object() must be an array');\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n},\r\n\r\nstring_to_array: function(string,sep){\r\n\r\n    console.log('STRING TO ARRAY')\r\n    console.log(string) \r\n    console.log(sep)\r\n    if(this.is_string(string)){\r\n\r\n        console.log('THE STRING IS AN INSTANCE OF STRING')\r\n        return string.split(sep)\r\n    }\r\n\r\n},\r\n\r\n\r\nset_deeply: function(path,deep,value = null,type=null){\r\n\r\n\r\n    //  console.log('TYPEOF AC')\r\n    //  console.log(ac)\r\n    // if(!(ac)){\r\n\r\n    // \tconsole.log('AC IS NULL')\r\n    // \tvar a = deep \r\n    // }\r\n\r\n    // console.log('THE VALUE OF A')\r\n    // console.log(a)\r\n\r\n  if(path.length === 1){\r\n\r\n        console.log('ABOUT TO SET DEEPLY NESTED PROP')\r\n        console.log('THE DEEP')\r\n        console.log(deep)\r\n\r\n\r\n        if(!(value)){\r\n\r\n\r\n            console.log('THIS DEEP ARRAY')\r\n            console.log(this.js_to_json(deep))\r\n            console.log('THE DEEP I,i')\r\n            deep.splice(path[0],1)\r\n            console.log(deep)\r\n            \r\n            \r\n\r\n        }else{\r\n\r\n            deep[path[0]] = value\r\n\r\n        }\r\n        \r\n        console.log(path)\r\n        console.log(path[0]) \r\n        console.log(deep[path])\r\n        return true\r\n  }\r\n\r\n  if(!(deep[path[0]])){\r\n\r\n     console.log('THE PROPERTY BELOW DOES NOT EXIST')\r\n     console.log(path)\r\n     console.log(path[0])\r\n    //  console.log(deep[path[0]])\r\n     return false\r\n  }\r\n\r\n return this.set_deeply(path.slice(1),deep[path[0]],value,type)\r\n\r\n \r\n\r\n},\r\n\r\nget_deeply : function(path){\r\n\r\n\r\n\r\n},\r\nis_function: function (x) {\r\nreturn Object.prototype.toString.call(x) === '[object Function]';\r\n},\r\nis_array: function (x) {\r\nreturn Object.prototype.toString.call(x) === '[object Array]';\r\n},\r\nis_date: function (x) {\r\nreturn Object.prototype.toString.call(x) === '[object Date]';\r\n},\r\nis_object: function (x) {\r\nreturn Object.prototype.toString.call(x) === '[object Object]';\r\n},\r\nis_string: function(x){\r\n\r\nreturn Object.prototype.toString.call(x) === '[object String]';\r\n},\r\nis_value: function (x) {\r\nreturn !this.isObject(x) && !this.isArray(x);\r\n},\r\nis_not_falsey: function(x) {\r\n\r\n  if(this.trim_spaces(x)){return true}else{return false}\r\n},\r\n\r\ntrim_spaces: function(x){\r\n\r\nif(x instanceof String){return x.trim()}else{return x}\r\n},\r\ncompare_values: function (value1, value2) {\r\n   \r\nif (value1 === value2) {\r\n      return \r\n}\r\nif (this.is_date(value1) && this.is_date(value2) && value1.getTime() === value2.getTime()) {\r\n  return\r\n}\r\nif (value1 !== value2) {\r\n      value1 = value2\r\n      return\r\n}\r\n\r\n\r\n},\r\nis_equal_ab: function(a,b,flag = 'values'){\r\n\r\n\r\nif(!(this.is_object(a) && this.is_object(b))){\r\n    return false\r\n}\r\n\r\nif(Object.keys(a).length !== Object.keys(b).length){\r\n\r\n    return false\r\n}\r\n\r\n\r\nif(flag.trim() === 'keys'){\r\n\r\n    var akeys = Object.keys(a).sort()\r\n    var bKeys = Object.keys(b).sort()\r\n    return JSON.stringify(aKeys) === JSON.stringify(bKeys) \r\n\r\n    // var akeys = Object.keys(a)\r\n\r\n    // for (let k of akeys) {\r\n\r\n    // \tif (a[k] !== b[k]) {\r\n    // \treturn false;\r\n    // \t}\r\n    // }\r\n\r\n    // return true\r\n\r\n}else{\r\n\r\n    \r\n    if(!(this.js_to_json(a) === this.js_to_json(b))){\r\n\r\n        return false\r\n    }else{\r\n\r\n        return true\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n},\r\nis_valid_email: function(email){\r\n\r\n    return true\r\n},\r\nis_valid_password: function(password){\r\n\r\n    return true\r\n},\r\nis_same_value: function(x,y){\r\n\r\n    if(this.isBrowserSupported('Object','is')){\r\n\r\n        return Object.is(x,y)\r\n\r\n    }else{\r\n\r\n        return this.polyFills().objectIs(x,y)\r\n        \r\n    }\r\n\r\n},\r\nunlike_props: function(a,b){\r\n\r\nlet akeys = Object.keys(a)\r\nlet bkeys = Object.keys(b)\r\n\r\nif(a.length > b.length){\r\n\r\n    let unlike = null\r\n\r\n    for (let k of akeys) {\r\n\r\n        if (a[k] !== b[k]) {\r\n\r\n            if(unlike){\r\n\r\n                unlike.a.push(k)\r\n            }else{\r\n\r\n                unlike = {a: [k]}\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return unlike\r\n\r\n}else{\r\n\r\n    for (let k of bkeys) {\r\n\r\n        if (b[k] !== a[k]) {\r\n\r\n            if(unlike){\r\n\r\n                unlike.b.push(k)\r\n            }else{\r\n\r\n                unlike = {b: [k]}\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return unlike\r\n\r\n\r\n}\r\n\r\n    \r\n\r\n},\r\nthrowErrors: function(errorMessage){ // Define throwErrors method\t\t\t\t\r\n    throw new Error(errorMessage);\r\n\r\n\r\n},\r\ncontains: function(o,v){\r\n\r\n    \r\n\r\nif(this.is_array(o)){\r\n\r\n    return o.indexOf(v) > -1 ? true : false\r\n\r\n}else if(this.is_object(o)){\r\n\r\n    if(this.is_array(v)){\r\n     \r\n        console.log('THE SPECIFED VALUE TO CHECK IS AN ARRAY')\r\n        console.log(v)\r\n        let outcome = ''\r\n\r\n        for(let i = 0; i < v.length; i++){\r\n\r\n            if(!o.hasOwnProperty(v[i])){\r\n\r\n                outcome = false\r\n                break\r\n            }else if(i === v.length - 1){\r\n\r\n                outcome = true\r\n            }\r\n        }\r\n        \r\n        console.log('THE OUTCOME')\r\n        console.log(outcome)\r\n        return outcome\r\n\r\n    }else{\r\n\r\n        return o.hasOwnProperty(v) ? true : false \r\n\r\n    }\r\n    \r\n\r\n}else{\r\n\r\n    this.throwErrors('Contains() requires either an array pure js object')\r\n}\r\n\r\n\r\n},\r\n\r\nfor_of: function(x,action,y=null){\r\n\r\n  x = this.clone(x)\r\n\r\nif(this.is_array(x)){\r\n\r\n    x.forEach(action)\r\n\r\n}else if(this.is_object(x)){\r\n\r\n    if(!(y)){\r\n\r\n        // console.log('THE FOROF Y IS NULL')\r\n        // console.log(x)\r\n        console.log('THE Y IS DEFINED')\r\n        let newX = {}\r\n        for(let p in x){\r\n\r\n           \r\n           let prop = action(p,x[p])\r\n           newX[prop.p] = prop.v\r\n\r\n        }\r\n\r\n        // console.log('THE NEWX')\r\n        // console.log(newX)\r\n\r\n        return newX\r\n\r\n    }else{\r\n\r\n        for(let p in x){\r\n\r\n            action(p,x[p])\r\n        }\r\n\r\n        \r\n\r\n    }\r\n\r\n}else{\r\n\r\n    this.throwErrors('Object of for_of() must be an Array or pure object')\r\n}\r\n\r\n},\r\nadd_values_to: function(x,keys,values){\r\n\r\nif(this.is_array(x)){\r\n\r\n    x.forEach(action)\r\n\r\n}else if(this.is_object(x)){\r\n\r\n\r\n\r\n        keys.forEach((k,i)=>{\r\n\r\n            let vItemKeys = Object.keys(values[k])\r\n            \r\n            if(x[k]){\r\n\r\n                vItemKeys.forEach((v)=>{\r\n\r\n                    x[k][v] = values[v]\r\n                })\r\n                \r\n            }else{\r\n\r\n                x[k] = {}\r\n\r\n                vItemKeys.forEach((v)=>{\r\n\r\n                    x[k][v] = values[v]\r\n                })\r\n\r\n            }\r\n            \r\n        })\r\n\r\n         return x\r\n\r\n\r\n}else{\r\n\r\n    this.throwErrors('Object of for_of() must be an Array or pure object')\r\n}\r\n\r\n},\r\nfind_in: function(x,id,f){\r\n\r\nif(this.is_array(x)){\r\n\r\n    if(this.is_value(x[0])){\r\n\r\n        return\tx.indexOf(f) > - 1 ? x[f] : false\r\n    }else if(this.is_object(x[0])){\r\n\r\n        for(let i=0; i < x.length; i++){\r\n\r\n            if(sb.sb_contains(x[i],id) && x[i][id] === f ){\r\n\r\n                return x[i]\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n}\r\n\r\n","\r\nconst Anzii = require('./anzii').default\r\n\r\nmodule.exports = function(modules = null){\r\n\r\n    //  console.log('THE VALUE OF ACTIVATE')\r\n    //  console.log(Anzii)\r\n    // console.log(Components)\r\n    // console.log('The typeof Components')\r\n    // console.log(Components instanceof Array)\r\n    // console.log('The server Module')\r\n    // console.log(Server)\r\n    // Components.unshift({Server})\r\n    // let html = true\r\n//    console.log('ANZII OBJECT')\r\n//    console.log(Anzii)\r\n//    console.log(Anzii.Activate)\r\n    modules ?  Anzii.Activate([modules]) :  Anzii.Activate()\r\n   \r\n  \r\n}\r\n\r\n\r\n","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"async\");","module.exports = require(\"body-parser\");","module.exports = require(\"cluster\");","module.exports = require(\"config\");","module.exports = require(\"debug\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"jsonfile\");","module.exports = require(\"mysql\");","module.exports = require(\"node.extend\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"supports-color\");","module.exports = require(\"util\");","module.exports = require(\"uuid\");","module.exports = require(\"winston\");","module.exports = require(\"winston/lib/winston/transports\");"],"sourceRoot":""}